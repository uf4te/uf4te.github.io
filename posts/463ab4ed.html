<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>å †åŸºç¡€ | å å…¥æ˜Ÿé‡çš„æœˆğŸŒ™</title><meta name="author" content="uf4te"><meta name="copyright" content="uf4te"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="éƒ½è¯´ PWN çš„ä¸–ç•Œåˆ†ä¸ºæ ˆã€å †å’Œå†…æ ¸ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†å †è¿™ç§æ•°æ®ç»“æ„çš„ç›¸å…³æ¦‚å¿µï¼Œä½œä¸ºå †åˆ©ç”¨çš„å‰ç½®åŸºç¡€"><meta property="og:type" content="article"><meta property="og:title" content="å †åŸºç¡€"><meta property="og:url" content="https://www.uf4te.cn/posts/463ab4ed.html"><meta property="og:site_name" content="å å…¥æ˜Ÿé‡çš„æœˆğŸŒ™"><meta property="og:description" content="éƒ½è¯´ PWN çš„ä¸–ç•Œåˆ†ä¸ºæ ˆã€å †å’Œå†…æ ¸ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦ä»‹ç»äº†å †è¿™ç§æ•°æ®ç»“æ„çš„ç›¸å…³æ¦‚å¿µï¼Œä½œä¸ºå †åˆ©ç”¨çš„å‰ç½®åŸºç¡€"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.uf4te.cn/img/cover/cover-123.jpg"><meta property="article:published_time" content="2024-05-15T12:04:36.000Z"><meta property="article:modified_time" content="2024-06-05T06:37:19.000Z"><meta property="article:author" content="uf4te"><meta property="article:tag" content="CTF"><meta property="article:tag" content="Pwn"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.uf4te.cn/img/cover/cover-123.jpg"><link rel="shortcut icon" href="/img/blog/avatar.jpg"><link rel="canonical" href="https://www.uf4te.cn/posts/463ab4ed.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//sdk.51.la"><meta name="baidu-site-verification" content="codeva-b3iLZWQECM"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>!function(t){"use strict";!function(e){var r=window,s=document,n=t,c="".concat("https:"===s.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),i=s.createElement("script"),o=s.getElementsByTagName("script")[0];i.type="text/javascript",i.setAttribute("charset","UTF-8"),i.async=!0,i.src=c,i.id="LA_COLLECT",n.d=i;var a=function(){r.LA.ids.push(n)};r.LA?r.LA.ids&&a():(r.LA=t,r.LA.ids=[],a()),o.parentNode.insertBefore(i,o)}()}({id:"3GoBenqrrrBby5er",ck:"3GoBenqrrrBby5er",hashMode:!0})</script><script>!function(e,t,n,r){var i=t.createElement("script"),o=t.getElementsByTagName("script")[0];i.type="text/javascript",i.crossorigin=!0,i.onload=function(){(new e.LingQue.Monitor).init({id:"3GoBenqrrrBby5er"})},o.parentNode.insertBefore(i,o),i.src="https://sdk.51.la/perf/js-sdk-perf.min.js"}(window,document)</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"XY1UOYTY6S",apiKey:"4f03dfbbbff745c98fa4728e2ca61a96",indexName:"uf4te",hits:{per_page:10},languages:{input_placeholder:"æœç´¢æ–‡ç« ",hits_empty:"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}",hits_stats:"æ‰¾åˆ° ${hits} æ¡ç»“æœï¼Œç”¨æ—¶ ${time} æ¯«ç§’"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"ç¹",msgToSimplifiedChinese:"ç®€"},noticeOutdate:void 0,highlight:{plugin:"prismjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"å¤åˆ¶æˆåŠŸ",error:"å¤åˆ¶é”™è¯¯",noSupport:"æµè§ˆå™¨ä¸æ”¯æŒ"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"åˆšåˆš",min:"åˆ†é’Ÿå‰",hour:"å°æ—¶å‰",day:"å¤©å‰",month:"ä¸ªæœˆå‰"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“",cht_to_chs:"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“",day_to_night:"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼",night_to_day:"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼",bgLight:"#323232",bgDark:"#696969",position:"bottom-center"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!1,rightside:!0}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"å †åŸºç¡€",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-06-05 14:37:19"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"></head><body><span id="fps"></span><script>var fdataUser={apiurl:"https://friends.uf4te.cn/",defaultFish:500,hungryFish:500}</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="å å…¥æ˜Ÿé‡çš„æœˆğŸŒ™" type="application/atom+xml"><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg" onerror='onerror=null,src="/img/404/loading_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-book-open"></i> <span>æ–‡åº“</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i> <span>æ–‡ç« å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ–‡ç« æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>æ–‡ç« åˆ†ç±»</span></a></li><li><a class="site-page child" href="javascript:toRandomPost()"><i class="fa-fw fa-solid fa-car-side"></i> <span>éšä¾¿é€›é€›</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-circle-nodes"></i> <span>äº’åŠ¨</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa-solid fa-pen-nib"></i> <span>æˆ‘çš„è¯´è¯´</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾æœ‹å‹åœˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-thumbs-up"></i> <span>æ¨è</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/"><i class="fa-fw fa-solid fa-wrench"></i> <span>å®ç”¨å·¥å…·</span></a></li><li><a class="site-page child" href="/collect/"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>æ—¶ç©ºä¹‹æµ·</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-user-astronaut"></i> <span>æˆ‘çš„è£…å¤‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-regular fa-address-card"></i> <span>å…³äºæœ¬ç«™</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url('/img/blog/default_top_img.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="å å…¥æ˜Ÿé‡çš„æœˆğŸŒ™"><img class="site-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg"></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-book-open"></i> <span>æ–‡åº“</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i> <span>æ–‡ç« å½’æ¡£</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>æ–‡ç« æ ‡ç­¾</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>æ–‡ç« åˆ†ç±»</span></a></li><li><a class="site-page child" href="javascript:toRandomPost()"><i class="fa-fw fa-solid fa-car-side"></i> <span>éšä¾¿é€›é€›</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-circle-nodes"></i> <span>äº’åŠ¨</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa-solid fa-pen-nib"></i> <span>æˆ‘çš„è¯´è¯´</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>å‹æƒ…é“¾æ¥</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fa-solid fa-user-group"></i> <span>å‹é“¾æœ‹å‹åœˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-thumbs-up"></i> <span>æ¨è</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/"><i class="fa-fw fa-solid fa-wrench"></i> <span>å®ç”¨å·¥å…·</span></a></li><li><a class="site-page child" href="/collect/"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>æ—¶ç©ºä¹‹æµ·</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-user-astronaut"></i> <span>æˆ‘çš„è£…å¤‡</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-regular fa-address-card"></i> <span>å…³äºæœ¬ç«™</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">å †åŸºç¡€</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-sharp fa-regular fa-pen-to-square fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2024-05-15T12:04:36.000Z 2024-05-15 20:04:36">2024-05-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-06-05T06:37:19.000Z 2024-06-05 14:37:19">2024-06-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-folder-open fa-fw post-meta-icon"></i> <a class="post-meta-categories" href="/categories/%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%A9%E7%94%A8/">äºŒè¿›åˆ¶æ¼æ´åˆ©ç”¨</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span> <span class="word-count">6.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span> <span>25åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span data-flag-title="å †åŸºç¡€"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span class="waline-pageview-count" data-path="/posts/463ab4ed.html"><i class="fa-solid fa-spinner fa-spin"></i></span></span> <span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">è¯„è®ºæ•°:</span><a href="/posts/463ab4ed.html#post-comment"><span class="waline-comment-count" data-path="/posts/463ab4ed.html"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h1><blockquote><p>å †ï¼ˆheapï¼‰æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå †å¯ä»¥æä¾›åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œå…è®¸ç¨‹åºç”³è¯·å¤§å°æœªçŸ¥çš„å†…å­˜</p><p>å †æ˜¯ç¨‹åºè™šæ‹Ÿåœ°å€ç©ºé—´ä¸­çš„ä¸€å—è¿ç»­çš„çº¿æ€§åŒºåŸŸï¼Œå®ƒ<strong>ç”±ä½åœ°å€å‘é«˜åœ°å€æ–¹å‘å¢é•¿ï¼ˆå’Œæ ˆçš„å¢é•¿æ–¹å‘ç›¸åï¼‰</strong>ï¼Œç®¡ç†å †çš„ç¨‹åºä¹Ÿç§°ä¸ºå †ç®¡ç†å™¨</p><p>å‚è€ƒæ–‡ç« ï¼š</p><ol><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9jdGYtd2lraS5vcmcvcHduL2xpbnV4L3VzZXItbW9kZS9oZWFwL3B0bWFsbG9jMi9oZWFwLW92ZXJ2aWV3Lw==">å †æ¦‚è¿° - CTF Wiki</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93aWtpLndncHNlYy5vcmcv">ç‹¼ç»„å®‰å…¨å›¢é˜Ÿå…¬å¼€çŸ¥è¯†åº“</a></li></ol></blockquote><p>ç›®å‰ Linux æ ‡å‡†å‘è¡Œç‰ˆä¸­ä½¿ç”¨çš„å †åˆ†é…å™¨æ˜¯ Glibc ä¸­çš„å †åˆ†é…å™¨ï¼š<code>ptmalloc2</code></p><p>å †çš„åŸºæœ¬æ“ä½œæ˜¯åˆ†é…å’Œå›æ”¶ï¼Œ<code>ptmalloc2</code> ä¸»è¦é€šè¿‡ <code>malloc()</code> å’Œ <code>free()</code> å‡½æ•°æ¥åˆ†é…å’Œé‡Šæ”¾å†…å­˜å—</p><hr><h2 id="å †çš„åŸºæœ¬æ“ä½œ"><a href="#å †çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="å †çš„åŸºæœ¬æ“ä½œ"></a>å †çš„åŸºæœ¬æ“ä½œ</h2><h3 id="malloc"><a href="#malloc" class="headerlink" title="malloc"></a>malloc</h3><blockquote><p>å‡½æ•°å£°æ˜ï¼š<code>void *malloc(size_t size)</code></p><p><code>size</code> æ˜¯å†…å­˜å—çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½</p></blockquote><p><code>malloc()</code> çš„ä½œç”¨æ˜¯åˆ†é…æ‰€éœ€çš„å†…å­˜ç©ºé—´ï¼ˆ<em>ä¸ä¼šå¯¹å†…å­˜ç©ºé—´è¿›è¡Œåˆå§‹åŒ–</em>ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼›å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œåˆ™è¿”å› NULL</p><ul><li><p>å½“ <code>size = 0</code> æ—¶ï¼Œè¿”å›å½“å‰ç³»ç»Ÿå…è®¸çš„å †çš„æœ€å°å†…å­˜å—</p></li><li><p>å½“ <code>size</code> ä¸ºè´Ÿæ•°æ—¶ï¼Œ<strong>ç”±äºåœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸Šï¼Œsize_t æ˜¯æ— ç¬¦å·æ•°ï¼ˆè¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼‰</strong>ï¼Œæ‰€ä»¥ç¨‹åºå°±ä¼šç”³è¯·å¾ˆå¤§çš„å†…å­˜ç©ºé—´ï¼Œä½†é€šå¸¸æ¥è¯´éƒ½ä¼šå¤±è´¥ï¼Œå› ä¸ºç³»ç»Ÿæ²¡æœ‰é‚£ä¹ˆå¤šçš„å†…å­˜å¯ä»¥åˆ†é…</p></li></ul><p>ä»¥ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥çœ‹çœ‹ <code>malloc()</code> å‡½æ•°å’Œå †ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdlib.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>ptr <span class="token operator">=</span> <span class="token function">malloc</span><span class="token punctuation">(</span><span class="token number">0x10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">free</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ GDB è°ƒè¯•å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ‰§è¡Œ <code>malloc()</code> å‡½æ•°å‰ï¼Œç¨‹åºçš„åœ°å€ç©ºé—´é‡Œæ˜¯æ²¡æœ‰å †çš„ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA1.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º1.png"></p><p>æ‰§è¡Œ <code>malloc()</code> å‡½æ•°åï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA2.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º2.png"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA3.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º3.png"></p><p>å¯è§ç¨‹åºä¸­æœ€å¼€å§‹æ˜¯æ²¡æœ‰å †è¿™éƒ¨åˆ†ç©ºé—´çš„ï¼Œåœ¨ç”¨æˆ·é€šè¿‡ <code>malloc()</code> ç”³è¯·å†…å­˜åæ‰ä¼šå‡ºç°ï¼Œå¹¶ä¸”ä¼šä¸€æ¬¡æ€§ç”³è¯·å¾ˆå¤§ç©ºé—´çš„å †æ®µï¼ˆ<code>0x555555559000 ~ 0x55555557a000</code>ï¼‰</p><blockquote><p>æ³¨æ„ï¼šæ–°ç‰ˆæœ¬çš„ Glibc å¯¹å †ç»“æ„çš„ç®¡ç†æœ‰äº›åŒºåˆ«ï¼Œä¸Šå›¾æ˜¯åœ¨ Glibc 2.37 çš„ Kali Linux 2024.1 ä¸­è¿›è¡Œçš„æµ‹è¯•</p><p>è€Œåœ¨ Glibc 2.23 çš„ Ubuntu 16.04 ä¸­æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA6.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º6.png"></p></blockquote><hr><h4 id="calloc"><a href="#calloc" class="headerlink" title="calloc"></a>calloc</h4><blockquote><p>å‡½æ•°å£°æ˜ï¼š<code>void *calloc(size_t nitems, size_t size)</code></p><p><code>nitems</code> ä¸ºè¦è¢«åˆ†é…çš„å…ƒç´ ä¸ªæ•°ï¼›<code>size</code> ä¸ºå…ƒç´ çš„å¤§å°</p></blockquote><p><code>calloc()</code> åœ¨åŠŸèƒ½ä¸Šä¸ <code>malloc()</code> å‡ ä¹ç›¸åŒï¼ŒåŒºåˆ«åœ¨äº <em><code>calloc()</code> ç”³è¯·å†…å­˜ç©ºé—´åä¼šå°†å…¶å…¨éƒ¨åˆå§‹åŒ–ä¸º 0</em></p><p>ä½¿ç”¨ <code>calloc()</code> å‡½æ•°æ—¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœåˆ†é…çš„å†…å­˜å—è¿‡å¤§ï¼Œå¯èƒ½ä¼šå¯¼è‡´å†…å­˜ä¸è¶³çš„é—®é¢˜</p><hr><h4 id="realloc"><a href="#realloc" class="headerlink" title="realloc"></a>realloc</h4><blockquote><p>å‡½æ•°å£°æ˜ï¼š<code>void *realloc(void *ptr, size_t size)</code></p><p><code>ptr</code> æ˜¯ä¸€ä¸ªæŒ‡å‘è¦é‡æ–°åˆ†é…å†…å­˜çš„å†…å­˜å—çš„æŒ‡é’ˆï¼›<code>size</code> æ˜¯å†…å­˜å—çš„æ–°çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½</p></blockquote><p><code>realloc()</code> çš„ä½œç”¨æ˜¯é‡æ–°è°ƒæ•´ä¹‹å‰é€šè¿‡&nbsp;<code>malloc()</code>&nbsp;æˆ–&nbsp;<code>calloc()</code>&nbsp;æ‰€åˆ†é…çš„&nbsp;<code>ptr</code>&nbsp;æ‰€æŒ‡å‘çš„å†…å­˜å—çš„å¤§å°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å‘é‡æ–°åˆ†é…å¤§å°çš„å†…å­˜çš„æŒ‡é’ˆï¼›å¦‚æœè¯·æ±‚å¤±è´¥ï¼Œåˆ™è¿”å› NULL</p><ul><li><p>å¦‚æœ <code>ptr</code> ä¸ºç©ºæŒ‡é’ˆï¼Œåˆ™ä¼šåˆ†é…ä¸€ä¸ªæ–°çš„å†…å­˜å—ï¼Œä¸”å‡½æ•°è¿”å›ä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆï¼Œç›¸å½“äº <code>malloc()</code></p></li><li><p>å¦‚æœ <code>size = 0</code>ï¼Œä¸” <code>ptr</code> æŒ‡å‘ä¸€ä¸ªå·²å­˜åœ¨çš„å†…å­˜å—ï¼Œåˆ™ <code>ptr</code> æ‰€æŒ‡å‘çš„å†…å­˜å—ä¼šè¢«é‡Šæ”¾ï¼Œå¹¶è¿”å›ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œç›¸å½“äº <code>free()</code></p></li></ul><p>å¦å¤–ï¼Œé’ˆå¯¹é‡æ–°ç”³è¯·çš„å¤§å°ä¸ä¹‹å‰ç”³è¯·å†…å­˜çš„å¤§å°çš„å…³ç³»ï¼Œåˆæœ‰ä¸‰ç§ä¸åŒçš„æƒ…å†µï¼š</p><ol><li><p>å¦‚æœé‡æ–°ç”³è¯·çš„å¤§å° &gt; ä¹‹å‰ç”³è¯·å†…å­˜çš„å¤§å°ï¼Œä¸”å½“å‰å†…å­˜æ®µåé¢æœ‰éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œåˆ™ç›´æ¥æ‰©å±•è¿™æ®µå†…å­˜ç©ºé—´ï¼Œ<code>realloc()</code> å°†è¿”å›åŸæŒ‡é’ˆ</p></li><li><p>å¦‚æœé‡æ–°ç”³è¯·çš„å¤§å° &gt; ä¹‹å‰ç”³è¯·å†…å­˜çš„å¤§å°ï¼Œä¸”å½“å‰å†…å­˜æ®µåé¢çš„ç©ºé—²ç©ºé—´ä¸å¤Ÿï¼Œé‚£ä¹ˆå°±ä½¿ç”¨å †ä¸­çš„ç¬¬ä¸€ä¸ªèƒ½å¤Ÿæ»¡è¶³è¿™ä¸€è¦æ±‚çš„å†…å­˜å—ï¼Œå°†ç›®å‰çš„æ•°æ®å¤åˆ¶åˆ°æ–°çš„ä½ç½®ï¼Œå¹¶å°†åŸæ¥çš„æ•°æ®å—é‡Šæ”¾æ‰ï¼Œè¿”å›æ–°çš„å†…å­˜å—åœ°å€ï¼Œç›¸å½“äº <code>free() + malloc()</code></p></li><li><p>å¦‚æœé‡æ–°ç”³è¯·çš„å¤§å° &lt; ä¹‹å‰ç”³è¯·å†…å­˜çš„å¤§å°ï¼Œå †å—ä¼šç›´æ¥ç¼©å°ï¼Œè¢«å‰Šå‡çš„å†…å­˜ä¼šé‡Šæ”¾ï¼Œè¿™é‡Œçš„é‡Šæ”¾ä¸ <code>free()</code> ä¸åŒ</p></li></ol><hr><h3 id="free"><a href="#free" class="headerlink" title="free"></a>free</h3><blockquote><p>å‡½æ•°å£°æ˜ï¼š<code>void free(void *ptr)</code></p><p><code>ptr</code> æ˜¯ä¸€ä¸ªæŒ‡å‘è¦é‡Šæ”¾å†…å­˜çš„å†…å­˜å—çš„æŒ‡é’ˆ</p></blockquote><p><code>free()</code> çš„ä½œç”¨æ˜¯é‡Šæ”¾ä¹‹å‰é€šè¿‡ <code>malloc()</code>ã€<code>calloc()</code> æˆ– <code>realloc()</code> æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ï¼Œè¯¥å‡½æ•°ä¸è¿”å›ä»»ä½•å€¼</p><ul><li><p>å¦‚æœä¼ é€’çš„å‚æ•° <code>ptr</code> æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œåˆ™ä¸ä¼šæ‰§è¡Œä»»ä½•åŠ¨ä½œ</p></li><li><p>å½“å‚æ•° <code>ptr</code> å·²ç»è¢«é‡Šæ”¾ä¹‹åï¼Œå†æ¬¡é‡Šæ”¾ä¼šå‡ºç°ä¹±ä¸ƒå…«ç³Ÿçš„æ•ˆæœï¼ˆDouble Freeï¼‰</p></li><li><p>å½“é‡Šæ”¾å¾ˆå¤§çš„å†…å­˜ç©ºé—´æ—¶ï¼Œç¨‹åºä¼šå°†è¿™äº›å†…å­˜ç©ºé—´è¿˜ç»™ç³»ç»Ÿï¼Œä»¥ä¾¿äºå‡å°ç¨‹åºæ‰€ä½¿ç”¨çš„å†…å­˜ç©ºé—´ï¼ˆè¢« <code>mallopt</code> ç¦ç”¨çš„æƒ…å†µä¸‹é™¤å¤–ï¼‰</p></li></ul><p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„ä¾‹å­æ¥çœ‹ï¼Œæ‰§è¡Œ <code>free()</code> ä¹‹åå †æ®µå¹¶ä¸ä¼šæ¶ˆå¤±ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA4.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º4.png"></p><p>ä½†æ˜¯å †ä¸­çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA5.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º5.png"></p><p>æˆ‘ä»¬ç”³è¯·çš„ç©ºé—´å˜æˆäº† <code>Free chunk</code></p><blockquote><p>æ³¨æ„ï¼šæ–°ç‰ˆæœ¬çš„ Glibc å¯¹å †ç»“æ„çš„ç®¡ç†æœ‰äº›åŒºåˆ«ï¼Œä¸Šå›¾æ˜¯åœ¨ Glibc 2.37 çš„ Kali Linux 2024.1 ä¸­è¿›è¡Œçš„æµ‹è¯•</p><p>è€Œåœ¨ Glibc 2.23 çš„ Ubuntu 16.04 ä¸­æ˜¯è¿™æ ·çš„ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA7.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º7.png"></p></blockquote><p>é€šè¿‡ <code>free()</code> é‡Šæ”¾çš„å †å—ä¸ä¼šç«‹åˆ»è¢«å›æ”¶ï¼Œå®ƒä»¬ä¼šå˜æˆ <code>Free chunk</code> å¹¶åŠ ä¸Šäº†ä¸€ç§ <code>xxx bin</code> çš„åå­—ï¼Œä¾‹å¦‚ä¸Šå›¾ Glibc 2.23 ä¸­çš„ <code>fastbins</code>ï¼ˆ<code>fast bin</code>ï¼‰</p><p><em>é€šå¸¸æ¥è¯´ï¼Œå½“å †å—é‡Šæ”¾åï¼Œå¦‚æœä¸å¦ä¸€ä¸ªè¢«é‡Šæ”¾çš„å †å—æˆ–è€… <code>top chunk</code> ç›¸é‚»ï¼Œåˆ™è¿™äº›ç©ºé—´ä¼šè¢«åˆå¹¶</em>ï¼ˆ<strong>ä½†æ˜¯ fast bin æ˜¯ä¸ªç‰¹ä¾‹ï¼Œä¸ä¼šè½»æ˜“åˆå¹¶</strong>ï¼‰</p><hr><h3 id="å†…å­˜åˆ†é…èƒŒåçš„ç³»ç»Ÿè°ƒç”¨"><a href="#å†…å­˜åˆ†é…èƒŒåçš„ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="å†…å­˜åˆ†é…èƒŒåçš„ç³»ç»Ÿè°ƒç”¨"></a>å†…å­˜åˆ†é…èƒŒåçš„ç³»ç»Ÿè°ƒç”¨</h3><blockquote><p>æ— è®ºæ˜¯ <code>malloc</code> å‡½æ•°è¿˜æ˜¯ <code>free</code> å‡½æ•°ï¼Œæˆ‘ä»¬åŠ¨æ€ç”³è¯·å’Œé‡Šæ”¾å†…å­˜æ—¶ï¼Œéƒ½ç»å¸¸ä¼šä½¿ç”¨ï¼Œä½†æ˜¯å®ƒä»¬å¹¶ä¸æ˜¯çœŸæ­£ä¸ç³»ç»Ÿäº¤äº’çš„å‡½æ•°</p><p>è¿™äº›å‡½æ•°èƒŒåçš„ç³»ç»Ÿè°ƒç”¨ä¸»è¦æ˜¯ <code>brk</code> å‡½æ•°ä»¥åŠ <code>mmap</code> å‡½æ•°</p></blockquote><ol><li><p><code>brk</code> æ˜¯å°† DATA æ•°æ®æ®µçš„æœ€é«˜åœ°å€æŒ‡é’ˆ <code>_edata</code> å¾€é«˜åœ°å€æ¨ï¼ˆ<code>_edata</code> æŒ‡å‘æ•°æ®æ®µçš„æœ€é«˜åœ°å€ï¼‰</p></li><li><p><code>mmap</code> æ˜¯åœ¨è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ï¼ˆå †å’Œæ ˆä¸­é—´ï¼Œç§°ä¸ºæ–‡ä»¶æ˜ å°„åŒºåŸŸçš„åœ°æ–¹ï¼‰æ‰¾ä¸€å—ç©ºé—²çš„è™šæ‹Ÿå†…å­˜</p></li></ol><p><code>brk</code> å’Œ <code>mmap</code> è¿™ä¸¤ç§æ–¹å¼åˆ†é…çš„éƒ½æ˜¯è™šæ‹Ÿå†…å­˜ï¼Œæ²¡æœ‰åˆ†é…ç‰©ç†å†…å­˜</p><p>åœ¨ç¬¬ä¸€æ¬¡è®¿é—®å·²åˆ†é…çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„æ—¶å€™ï¼Œå‘ç”Ÿç¼ºé¡µä¸­æ–­ï¼Œæ“ä½œç³»ç»Ÿè´Ÿè´£åˆ†é…ç‰©ç†å†…å­˜ï¼Œç„¶åå»ºç«‹è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ä¹‹é—´çš„æ˜ å°„å…³ç³»</p><ul><li><code>malloc</code> å°äº <code>128k</code>ï¼ˆ<code>0x20000</code> å­—èŠ‚ï¼‰çš„å†…å­˜æ—¶ï¼Œä½¿ç”¨ <code>brk</code> åˆ†é…å†…å­˜</li><li><code>malloc</code> å¤§äºç­‰äº <code>128k</code>ï¼ˆ<code>0x20000</code> å­—èŠ‚ï¼‰çš„å†…å­˜æ—¶ï¼Œä½¿ç”¨ <code>mmap</code> åˆ†é…å†…å­˜ï¼Œåœ¨å †å’Œæ ˆä¹‹é—´æ‰¾ä¸€å—ç©ºé—²å†…å­˜åˆ†é…</li></ul><p>ç¬¬ä¸€æ¬¡æ‰§è¡Œ <code>malloc</code> å¯èƒ½å‡ºç°çš„ç³»ç»Ÿè°ƒç”¨å¦‚ä¸‹ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA19.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º19.png"></p><blockquote><p>æ³¨æ„ï¼š</p><p><code>brk</code> ä¼šç›´æ¥æ‹“å±•åŸæ¥çš„å †ï¼Œ<code>mmap</code> ä¼šå•ç‹¬æ˜ å°„ä¸€å—å†…å­˜</p><p><strong><code>mmap</code> åˆ†é…çš„å†…å­˜ä¸ libc åŸºåœ°å€ä¹‹å‰å­˜åœ¨å›ºå®šçš„åç§»ï¼Œå› æ­¤å¯ä»¥æ¨ç®—å‡º libc çš„åŸºåœ°å€</strong></p></blockquote><hr><h4 id="brk"><a href="#brk" class="headerlink" title="brk"></a>brk</h4><blockquote><p>å¯¹äºå †çš„æ“ä½œï¼Œæ“ä½œç³»ç»Ÿæä¾›äº† <code>brk</code> å‡½æ•°ï¼ŒGlibc åº“æä¾›äº† <code>sbrk</code> å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ  <code>brk</code> çš„å¤§å°æ¥å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜</p></blockquote><p>åˆå§‹æ—¶ï¼Œå †çš„èµ·å§‹åœ°å€&nbsp;<code>start_brk</code>&nbsp;ä»¥åŠå †çš„å½“å‰æœ«å°¾&nbsp;<code>brk</code>&nbsp;æŒ‡å‘åŒä¸€åœ°å€ã€‚æ ¹æ®æ˜¯å¦å¼€å¯ ASLRï¼Œä¸¤è€…çš„å…·ä½“ä½ç½®ä¼šæœ‰æ‰€ä¸åŒï¼š</p><ul><li>ä¸å¼€å¯ ASLR ä¿æŠ¤æ—¶ï¼Œ<code>start_brk</code> ä»¥åŠ <code>brk</code> ä¼šæŒ‡å‘ DATA/BSS æ®µçš„ç»“å°¾ã€‚</li><li>å¼€å¯ ASLR ä¿æŠ¤æ—¶ï¼Œ<code>start_brk</code> ä»¥åŠ <code>brk</code> ä¹Ÿä¼šæŒ‡å‘åŒä¸€ä½ç½®ï¼Œåªæ˜¯è¿™ä¸ªä½ç½®æ˜¯åœ¨ DATA/BSS æ®µç»“å°¾åçš„éšæœºåç§»å¤„</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA18.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º18.png"></p><hr><h4 id="mmap"><a href="#mmap" class="headerlink" title="mmap"></a>mmap</h4><blockquote><p><code>malloc</code> ä¼šä½¿ç”¨ <code>mmap</code> æ¥åˆ›å»ºç‹¬ç«‹çš„åŒ¿åæ˜ å°„æ®µã€‚åŒ¿åæ˜ å°„çš„ç›®çš„ä¸»è¦æ˜¯å¯ä»¥ç”³è¯·ä»¥ 0 å¡«å……çš„å†…å­˜ï¼Œå¹¶ä¸”è¿™å—å†…å­˜ä»…è¢«è°ƒç”¨è¿›ç¨‹æ‰€ä½¿ç”¨</p></blockquote><ul><li>åœ¨æ‰§è¡Œ <code>mmap</code> ä¹‹å‰ï¼Œåªæœ‰ <code>.so</code> æ–‡ä»¶çš„ <code>mmap</code> æ®µ</li><li>æ‰§è¡Œ <code>mmap</code> ä¹‹åï¼Œæˆ‘ä»¬ç”³è¯·çš„å†…å­˜ä¸å·²ç»å­˜åœ¨çš„å†…å­˜æ®µç»“åˆåœ¨äº†ä¸€èµ·ï¼Œæ„æˆäº†æ–°çš„ <code>mmap</code> æ®µ</li></ul><hr><h2 id="å †çš„ç»“æ„"><a href="#å †çš„ç»“æ„" class="headerlink" title="å †çš„ç»“æ„"></a>å †çš„ç»“æ„</h2><h3 id="å¾®è§‚ç»“æ„"><a href="#å¾®è§‚ç»“æ„" class="headerlink" title="å¾®è§‚ç»“æ„"></a>å¾®è§‚ç»“æ„</h3><h4 id="malloc-chunk"><a href="#malloc-chunk" class="headerlink" title="malloc_chunk"></a>malloc_chunk</h4><blockquote><p><code>chunk</code> ä¹Ÿå«å—ï¼Œåœ¨å†…å­˜ä¸­è¡¨ç¤ºçš„æ„æ€å°±æ˜¯ä¸€å—å†…å­˜ï¼Œè¿™å—å†…å­˜åœ¨ <code>ptmalloc2</code> å†…éƒ¨ç”¨ <code>malloc_chunk</code> ç»“æ„ä½“æ¥è¡¨ç¤º</p><p>åœ¨ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç§°ç”± <code>malloc()</code> ç”³è¯·çš„å†…å­˜ä¸º <code>chunk</code>ï¼Œ<code>chunk</code> ä¹Ÿæ˜¯å †çš„æœ€å°æ“ä½œå•å…ƒ</p><p>å‚è€ƒæ–‡ç« ï¼š<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9jdGYtd2lraS5vcmcvcHduL2xpbnV4L3VzZXItbW9kZS9oZWFwL3B0bWFsbG9jMi9oZWFwLXN0cnVjdHVyZS8jbWFsbG9jX2NodW5r">å †ç›¸å…³æ•°æ®ç»“æ„ - CTF Wiki</a></p></blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA15.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º15.png"></p><p><code>malloc_chunk</code> çš„ç»“æ„ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token comment">/*
  This struct declaration is misleading (but accurate and necessary).
  It declares a "view" into memory allowing access to necessary
  fields at known offsets from a given base. See explanation below.
*/</span>
<span class="token keyword">struct</span> <span class="token class-name">malloc_chunk</span> <span class="token punctuation">{</span>

  INTERNAL_SIZE_T      prev_size<span class="token punctuation">;</span>  <span class="token comment">/* Size of previous chunk (if free).  */</span>
  INTERNAL_SIZE_T      size<span class="token punctuation">;</span>       <span class="token comment">/* Size in bytes, including overhead. */</span>

  <span class="token keyword">struct</span> <span class="token class-name">malloc_chunk</span><span class="token operator">*</span> fd<span class="token punctuation">;</span>         <span class="token comment">/* double links -- used only if free. */</span>
  <span class="token keyword">struct</span> <span class="token class-name">malloc_chunk</span><span class="token operator">*</span> bk<span class="token punctuation">;</span>

  <span class="token comment">/* Only used for large blocks: pointer to next larger size.  */</span>
  <span class="token keyword">struct</span> <span class="token class-name">malloc_chunk</span><span class="token operator">*</span> fd_nextsize<span class="token punctuation">;</span> <span class="token comment">/* double links -- used only if free. */</span>
  <span class="token keyword">struct</span> <span class="token class-name">malloc_chunk</span><span class="token operator">*</span> bk_nextsize<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€äº›å‚æ•°çš„è§£é‡Šï¼š</p><ul><li><p><code>prev_size</code></p><ol><li><p>å¦‚æœè¯¥ <code>chunk</code> çš„ç‰©ç†ç›¸é‚»çš„å‰ä¸€åœ°å€ <code>chunk</code>ï¼ˆä¸¤ä¸ªæŒ‡é’ˆçš„åœ°å€å·®å€¼ä¸ºå‰ä¸€ä¸ª <code>chunk</code> çš„å¤§å°ï¼‰æ˜¯ç©ºé—²çš„è¯ï¼Œé‚£ä¹ˆ <code>prev_size</code> è®°å½•çš„æ˜¯å‰ä¸€ä¸ª <code>chunk</code> çš„å¤§å°ï¼ˆåŒ…æ‹¬ <code>chunk</code> å¤´ï¼‰</p></li><li><p>å¦åˆ™ï¼Œ<code>prev_size</code> å¯ä»¥ç”¨æ¥å­˜å‚¨ç‰©ç†ç›¸é‚»çš„å‰ä¸€ä¸ª <code>chunk</code> çš„æ•°æ®ã€‚è¿™é‡Œçš„å‰ä¸€ä¸ª <code>chunk</code> æŒ‡çš„æ˜¯è¾ƒä½åœ°å€çš„ <code>chunk</code></p></li></ol></li><li><p><code>size</code></p><ol><li><p><code>size</code> è¡¨ç¤ºè¯¥ <code>chunk</code> çš„å¤§å°ï¼Œå¤§å°å¿…é¡»æ˜¯ <code>2 * SIZE_SZ</code> çš„æ•´æ•°å€ã€‚å¦‚æœç”³è¯·çš„å†…å­˜å¤§å°ä¸æ˜¯ <code>2 * SIZE_SZ</code> çš„æ•´æ•°å€ï¼Œä¼šè¢«è½¬æ¢æˆæ»¡è¶³å¤§å°çš„æœ€å°çš„ <code>2 * SIZE_SZ</code> çš„å€æ•°</p></li><li><p>32 ä½ç³»ç»Ÿä¸­ï¼Œ<code>SIZE_SZ</code> æ˜¯ 4ï¼›64 ä½ç³»ç»Ÿä¸­ï¼Œ<code>SIZE_SZ</code> æ˜¯ 8ã€‚ è¯¥å­—æ®µçš„ä½ä¸‰ä¸ªæ¯”ç‰¹ä½å¯¹ <code>chunk</code> çš„å¤§å°æ²¡æœ‰å½±å“ï¼Œå®ƒä»¬ä»é«˜åˆ°ä½åˆ†åˆ«è¡¨ç¤º</p></li><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œå †ä¸­ç¬¬ä¸€ä¸ªè¢«åˆ†é…çš„å†…å­˜å—çš„ <code>size</code> å­—æ®µçš„ <code>P</code> ä½éƒ½ä¼šè¢«è®¾ç½®ä¸º 1ï¼Œä»¥ä¾¿äºé˜²æ­¢è®¿é—®å‰é¢çš„éæ³•å†…å­˜ï¼›å½“ä¸€ä¸ª <code>chunk</code> çš„ <code>size</code> çš„ <code>P</code> ä½ä¸º 0 æ—¶ï¼Œæˆ‘ä»¬èƒ½é€šè¿‡ <code>prev_size</code> å­—æ®µæ¥è·å–ä¸Šä¸€ä¸ª <code>chunk</code> çš„å¤§å°ä»¥åŠåœ°å€ã€‚è¿™ä¹Ÿæ–¹ä¾¿è¿›è¡Œç©ºé—² <code>chunk</code> ä¹‹é—´çš„åˆå¹¶</p></li></ol></li></ul><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æ„ä¹‰</th><th></th></tr></thead><tbody><tr><td align="left"><code>ï¼ˆAï¼‰NON_MAIN_ARENA</code></td><td align="left">è®°å½•å½“å‰ <code>chunk</code> æ˜¯å¦ä¸å±äºä¸»çº¿ç¨‹ï¼Œ1 è¡¨ç¤ºä¸å±äºï¼Œ0 è¡¨ç¤ºå±äº</td><td></td></tr><tr><td align="left"><code>ï¼ˆMï¼‰IS_MAPPED</code></td><td align="left">è®°å½•å½“å‰ <code>chunk</code> æ˜¯å¦æ˜¯ç”± <code>mmap</code> åˆ†é…çš„</td><td></td></tr><tr><td align="left"><code>ï¼ˆPï¼‰PREV_INUSE</code></td><td align="left">è®°å½•å‰ä¸€ä¸ª <code>chunk</code> å—æ˜¯å¦è¢«åˆ†é…ï¼Œ0 è¡¨ç¤ºç©ºé—²ï¼Œ1 è¡¨ç¤ºä½¿ç”¨ä¸­</td><td></td></tr></tbody></table><ul><li><p><code>fdã€bk</code></p><ol><li><p><code>chunk</code> å¤„äºåˆ†é…çŠ¶æ€æ—¶ï¼Œä» <code>fd</code> å­—æ®µå¼€å§‹æ˜¯ç”¨æˆ·çš„æ•°æ®ã€‚<code>chunk</code> ç©ºé—²æ—¶ï¼Œä¼šè¢«æ·»åŠ åˆ°å¯¹åº”çš„ç©ºé—²ç®¡ç†é“¾è¡¨ä¸­</p></li><li><p>é€šè¿‡ <code>fd</code> å’Œ <code>bk</code> å¯ä»¥å°†ç©ºé—²çš„ <code>chunk</code> å—åŠ å…¥åˆ°ç©ºé—²çš„ <code>chunk</code> å—é“¾è¡¨è¿›è¡Œç»Ÿä¸€ç®¡ç†</p></li></ol></li></ul><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æ„ä¹‰</th></tr></thead><tbody><tr><td align="left"><code>fd</code></td><td align="left">æŒ‡å‘ä¸‹ä¸€ä¸ªï¼ˆéç‰©ç†ç›¸é‚»ï¼‰ç©ºé—²çš„ <code>chunk</code></td></tr><tr><td align="left"><code>bk</code></td><td align="left">æŒ‡å‘ä¸Šä¸€ä¸ªï¼ˆéç‰©ç†ç›¸é‚»ï¼‰ç©ºé—²çš„ <code>chunk</code></td></tr></tbody></table><ul><li><p><code>fd_nextsizeã€bk_nextsize</code></p><ol><li><p>åªæœ‰ <code>chunk</code> ç©ºé—²çš„æ—¶å€™æ‰ä½¿ç”¨ï¼Œä¸è¿‡å…¶ç”¨äºè¾ƒå¤§çš„ <code>chunk</code>ï¼ˆ<code>large chunk</code>ï¼‰</p></li><li><p>ä¸€èˆ¬ç©ºé—²çš„ <code>large chunk</code> åœ¨ <code>fd</code> çš„éå†é¡ºåºä¸­ï¼ŒæŒ‰ç…§ç”±å¤§åˆ°å°çš„é¡ºåºæ’åˆ—ã€‚<strong>è¿™æ ·åšå¯ä»¥é¿å…åœ¨å¯»æ‰¾åˆé€‚ chunk æ—¶æŒ¨ä¸ªéå†</strong></p></li></ol></li></ul><table><thead><tr><th align="left">å‚æ•°</th><th align="left">æ„ä¹‰</th></tr></thead><tbody><tr><td align="left"><code>fd_nextsize</code></td><td align="left">æŒ‡å‘å‰ä¸€ä¸ªä¸å½“å‰ <code>chunk</code> å¤§å°ä¸åŒçš„ç¬¬ä¸€ä¸ªç©ºé—²å—ï¼Œä¸åŒ…å« <code>bin</code> çš„å¤´æŒ‡é’ˆ</td></tr><tr><td align="left"><code>bk_nextsize</code></td><td align="left">æŒ‡å‘åä¸€ä¸ªä¸å½“å‰ <code>chunk</code> å¤§å°ä¸åŒçš„ç¬¬ä¸€ä¸ªç©ºé—²å—ï¼Œä¸åŒ…å« <code>bin</code> çš„å¤´æŒ‡é’ˆ</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼š</p><p><strong>æ— è®ºä¸€ä¸ª chunk çš„å¤§å°å¦‚ä½•ï¼Œå¤„äºåˆ†é…çŠ¶æ€è¿˜æ˜¯é‡Šæ”¾çŠ¶æ€ï¼Œå®ƒä»¬éƒ½ä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„ç»“æ„</strong></p><p><em>è™½ç„¶åœ¨åˆ†é…çŠ¶æ€å’Œé‡Šæ”¾çŠ¶æ€ä¸‹ï¼Œ<code>chunk</code> éƒ½æ˜¯åŒä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä½†æ˜¯å®ƒä»¬çš„è¡¨ç°å½¢å¼æ˜¯ä¸ä¸€æ ·çš„</em></p></blockquote><ul><li><code>chunk</code> å¤„äºåˆ†é…çŠ¶æ€ï¼ˆ<code>Allocated chunk</code>ï¼‰ï¼š</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA9.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º9.png"></p><p><strong>å‰ä¸¤ä¸ªå­—æ®µç§°ä¸º <code>chunk header</code>ï¼Œåé¢çš„éƒ¨åˆ†ç§°ä¸º <code>user data</code></strong></p><p><mark>æ¯æ¬¡ <code>malloc</code> ç”³è¯·å¾—åˆ°çš„å†…å­˜æŒ‡é’ˆï¼Œå…¶å®æŒ‡å‘ <code>user data</code> çš„èµ·å§‹å¤„</mark></p><blockquote><p><code>chunk</code> ä¸­çš„ç©ºé—´å¤ç”¨ï¼š</p><p>å½“ä¸€ä¸ª <code>chunk</code> å¤„äºä½¿ç”¨çŠ¶æ€æ—¶ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ª <code>chunk</code> çš„ <code>prev_size</code> åŸŸæ— æ•ˆï¼Œæ‰€ä»¥ä¸‹ä¸€ä¸ª <code>chunk</code> çš„è¯¥éƒ¨åˆ†ä¹Ÿå¯ä»¥è¢«å½“å‰ <code>chunk</code> ä½¿ç”¨</p></blockquote><ul><li><code>chunk</code> å¤„äºé‡Šæ”¾çŠ¶æ€ï¼ˆ<code>Freed chunk</code>ï¼‰ï¼ˆå¯èƒ½æ˜¯å¾ªç¯åŒå‘é“¾è¡¨ï¼Œä¹Ÿå¯èƒ½æ˜¯å•å‘é“¾è¡¨ï¼‰ï¼š</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA8.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º8.png"></p><p>å¦‚æœä¸€ä¸ª <code>chunk</code> å¤„äº <code>free</code> çŠ¶æ€ï¼Œé‚£ä¹ˆä¼šæœ‰ä¸¤ä¸ªä½ç½®è®°å½•å…¶ç›¸åº”çš„å¤§å°ï¼š</p><ol><li>è¯¥ <code>chunk</code> æœ¬èº«çš„ <code>size</code> å­—æ®µä¼šè®°å½•</li><li>è¯¥ <code>chunk</code> åé¢çš„ä¸€ä¸ª <code>chunk</code> ä¼šè®°å½•</li></ol><blockquote><p>å †ç®¡ç†å™¨ä¼šé€šè¿‡ <code>prev_size</code> å­—æ®µä»¥åŠ <code>size</code> å­—æ®µåˆå¹¶ä¸¤ä¸ªç‰©ç†ç›¸é‚»çš„ç©ºé—² <code>chunk</code> å—</p></blockquote><hr><h4 id="top-chunk"><a href="#top-chunk" class="headerlink" title="top chunk"></a>top chunk</h4><blockquote><p>ç¨‹åºç¬¬ä¸€æ¬¡è¿›è¡Œ <code>malloc</code> çš„æ—¶å€™ï¼Œ<code>heap</code> ä¼šè¢«åˆ†ä¸ºä¸¤å—ï¼Œä¸€å—ç»™ç”¨æˆ·ï¼Œå‰©ä¸‹çš„é‚£å—å°±æ˜¯ <code>top chunk</code>ï¼Œç®€è€Œè¨€ä¹‹ï¼Œ**<code>top chunk</code> å°±æ˜¯å¤„äºå½“å‰å †çš„ç‰©ç†åœ°å€æœ€é«˜çš„ <code>chunk</code>**</p><p><code>top chunk</code> ä¸å±äºä»»ä½•ä¸€ä¸ª <code>bin</code>ï¼Œå®ƒçš„ä½œç”¨åœ¨äºï¼š</p><ol><li>å½“æ‰€æœ‰çš„ <code>bin</code> éƒ½æ— æ³•æ»¡è¶³ç”¨æˆ·è¯·æ±‚çš„å¤§å°æ—¶ï¼Œå¦‚æœ <code>top chunk</code> ä¸å°äºç”¨æˆ·è¯·æ±‚çš„å¤§å°ï¼Œå°±ä» <code>top chunk</code> ä¸­è¿›è¡Œåˆ†é…ï¼Œå¹¶å°†å‰©ä¸‹çš„éƒ¨åˆ†ä½œä¸ºæ–°çš„ <code>top chunk</code></li><li>å¦åˆ™ï¼Œå°±å¯¹ <code>heap</code> è¿›è¡Œæ‰©å±•åå†è¿›è¡Œåˆ†é…ï¼ˆåœ¨ <code>main arena</code> ä¸­é€šè¿‡ <code>sbrk</code> æ‰©å±• <code>heap</code>ï¼Œè€Œåœ¨ <code>thread arena</code> ä¸­é€šè¿‡ <code>mmap</code> åˆ†é…æ–°çš„ <code>heap</code>ï¼‰</li></ol></blockquote><ul><li>åˆå§‹æƒ…å†µä¸‹ï¼Œå¯ä»¥å°† <code>unsorted chunk</code> ä½œä¸º <code>top chunk</code></li><li><code>top chunk</code> çš„ <code>PREV_INUSE</code> ä½å§‹ç»ˆä¸º 1ï¼ˆå¦åˆ™å…¶å‰é¢çš„ <code>chunk</code> å°±ä¼šè¢«åˆå¹¶åˆ° <code>top chunk</code> ä¸­ï¼‰</li></ul><hr><h4 id="last-remainder-chunk"><a href="#last-remainder-chunk" class="headerlink" title="last remainder chunk"></a>last remainder chunk</h4><blockquote><p>åœ¨ç”¨æˆ·ä½¿ç”¨ <code>malloc</code> è¯·æ±‚åˆ†é…å†…å­˜æ—¶ï¼Œ<code>ptmalloc2</code> æ‰¾åˆ°çš„ <code>chunk</code> å¯èƒ½å¹¶ä¸å’Œç”³è¯·çš„å†…å­˜å¤§å°ä¸€è‡´ï¼Œè¿™æ—¶å€™å°±å°†åˆ†å‰²ä¹‹åçš„å‰©ä½™éƒ¨åˆ†ç§°ä¹‹ä¸º <code>last remainder chunk</code></p></blockquote><ul><li><code>unsorted bin</code> ä¹Ÿä¼šå­˜è¿™ä¸€å—</li><li><code>top chunk</code> åˆ†å‰²å‰©ä¸‹çš„éƒ¨åˆ†ä¸ä¼šä½œä¸º <code>last remainder</code></li></ul><hr><h3 id="å®è§‚ç»“æ„"><a href="#å®è§‚ç»“æ„" class="headerlink" title="å®è§‚ç»“æ„"></a>å®è§‚ç»“æ„</h3><h4 id="arena"><a href="#arena" class="headerlink" title="arena"></a>arena</h4><blockquote><p>æ— è®ºæ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯æ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œåœ¨ç¬¬ä¸€æ¬¡ç”³è¯·å†…å­˜æ—¶ï¼Œéƒ½ä¼šæœ‰ç‹¬ç«‹çš„ <code>arena</code>ï¼Œ<code>arena</code> å°±æ˜¯ç”¨æ¥ç®¡ç†çº¿ç¨‹ä¸­çš„è¿™äº›å †çš„ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºå †ç®¡ç†å™¨æ‰€æŒæœ‰çš„å†…å­˜æ± </p></blockquote><ul><li>ä¸€ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ª <code>arnea</code>ï¼Œå¹¶ä¸”è¿™äº›çº¿ç¨‹çš„ <code>arnea</code> éƒ½æ˜¯ç‹¬ç«‹çš„ä¸æ˜¯ç›¸åŒçš„</li></ul><p>ä½†ä¹Ÿä¸æ˜¯æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šæœ‰å¯¹åº”çš„ <code>arena</code>ï¼Œå¯¹äºä¸åŒç³»ç»Ÿï¼Œ<code>arena</code> æ•°é‡çš„çº¦æŸå¦‚ä¸‹ï¼š</p><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">For 32 bit systems:
     Number of arena = 2 * number of cores.
For 64 bit systems:
     Number of arena = 8 * number of cores.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å› ä¸ºæ¯ä¸ªç³»ç»Ÿçš„æ ¸æ•°æ˜¯æœ‰é™çš„ï¼Œå½“çº¿ç¨‹æ•°å¤§äºæ ¸æ•°çš„äºŒå€ï¼ˆè¶…çº¿ç¨‹æŠ€æœ¯ï¼‰æ—¶ï¼Œå°±å¿…ç„¶æœ‰çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ª <code>arena</code></p><ul><li>ä¸»çº¿ç¨‹çš„ <code>arnea</code> ç§°ä¸º <code>main_arena</code>ï¼Œå­çº¿ç¨‹çš„ <code>arnea</code> ç§°ä¸º <code>thread_arena</code></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA16.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º16.png"></p><ul><li>ä¸»çº¿ç¨‹æ— è®ºä¸€å¼€å§‹ <code>malloc</code> å¤šå°‘ç©ºé—´ï¼Œåªè¦ <code>size &lt; 128KB</code>ï¼Œ<code>kernel</code> éƒ½ä¼šåˆ†é… <code>132KB</code> å…·æœ‰è¯»å†™æƒé™çš„ <code>heap segment</code>ï¼Œè¿™éƒ¨åˆ†ç§°ä¸º <code>main_arena</code></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA17.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º17.png"></p><p>ä¾‹å¦‚è¿™å¼ å›¾ä¸­ï¼š</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA2.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º2.png"></p><p><code>heap segment</code> åœ°å€ä¸º <code>0x555555559000 ~ 0x55555557a000</code>ï¼Œå…·æœ‰ <code>rw</code> æƒé™ï¼Œæ€»å…±ï¼š<code>(0x55555557a000 - 0x555555559000)B / 1024 = 132KB</code></p><blockquote><p>æ³¨æ„ï¼š</p><p><code>main_arena</code> å¹¶ä¸åœ¨ç”³è¯·çš„ <code>heap</code> ä¸­ï¼Œè€Œæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨ <code>libc.so</code> çš„æ•°æ®æ®µä¸­</p></blockquote><p>åç»­ç”³è¯·çš„å†…å­˜ä¼šä¸€ç›´ä»è¿™ä¸ª <code>arena</code> ä¸­è·å–ï¼Œç›´åˆ°ç©ºé—´ä¸è¶³</p><p>å½“ <code>arena</code> ç©ºé—´ä¸è¶³æ—¶ï¼Œå®ƒå¯ä»¥é€šè¿‡å¢åŠ  <code>brk</code> çš„æ–¹å¼æ¥å¢åŠ å †çš„ç©ºé—´ï¼›ç±»ä¼¼åœ°ï¼Œ<code>arena</code> ä¹Ÿå¯ä»¥é€šè¿‡å‡å° <code>brk</code> æ¥ç¼©å°è‡ªå·±çš„ç©ºé—´</p><p>å³ä½¿å°†æ‰€æœ‰ <code>main_arena</code> æ‰€åˆ†é…å‡ºå»çš„å†…å­˜å— <code>free</code> å®Œï¼Œä¹Ÿä¸ä¼šç«‹å³è¿˜ç»™ <code>kernel</code>ï¼Œè€Œæ˜¯äº¤ç”± Glibc æ¥ç®¡ç†ã€‚å½“åé¢ç¨‹åºå†æ¬¡ç”³è¯·å†…å­˜æ—¶ï¼Œåœ¨ Glibc ä¸­ç®¡ç†çš„å†…å­˜å……è¶³çš„æƒ…å†µä¸‹ï¼ŒGlibc å°±ä¼šæ ¹æ®å †åˆ†é…çš„ç®—æ³•æ¥ç»™ç¨‹åºåˆ†é…ç›¸åº”çš„å†…å­˜</p><hr><h4 id="heap-info"><a href="#heap-info" class="headerlink" title="heap_info"></a>heap_info</h4><blockquote><p>ç¨‹åºåˆšå¼€å§‹æ‰§è¡Œæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹æ˜¯æ²¡æœ‰ <code>heap</code> åŒºåŸŸçš„ã€‚å½“å…¶ç”³è¯·å†…å­˜æ—¶ï¼Œå°±éœ€è¦ <code>heap_info</code> è¿™ä¸ªç»“æ„æ¥è®°å½•å¯¹åº”çš„ä¿¡æ¯</p><p>å½“è¯¥ <code>heap</code> çš„èµ„æºè¢«ä½¿ç”¨å®Œåï¼Œå°±å¿…é¡»å¾—å†æ¬¡ç”³è¯·å†…å­˜äº†ã€‚æ­¤å¤–ï¼Œä¸€èˆ¬ç”³è¯·çš„ <code>heap</code> æ˜¯ä¸è¿ç»­çš„ï¼Œå› æ­¤éœ€è¦è®°å½•ä¸åŒ <code>heap</code> ä¹‹é—´çš„é“¾æ¥ç»“æ„</p></blockquote><ul><li><p><strong><code>heap_info</code> è¿™ä¸ªæ•°æ®ç»“æ„æ˜¯ä¸“é—¨ä¸ºä» <code>Memory Mapping Segment</code> å¤„ç”³è¯·çš„å†…å­˜å‡†å¤‡çš„ï¼Œå³ä¸ºéä¸»çº¿ç¨‹å‡†å¤‡çš„</strong></p></li><li><p>ä¸»çº¿ç¨‹å¯ä»¥é€šè¿‡ <code>sbrk()</code> å‡½æ•°æ‰©å±• <code>program break location</code> è·å¾—ï¼ˆç›´åˆ°è§¦åŠ <code>Memory Mapping Segment</code>ï¼‰ï¼Œåªæœ‰ä¸€ä¸ª <code>heap</code>ï¼Œæ²¡æœ‰ <code>heap_info</code> æ•°æ®ç»“æ„</p></li></ul><p><code>heap_info</code> çš„ä¸»è¦ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">HEAP_MIN_SIZE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">32</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">HEAP_MAX_SIZE</span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">ifdef</span> <span class="token expression">DEFAULT_MMAP_THRESHOLD_MAX</span></span>
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token directive keyword">define</span> <span class="token macro-name">HEAP_MAX_SIZE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> DEFAULT_MMAP_THRESHOLD_MAX<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">else</span></span>
<span class="token macro property"><span class="token directive-hash">#</span>  <span class="token directive keyword">define</span> <span class="token macro-name">HEAP_MAX_SIZE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span> </span><span class="token comment">/* must be a power of two */</span></span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">endif</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

<span class="token comment">/* HEAP_MIN_SIZE and HEAP_MAX_SIZE limit the size of mmap()ed heaps
   that are dynamically created for multi-threaded programs.  The
   maximum size must be a power of two, for fast determination of
   which heap belongs to a chunk.  It should be much larger than the
   mmap threshold, so that requests with a size just below that
   threshold can be fulfilled without creating too many heaps.  */</span>

<span class="token comment">/***************************************************************************/</span>

<span class="token comment">/* A heap is a single contiguous memory region holding (coalesceable)
   malloc_chunks.  It is allocated with mmap() and always starts at an
   address aligned to HEAP_MAX_SIZE.  */</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token class-name">_heap_info</span>
<span class="token punctuation">{</span>
  mstate ar_ptr<span class="token punctuation">;</span> <span class="token comment">/* Arena for this heap. */</span>
  <span class="token keyword">struct</span> <span class="token class-name">_heap_info</span> <span class="token operator">*</span>prev<span class="token punctuation">;</span> <span class="token comment">/* Previous heap. */</span>
  size_t size<span class="token punctuation">;</span>   <span class="token comment">/* Current size in bytes. */</span>
  size_t mprotect_size<span class="token punctuation">;</span> <span class="token comment">/* Size in bytes that has been mprotected
                           PROT_READ|PROT_WRITE.  */</span>
  <span class="token comment">/* Make sure the following data is properly aligned, particularly
     that sizeof (heap_info) + 2 * SIZE_SZ is a multiple of
     MALLOC_ALIGNMENT. */</span>
  <span class="token keyword">char</span> pad<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">6</span> <span class="token operator">*</span> SIZE_SZ <span class="token operator">&amp;</span> MALLOC_ALIGN_MASK<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> heap_info<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯¥ç»“æ„ä¸»è¦æ˜¯æè¿°å †çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>å †å¯¹åº”çš„ <code>arena</code> çš„åœ°å€</li><li>ç”±äºä¸€ä¸ªçº¿ç¨‹ç”³è¯·ä¸€ä¸ªå †ä¹‹åï¼Œå¯èƒ½ä¼šä½¿ç”¨å®Œï¼Œä¹‹åå°±å¿…é¡»å¾—å†æ¬¡ç”³è¯·ã€‚å› æ­¤ï¼Œä¸€ä¸ªçº¿ç¨‹å¯èƒ½ä¼šæœ‰å¤šä¸ªå †ã€‚<code>prev</code> å³è®°å½•äº†ä¸Šä¸€ä¸ª <code>heap_info</code> çš„åœ°å€ã€‚è¿™é‡Œå¯ä»¥çœ‹åˆ°æ¯ä¸ªå †çš„ <code>heap_info</code> æ˜¯é€šè¿‡å•å‘é“¾è¡¨è¿›è¡Œé“¾æ¥çš„</li><li><code>size</code> è¡¨ç¤ºå½“å‰å †çš„å¤§å°</li><li><code>pad</code> ç¡®ä¿åˆ†é…çš„ç©ºé—´æ˜¯æŒ‰ç…§&nbsp;<code>MALLOC_ALIGN_MASK + 1</code>&nbsp;å¯¹é½çš„</li></ul><hr><h4 id="malloc-state"><a href="#malloc-state" class="headerlink" title="malloc_state"></a>malloc_state</h4><blockquote><p><code>malloc_state</code> ç»“æ„ç”¨äºç®¡ç†å †ï¼Œè®°å½•æ¯ä¸ª <code>arena</code> å½“å‰ç”³è¯·çš„å†…å­˜çš„å…·ä½“çŠ¶æ€ï¼Œä¾‹å¦‚ï¼šæ˜¯å¦æœ‰ç©ºé—² <code>chunk</code>ï¼Œç©ºé—² <code>chunk</code> çš„å¤§å°ç­‰ç­‰</p></blockquote><ul><li>æ— è®ºæ˜¯ <code>thread_arena</code> è¿˜æ˜¯ <code>main_arena</code>ï¼Œå®ƒä»¬éƒ½åªæœ‰ä¸€ä¸ª <code>malloc state</code> ç»“æ„</li><li>ç”±äº <code>thread</code> çš„ <code>arena</code> å¯èƒ½æœ‰å¤šä¸ªï¼Œ<code>malloc state</code> ç»“æ„ä¼šåœ¨æœ€æ–°ç”³è¯·çš„ <code>arena</code> ä¸­</li></ul><p><code>malloc_state</code> çš„ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">struct</span> <span class="token class-name">malloc_state</span> <span class="token punctuation">{</span>
    <span class="token comment">/* Serialize access.  */</span>
    <span class="token function">__libc_lock_define</span><span class="token punctuation">(</span><span class="token punctuation">,</span> mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/* Flags (formerly in max_fast).  */</span>
    <span class="token keyword">int</span> flags<span class="token punctuation">;</span>

    <span class="token comment">/* Fastbins */</span>
    mfastbinptr fastbinsY<span class="token punctuation">[</span> NFASTBINS <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">/* Base of the topmost chunk -- not otherwise kept in a bin */</span>
    mchunkptr top<span class="token punctuation">;</span>

    <span class="token comment">/* The remainder from the most recent split of a small request */</span>
    mchunkptr last_remainder<span class="token punctuation">;</span>

    <span class="token comment">/* Normal bins packed as described above */</span>
    mchunkptr bins<span class="token punctuation">[</span> NBINS <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">/* Bitmap of bins, help to speed up the process of determinating if a given bin is definitely empty.*/</span>
    <span class="token keyword">unsigned</span> <span class="token keyword">int</span> binmap<span class="token punctuation">[</span> BINMAPSIZE <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">/* Linked list, points to the next arena */</span>
    <span class="token keyword">struct</span> <span class="token class-name">malloc_state</span> <span class="token operator">*</span>next<span class="token punctuation">;</span>

    <span class="token comment">/* Linked list for free arenas.  Access to this field is serialized
       by free_list_lock in arena.c.  */</span>
    <span class="token keyword">struct</span> <span class="token class-name">malloc_state</span> <span class="token operator">*</span>next_free<span class="token punctuation">;</span>

    <span class="token comment">/* Number of threads attached to this arena.  0 if the arena is on
       the free list.  Access to this field is serialized by
       free_list_lock in arena.c.  */</span>
    INTERNAL_SIZE_T attached_threads<span class="token punctuation">;</span>

    <span class="token comment">/* Memory allocated from the system in this arena.  */</span>
    INTERNAL_SIZE_T system_mem<span class="token punctuation">;</span>
    INTERNAL_SIZE_T max_system_mem<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>libc_lock_define(, mutex)</code><br>è¯¥å˜é‡ç”¨äºæ§åˆ¶ç¨‹åºä¸²è¡Œè®¿é—®åŒä¸€ä¸ªåˆ†é…åŒºï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å–äº†åˆ†é…åŒºä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹è¦æƒ³è®¿é—®è¯¥åˆ†é…åŒºï¼Œå°±å¿…é¡»ç­‰å¾…è¯¥çº¿ç¨‹åˆ†é…å®Œæˆåæ‰èƒ½å¤Ÿä½¿ç”¨ã€‚</li><li><code>flags</code><br><code>flags</code> è®°å½•äº†åˆ†é…åŒºçš„ä¸€äº›æ ‡å¿—ï¼Œæ¯”å¦‚ <code>bit0</code> è®°å½•äº†åˆ†é…åŒºæ˜¯å¦æœ‰ <code>fast bin chunk</code>ï¼Œ<code>bit1</code> æ ‡è¯†åˆ†é…åŒºæ˜¯å¦èƒ½è¿”å›è¿ç»­çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å…·ä½“å¦‚ä¸‹ï¼š</li></ul><pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/*
   FASTCHUNKS_BIT held in max_fast indicates that there are probably
   some fastbin chunks. It is set true on entering a chunk into any
   fastbin, and cleared only in malloc_consolidate.
   The truth value is inverted so that have_fastchunks will be true
   upon startup (since statics are zero-filled), simplifying
   initialization checks.
 */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">FASTCHUNKS_BIT</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">1U</span><span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">have_fastchunks</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">&amp;</span> FASTCHUNKS_BIT<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">clear_fastchunks</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token function">catomic_or</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags<span class="token punctuation">,</span> FASTCHUNKS_BIT<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">set_fastchunks</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token function">catomic_and</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags<span class="token punctuation">,</span> <span class="token operator">~</span>FASTCHUNKS_BIT<span class="token punctuation">)</span></span></span>

<span class="token comment">/*
   NONCONTIGUOUS_BIT indicates that MORECORE does not return contiguous
   regions.  Otherwise, contiguity is exploited in merging together,
   when possible, results from consecutive MORECORE calls.
   The initial value comes from MORECORE_CONTIGUOUS, but is
   changed dynamically if mmap is ever used as an sbrk substitute.
 */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">NONCONTIGUOUS_BIT</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">2U</span><span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">contiguous</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">&amp;</span> NONCONTIGUOUS_BIT<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">noncontiguous</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">&amp;</span> NONCONTIGUOUS_BIT<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">set_noncontiguous</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">|=</span> NONCONTIGUOUS_BIT<span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">set_contiguous</span><span class="token expression"><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">&amp;=</span> <span class="token operator">~</span>NONCONTIGUOUS_BIT<span class="token punctuation">)</span></span></span>

<span class="token comment">/* ARENA_CORRUPTION_BIT is set if a memory corruption was detected on the
   arena.  Such an arena is no longer used to allocate chunks.  Chunks
   allocated in that arena before detecting corruption are not freed.  */</span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">ARENA_CORRUPTION_BIT</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">4U</span><span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">arena_is_corrupt</span><span class="token expression"><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">&amp;</span> ARENA_CORRUPTION_BIT<span class="token punctuation">)</span><span class="token punctuation">)</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">set_arena_corrupt</span><span class="token expression"><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token operator">-&gt;</span>flags <span class="token operator">|=</span> ARENA_CORRUPTION_BIT<span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>fastbinsY[NFASTBINS]</code><br>å­˜æ”¾æ¯ä¸ª <code>fast chunk</code> é“¾è¡¨å¤´éƒ¨çš„æŒ‡é’ˆ</li><li><code>top</code><br>æŒ‡å‘åˆ†é…åŒºçš„ <code>top chunk</code></li><li><code>last_reminder</code><br>æœ€æ–°çš„ <code>chunk</code> åˆ†å‰²ä¹‹åå‰©ä¸‹çš„é‚£éƒ¨åˆ†</li><li><code>bins</code><br>ç”¨äºå­˜å‚¨ <code>unstored bin</code>ï¼Œ<code>small bin</code> å’Œ <code>large bin</code> çš„ <code>chunk</code> é“¾è¡¨</li><li><code>binmap</code><br><code>ptmalloc2</code> ç”¨ 1 ä¸ª <code>bit</code> æ¥æ ‡è¯†æŸä¸€ä¸ª <code>bin</code> ä¸­æ˜¯å¦åŒ…å«ç©ºé—² <code>chunk</code></li></ul><blockquote><p>æ³¨æ„ï¼š</p><p><code>main_arena</code> çš„ <code>malloc_state</code> å¹¶ä¸æ˜¯ <code>heap segment</code> çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå­˜å‚¨åœ¨ <code>libc.so</code> çš„æ•°æ®æ®µ</p></blockquote><hr><h2 id="bin-çš„ç§ç±»"><a href="#bin-çš„ç§ç±»" class="headerlink" title="bin çš„ç§ç±»"></a>bin çš„ç§ç±»</h2><blockquote><p>Glibc ä¸ºäº†è®© <code>malloc</code> å¯ä»¥æ›´å¿«æ‰¾åˆ°åˆé€‚å¤§å°çš„ <code>chunk</code>ï¼Œç”¨æˆ· <code>free</code> é‡Šæ”¾æ‰çš„ <code>chunk</code> ä¸ä¼šé©¬ä¸Šå½’è¿˜ç»™ç³»ç»Ÿï¼Œè€Œæ˜¯å°†è¯¥ <code>chunk</code> æ ¹æ®å¤§å°åŠ å…¥åˆ°åˆé€‚çš„ <code>bin</code> ä¸­</p><p>å½“ç”¨æˆ·å†ä¸€æ¬¡é€šè¿‡ <code>malloc</code> è¯·æ±‚åˆ†é…å†…å­˜æ—¶ï¼Œ<code>ptmalloc2</code> ä¼šè¯•å›¾åœ¨ç©ºé—²çš„ <code>chunk</code> ä¸­æŒ‘é€‰ä¸€å—åˆé€‚çš„ç©ºé—´ç»™ç”¨æˆ·ï¼Œè¿™æ ·å¯ä»¥é¿å…é¢‘ç¹çš„ç³»ç»Ÿè°ƒç”¨ï¼Œé™ä½å†…å­˜åˆ†é…çš„å¼€é”€</p><p><mark><code>bin</code> çš„ä¸­æ–‡æ„æ€ä¸ºåƒåœ¾æ¡¶ï¼Œå°±åƒè¦åˆ é™¤çš„æ–‡ä»¶ä¼šå…ˆæ”¾å…¥ Windows çš„å›æ”¶ç«™ä¸€æ ·ä¸ä¼šç«‹å³åˆ é™¤ï¼Œå¾ˆç”ŸåŠ¨å½¢è±¡äº†</mark></p></blockquote><p><code>ptmalloc2</code> ä¼šæ ¹æ®ç©ºé—²çš„ <code>chunk</code> çš„å¤§å°ä»¥åŠä½¿ç”¨çŠ¶æ€ï¼Œå°† <code>chunk</code> åˆæ­¥æ”¾å…¥ç›¸åº”çš„ <code>bin</code> ä¸­ï¼Œ<code>bin</code> çš„ç§ç±»ä¸»è¦åˆ†ä¸ºï¼š</p><ul><li><code>fast bin</code></li><li><code>small bin</code></li><li><code>large bin</code></li><li><code>unsorted bin</code></li><li><code>tcache</code></li></ul><p>Glibc æä¾›äº†ä¸¤ä¸ªæ•°ç»„ï¼š<code>fastbinsY[]</code> å’Œ <code>bins[]</code> ç”¨æ¥å­˜æ”¾è¿™äº› <code>bin</code></p><p>å…·ä½“æ¥è¯´ï¼Œå¯åˆ†ä¸ºï¼š</p><ul><li>10 ä¸ª <code>fast bin</code>ï¼Œå­˜å‚¨åœ¨ <code>fastbinsY[]</code> ä¸­</li><li>1 ä¸ª <code>unsorted bin</code>ï¼Œå­˜å‚¨åœ¨ <code>bins[1]</code> ä¸­</li><li>62 ä¸ª <code>small bin</code>ï¼Œå­˜å‚¨åœ¨ <code>bins[2]</code> è‡³ <code>bins[63]</code> ä¸­</li><li>63 ä¸ª <code>large bin</code>ï¼Œå­˜å‚¨åœ¨ <code>bins[64]</code> è‡³ <code>bins[126]</code> ä¸­</li></ul><p>å…¶ä¸­è™½ç„¶å®šä¹‰äº† <code>bins[128]</code>ï¼Œä½†æ˜¯ <code>bins[0]</code> å’Œ <code>bins[127]</code> å…¶å®æ˜¯ä¸å­˜åœ¨çš„</p><p><code>chunk</code> åœ¨ <code>bin</code> ä¸Šä»¥é“¾è¡¨çš„å½¢å¼å­˜æ”¾ï¼šï¼ˆ<code>fast bin</code> æ˜¯<strong>å•é“¾è¡¨</strong>ï¼Œå…¶ä»–çš„ <code>bin</code> éƒ½æ˜¯<strong>åŒé“¾è¡¨</strong>ï¼‰</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA10.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º10.png"></p><hr><h3 id="fast-bin"><a href="#fast-bin" class="headerlink" title="fast bin"></a>fast bin</h3><blockquote><p><code>fast bin</code> éå¸¸åƒé«˜é€Ÿç¼“å­˜ cacheï¼Œä¸ºäº†å‡å°‘ä¸€äº›è¾ƒå°çš„ <code>chunk</code> åœ¨åˆå¹¶ã€åˆ†å‰²ä»¥åŠä¸­é—´æ£€æŸ¥çš„è¿‡ç¨‹ä¸­çš„å¼€é”€ï¼Œ<code>ptmalloc2</code> ä¸­ä¸“é—¨è®¾è®¡äº† <code>fast bin</code>ï¼Œå¯¹åº”çš„å˜é‡å°±æ˜¯ <code>malloc state</code> ä¸­çš„ <code>fastbinsY[]</code> æ•°ç»„ï¼Œç”¨äºæé«˜å°å†…å­˜åˆ†é…æ•ˆç‡</p></blockquote><ul><li><code>fast bin</code> å­˜å‚¨åœ¨ <code>fastbinsY[]</code> å¤„ï¼Œæ˜¯ 10 ä¸ª<strong>å•é“¾è¡¨</strong>ï¼ˆæœ€å 3 ä¸ªé“¾è¡¨ä¿ç•™æœªä½¿ç”¨ï¼‰</li><li><code>fast bin</code> çš„ <code>chunk</code> å¤§å°ï¼ˆå« <code>chunk</code> å¤´éƒ¨ï¼‰ä¸ºï¼š<code>16 ~ 64</code> å­—èŠ‚ï¼ˆ64 ä½ä¸º <code>32 ~ 128</code> å­—èŠ‚ï¼‰</li><li>ç›¸é‚» <code>bin</code> å­˜æ”¾çš„å¤§å°ç›¸å·® 8 å­—èŠ‚ï¼ˆ64 ä½ä¸º 16 å­—èŠ‚ï¼‰</li><li><strong>é‡‡å– <code>LIFO</code> ç­–ç•¥</strong>ï¼ˆæœ€è¿‘é‡Šæ”¾çš„ <code>chunk</code> ä¼šæ›´æ—©åœ°è¢«åˆ†é…ï¼‰</li><li><code>chunk</code> çš„ <code>PREV_INUSE</code> ä½ï¼ˆä¸‹ä¸€ä¸ªç‰©ç†ç›¸é‚»çš„ <code>chunk</code> çš„ <code>P</code> ä½ï¼‰æ€»ä¸º 1ï¼Œé‡Šæ”¾åˆ° <code>fastbin</code> çš„ <code>chunk</code> ä¸ä¼šè¢«æ¸…é™¤ <code>PREV_INUSE</code> æ ‡å¿—ä½</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA11.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º11.png"></p><p>å¦‚æœé‡åˆ°ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼Œ<code>ptmalloc2</code> ä¼šé¦–å…ˆåˆ¤æ–­ <code>fast bin</code> ä¸­ç›¸åº”çš„ <code>bin</code> ä¸­æ˜¯å¦æœ‰å¯¹åº”å¤§å°çš„ç©ºé—²å—ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±ä¼šç›´æ¥ä»è¿™ä¸ª <code>bin</code> ä¸­è·å– <code>chunk</code>ï¼›å¦‚æœæ²¡æœ‰çš„è¯ï¼Œ<code>ptmalloc2</code> æ‰ä¼šåšæ¥ä¸‹æ¥çš„ä¸€ç³»åˆ—æ“ä½œï¼š</p><ul><li>åœ¨ 32 ä½ç³»ç»Ÿä¸­ï¼ˆ<code>SIZE_SZ = 4</code>ï¼‰ï¼Œç”¨æˆ·éœ€è¦çš„ <code>chunk</code> å¤§å° &lt; 64 å­—èŠ‚</li><li>åœ¨ 64 ä½ç³»ç»Ÿä¸­ï¼ˆ<code>SIZE_SZ = 8</code>ï¼‰ï¼Œç”¨æˆ·éœ€è¦çš„ <code>chunk</code> å¤§å° &lt; 128 å­—èŠ‚</li></ul><p>å…³äº <code>fast bin</code> çš„å¤§å°å®šä¹‰å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifndef</span> <span class="token expression">DEFAULT_MXFAST </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DEFAULT_MXFAST</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">64</span> <span class="token operator">*</span> SIZE_SZ <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span> </span>

<span class="token comment">/* The maximum fastbin request size we support */</span> 
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAX_FAST_SIZE</span> <span class="token expression"><span class="token punctuation">(</span><span class="token number">80</span> <span class="token operator">*</span> SIZE_SZ <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ 32 ä½ç³»ç»Ÿä¸­ï¼Œ<code>fast bin</code> <strong>é»˜è®¤æ”¯æŒ</strong>æœ€å¤§çš„ <code>chunk</code> çš„æ•°æ®ç©ºé—´å¤§å°ä¸º 64 å­—èŠ‚ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">DEFAULT_MXFAST <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">64</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">64</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä½†æ˜¯å…¶<strong>å¯ä»¥æ”¯æŒ</strong>çš„ <code>chunk</code> çš„æ•°æ®ç©ºé—´æœ€å¤§ä¸º 80 å­—èŠ‚ï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">MAX_FAST_SIZE <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">80</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">80</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong><code>fast bin</code> æœ€å¤šå¯ä»¥æ”¯æŒçš„ <code>bin</code> çš„ä¸ªæ•°ä¸º 10 ä¸ª</strong>ï¼Œåœ¨ 32 ä½ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·æ•°æ®ç©ºé—´ä»ç¬¬ 8 å­—èŠ‚å¼€å§‹ä¸€ç›´åˆ°ç¬¬ 80 å­—èŠ‚ï¼ˆä¸åŒ…æ‹¬ <code>prev_size</code> å’Œ <code>size</code> å­—æ®µçš„ 8 å­—èŠ‚ï¼‰</p><blockquote><p>æ³¨æ„ï¼š</p><p><strong>fast bin ä¸­çš„ <code>chunk</code> çš„ <code>PREV_INUSE</code> ä½ï¼ˆä¸‹ä¸€ä¸ªç‰©ç†ç›¸é‚»çš„ chunk çš„ P ä½ï¼‰å§‹ç»ˆè¢«ç½®ä¸º 1</strong>ï¼Œå› æ­¤å®ƒä»¬ä¸ä¼šå’Œå…¶å®ƒè¢«é‡Šæ”¾çš„ <code>chunk</code> åˆå¹¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå‰é¢è¯´ fast bin æ˜¯ä¸ªç‰¹ä¾‹ï¼Œä¸ä¼šè½»æ˜“åˆå¹¶</p><p>ä½†æ˜¯ï¼Œå½“é‡Šæ”¾çš„ <code>chunk</code> ä¸è¯¥ <code>chunk</code> ç›¸é‚»çš„ç©ºé—² <code>chunk</code> åˆå¹¶åçš„å¤§å° &gt; <code>FASTBIN_CONSOLIDATION_THRESHOLD</code> æ—¶ï¼Œè¯´æ˜å†…å­˜ç¢ç‰‡è¾ƒå¤šï¼Œæ­¤æ—¶å°±éœ€è¦æŠŠ <code>fast bin</code> ä¸­çš„ <code>chunk</code> éƒ½è¿›è¡Œåˆå¹¶ï¼Œä»¥å‡å°‘å†…å­˜ç¢ç‰‡å¯¹ç³»ç»Ÿçš„å½±å“</p></blockquote><hr><h3 id="unsorted-bin"><a href="#unsorted-bin" class="headerlink" title="unsorted bin"></a>unsorted bin</h3><blockquote><p><code>unsorted bin</code> éå¸¸åƒç¼“å†²åŒº bufferï¼Œå¯ä»¥è§†ä¸ºç©ºé—² <code>chunk</code> å›å½’å…¶æ‰€å± <code>bin</code> ä¹‹å‰çš„ç¼“å†²åŒº</p><p>å¤§å°è¶…è¿‡ <code>fast bin</code> é˜ˆå€¼çš„ <code>chunk</code> è¢«é‡Šæ”¾æ—¶ä¼šåŠ å…¥åˆ°è¿™é‡Œï¼Œè¿™ä½¿å¾— <code>ptmalloc2</code> å¯ä»¥å¤ç”¨æœ€è¿‘é‡Šæ”¾çš„chunkï¼Œä»è€Œæå‡æ•ˆç‡</p></blockquote><ul><li><code>unsorted bin</code> å¤„äº <code>bins[1]</code> å¤„ï¼Œå› æ­¤ <code>unsorted bin</code> åªæœ‰ 1 ä¸ª<strong>åŒå‘å¾ªç¯é“¾è¡¨</strong></li><li><code>unsorted bin</code> ä¸­çš„ç©ºé—² <code>chunk</code> å¤„äº<strong>ä¹±åºçŠ¶æ€</strong></li><li>**<code>unsorted bin</code> åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨çš„éå†é¡ºåºæ˜¯ <code>FIFO</code>**ï¼ˆæ’å…¥çš„æ—¶å€™æ’å…¥åˆ° unsorted bin çš„å¤´éƒ¨ï¼Œå–å‡ºçš„æ—¶å€™ä»é“¾è¡¨å°¾è·å–ï¼‰</li><li>åœ¨ <code>malloc</code> åˆ†é…æ—¶ï¼Œå¦‚æœåœ¨ <code>fast bin</code>ã€<code>small bin</code> ä¸­æ‰¾ä¸åˆ°å¯¹åº”å¤§å°çš„ <code>chunk</code>ï¼Œå°±ä¼šå°è¯•ä» <code>unsorted bin</code> ä¸­å¯»æ‰¾ <code>chunk</code>ã€‚å¦‚æœå–å‡ºæ¥çš„ <code>chunk</code> å¤§å°åˆšå¥½æ»¡è¶³ï¼Œå°±ä¼šç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼›å¦‚æœåœ¨ <code>unsorted bin</code> ä¸­æ²¡æœ‰åˆé€‚çš„ <code>chunk</code>ï¼Œå°±ä¼šæŠŠ <code>unsorted bin</code> ä¸­çš„æ‰€æœ‰ <code>chunk</code> åˆ†åˆ«åŠ å…¥åˆ°æ‰€å±çš„ <code>bin</code> ä¸­ï¼Œç„¶åå†åœ¨ <code>bin</code> ä¸­åˆ†é…åˆé€‚çš„ <code>chunk</code></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA14.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º14.png"></p><blockquote><p>å½“ <code>free</code> çš„ <code>chunk</code> å¤§å° &gt;= 144 å­—èŠ‚æ—¶ï¼Œä¸ºäº†æ•ˆç‡ï¼ŒGlibc å¹¶ä¸ä¼šé©¬ä¸Šå°† <code>chunk</code> æ”¾åˆ°ç›¸å¯¹åº”çš„ <code>bin</code> ä¸­ï¼Œè€Œä¼šå…ˆæ”¾åˆ° <code>unsorted bin</code></p><p>ä¸‹æ¬¡ <code>malloc</code> æ—¶ä¼šå…ˆæŸ¥æ‰¾ <code>unsorted bin</code> ä¸­æ˜¯å¦æœ‰åˆé€‚çš„ <code>chunk</code>ï¼Œæ‰¾ä¸åˆ°æ‰ä¼šå»å¯¹åº”çš„ <code>bin</code> ä¸­å¯»æ‰¾ï¼Œæ­¤æ—¶ä¼šé¡ºä¾¿æŠŠ <code>unsorted bin</code> çš„ <code>chunk</code> æ”¾åˆ°å¯¹åº”çš„ <code>bin</code> ä¸­ï¼Œä½† <code>small bin</code> é™¤å¤–ï¼Œä¸ºäº†æ•ˆç‡ï¼Œåâ½½å…ˆä» <code>small bin</code> æ‰¾</p></blockquote><hr><h3 id="small-bin"><a href="#small-bin" class="headerlink" title="small bin"></a>small bin</h3><blockquote><p><code>chunk size</code> å°äº <code>0x200</code> å­—èŠ‚ï¼ˆ64 ä½ä¸º <code>0x400</code> å­—èŠ‚ï¼‰çš„ <code>chunk</code> å«åš <code>small chunk</code>ï¼Œè€Œ <code>small bin</code> å­˜æ”¾çš„å°±æ˜¯è¿™äº› <code>small chunk</code></p></blockquote><ul><li><code>small bin</code> å­˜å‚¨åœ¨ <code>bins[2]</code> è‡³ <code>bins[63]</code> å¤„ï¼Œæ˜¯ 62 ä¸ª<strong>åŒå‘å¾ªç¯é“¾è¡¨</strong>ï¼ˆæ¯ä¸ªé“¾è¡¨éƒ½æœ‰é“¾è¡¨å¤´ç»“ç‚¹ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿å¯¹äºé“¾è¡¨å†…éƒ¨ç»“ç‚¹çš„ç®¡ç†ï¼‰</li><li><code>fast bin</code> çš„ <code>chunk</code> å¤§å°ï¼ˆå« <code>chunk</code> å¤´éƒ¨ï¼‰ä¸ºï¼š<code>16 ~ 496</code> å­—èŠ‚ï¼ˆ64 ä½ä¸º <code>32 ~ 1008</code> å­—èŠ‚ï¼‰</li><li>ç›¸é‚» <code>bin</code> å­˜æ”¾çš„å¤§å°ç›¸å·® 8 å­—èŠ‚ï¼ˆ64 ä½ä¸º 16 å­—èŠ‚ï¼‰</li><li><em>æ¯ä¸ªé“¾è¡¨ä¸­å­˜å‚¨çš„ <code>chunk</code> å¤§å°éƒ½ä¸€è‡´</em></li><li><strong>é‡‡å– <code>FIFO</code> ç­–ç•¥</strong>ï¼ˆæœ€è¿‘é‡Šæ”¾çš„ <code>chunk</code> ä¼šè¢«æœ€ååˆ†é…ï¼‰ï¼Œè¿™ç‚¹å’Œ <code>fast bin</code> ç›¸å</li><li>åŒæ ·ä¸ <code>fast bin</code> ç›¸åçš„æ˜¯ï¼š<em>ç›¸é‚»çš„ç©ºé—² <code>chunk</code> ä¼šè¢«åˆå¹¶</em></li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA12.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º12.png"></p><p><code>small bin</code> ä¸­æ¯ä¸ª <code>chunk</code> çš„å¤§å°ä¸å…¶æ‰€åœ¨çš„ <code>bin</code> çš„ <code>index</code> çš„å…³ç³»ä¸ºï¼š</p><pre class="line-numbers language-c" data-language="c"><code class="language-c">chunk_size <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> SIZE_SZ <span class="token operator">*</span> index<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>small bin</code> çš„å¤§å°å†åˆ†æˆ 62 ä¸ª <code>bin</code>ï¼Œå¤§å°ä» 16 å­—èŠ‚ï¼ˆ64 ä½ä¸º 32 å­—èŠ‚ï¼‰å¼€å§‹ï¼Œæ¯æ¬¡å›ºå®šå¢åŠ  8 å­—èŠ‚ï¼ˆ64 ä½ä¸º 16 å­—èŠ‚ï¼‰ï¼š</p><table><thead><tr><th>ä¸‹æ ‡ index</th><th>SIZE_SZ=4ï¼ˆ32 ä½ï¼‰</th><th>SIZE_SZ=8ï¼ˆ64 ä½ï¼‰</th></tr></thead><tbody><tr><td>2</td><td>16</td><td>32</td></tr><tr><td>3</td><td>24</td><td>48</td></tr><tr><td>4</td><td>32</td><td>64</td></tr><tr><td>5</td><td>40</td><td>80</td></tr><tr><td><code>x</code></td><td><code>2 * 4 * x</code></td><td><code>2 * 8 * x</code></td></tr><tr><td>63</td><td>504</td><td>1008</td></tr></tbody></table><blockquote><p>æ³¨æ„ï¼š</p><p><code>fast bin</code> ä¸­çš„ <code>chunk</code> æ˜¯æœ‰å¯èƒ½è¢«æ”¾åˆ° <code>small bin</code> ä¸­å»çš„</p></blockquote><hr><h3 id="large-bin"><a href="#large-bin" class="headerlink" title="large bin"></a>large bin</h3><blockquote><p><code>large bin</code> å­˜æ”¾çš„æ˜¯å¤§äºç­‰äº <code>0x200</code> å­—èŠ‚ï¼ˆ64 ä½ä¸º <code>0x400</code> å­—èŠ‚ï¼‰çš„ <code>chunk</code></p></blockquote><ul><li><code>large bin</code> å­˜å‚¨åœ¨ <code>bins[64]</code> è‡³ <code>bins[126]</code> å¤„ï¼Œæ˜¯ 63 ä¸ª<strong>åŒå‘å¾ªç¯é“¾è¡¨</strong></li><li><em>æ¯ä¸ª bin ä¸­çš„ chunk çš„å¤§å°ä¸ä¸€è‡´ï¼ˆæŒ‰å¤§å°é™åºæ’åˆ—ï¼‰</em></li><li><strong>é‡‡å– <code>FIFO</code> ç­–ç•¥</strong></li><li>æ’å…¥å’Œåˆ é™¤å¯ä»¥å‘ç”Ÿåœ¨ä»»æ„ä½ç½®</li><li>ç›¸é‚»ç©ºé—² <code>chunk</code> ä¼šè¢«åˆå¹¶</li></ul><p><code>large bin</code> çš„ <code>freed chunk</code> ä¼šå¤šä¸¤ä¸ªæŒ‡é’ˆ <code>fd_nextsize</code>ã€<code>bk_nextsize</code>ï¼Œåˆ†åˆ«æŒ‡å‘å‰ä¸€å—å’Œåä¸€å— <code>large chunk</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/CTF%20-%20PWN_%E5%A0%86%E4%B8%8E%E5%A0%86%E6%BA%A2%E5%87%BA13.png" alt="CTF - PWN_å †ä¸å †æº¢å‡º13.png"></p><p><code>large bin</code> çš„å¤§å°å†åˆ†æˆ 63 ä¸ª <code>bin</code>ï¼Œä½†å¤§å°ä¸å†æ˜¯å›ºå®šå¤§å°å¢åŠ ï¼Œè€Œæ˜¯æŒ‰ç…§å…¬å·®åˆ†ä¸º 6 ç»„ï¼š</p><table><thead><tr><th>ç»„</th><th>bin çš„æ•°é‡</th><th>å…¬å·®</th></tr></thead><tbody><tr><td>1</td><td>32</td><td>0x40</td></tr><tr><td>2</td><td>16</td><td>0x200</td></tr><tr><td>3</td><td>8</td><td>0x1000</td></tr><tr><td>4</td><td>4</td><td>0x8000</td></tr><tr><td>5</td><td>2</td><td>0x40000</td></tr><tr><td>6</td><td>1</td><td>ä¸é™åˆ¶ï¼Œå¤§å°å’Œ large bin å‰©ä½™çš„å¤§å°ç›¸åŒ</td></tr></tbody></table><hr><h3 id="tcache"><a href="#tcache" class="headerlink" title="tcache"></a>tcache</h3><blockquote><p><code>tcache</code> æ˜¯ libc2.26ï¼ˆUbuntu 17.10ï¼‰ä¹‹åå¼•è¿›çš„ä¸€ç§æ–°æœºåˆ¶ï¼Œç±»ä¼¼äº <code>fast bin</code> ä¸€æ ·çš„ä¸œè¥¿ï¼Œç›®çš„æ˜¯æå‡å †ç®¡ç†çš„æ€§èƒ½ï¼Œä½†æå‡æ€§èƒ½çš„åŒæ—¶èˆå¼ƒäº†å¾ˆå¤šå®‰å…¨æ£€æŸ¥ï¼Œä¹Ÿå› æ­¤æœ‰äº†å¾ˆå¤šæ–°çš„åˆ©ç”¨æ–¹å¼</p></blockquote><ul><li>æ¯æ¡é“¾ä¸Šæœ€å¤šå¯ä»¥æœ‰ 7 ä¸ª <code>chunk</code></li><li><code>malloc</code> çš„æ—¶å€™ä¼˜å…ˆå» <code>tcache</code> æ‰¾</li><li><code>free</code> çš„æ—¶å€™å½“ <code>tcache</code> æ»¡äº†æ‰æ”¾å…¥ <code>fastbin</code> æˆ– <code>unsorted bin</code></li></ul><p>åŸºæœ¬å·¥ä½œæ–¹å¼ï¼š</p><ul><li><p><code>malloc</code> æ—¶ï¼Œä¼šå…ˆ <code>malloc</code> ä¸€å—å†…å­˜ç”¨æ¥å­˜æ”¾ <code>tcache_perthread_struct</code></p></li><li><p><code>free</code> å†…å­˜ï¼Œä¸” <code>size</code> å°äº <code>small bin size</code> æ—¶</p><ol><li>å…ˆæ”¾åˆ°å¯¹åº”çš„ <code>tcache</code> ä¸­ï¼Œç›´åˆ° <code>tcache</code> è¢«å¡«æ»¡ï¼ˆé»˜è®¤æ˜¯ 7 ä¸ªï¼‰</li><li><code>tcache</code> è¢«å¡«æ»¡ä¹‹åï¼Œå†æ¬¡ <code>free</code> çš„å†…å­˜å’Œä¹‹å‰ä¸€æ ·è¢«æ”¾åˆ° <code>fast bin</code> æˆ–è€… <code>unsorted bin</code> ä¸­</li><li><code>tcache</code> ä¸­çš„ <code>chunk</code> ä¸ä¼šåˆå¹¶ï¼ˆä¸å–æ¶ˆ <code>PREV_INUSE</code> ä½ï¼‰</li></ol></li><li><p><code>malloc</code> å†…å­˜ï¼Œä¸” <code>size</code> åœ¨ <code>tcache</code> èŒƒå›´å†…</p><ol><li>å…ˆä» <code>tcache</code> å– <code>chunk</code>ï¼Œç›´åˆ° <code>tcache</code> ä¸ºç©º</li><li><code>tcache</code> ä¸ºç©ºåï¼Œä» <code>bin</code> ä¸­æ‰¾</li><li><code>tcache</code> ä¸ºç©ºæ—¶ï¼Œå¦‚æœ <code>fast bin</code>ã€<code>small bin</code>ã€<code>unsorted bin</code> ä¸­æœ‰ <code>size</code> ç¬¦åˆçš„ <code>chunk</code>ï¼Œä¼šå…ˆæŠŠ <code>fast bin</code>ã€<code>small bin</code>ã€<code>unsorted bin</code> ä¸­çš„ <code>chunk</code> æ”¾åˆ° <code>tcache</code> ä¸­ï¼Œç›´åˆ°å¡«æ»¡ï¼›ä¹‹åå†ä» <code>tcache</code> ä¸­å–ï¼›å› æ­¤ <code>chunk</code> åœ¨ <code>bin</code> ä¸­å’Œ <code>tcache</code> ä¸­çš„é¡ºåºä¼šåè¿‡æ¥</li></ol></li></ul><hr></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>å †åŸºç¡€</h></span></div><div class="post-copyright__type"><span class="post-copyright-info">æœ¬æ–‡é“¾æ¥ï¼š<a href="https://www.uf4te.cn/posts/463ab4ed.html">https://www.uf4te.cn/posts/463ab4ed.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="padding-left:6px;display:inline-block;width:120px"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>uf4te</h></div></div><div class="post-copyright-c" style="padding-left:6px;display:inline-block;width:120px"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2024-05-15</h></div></div><div class="post-copyright-u" style="padding-left:6px;display:inline-block;width:120px"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2024-06-05</h></div></div><div class="post-copyright-c" style="padding-left:6px;display:inline-block;width:120px"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CTF/">CTF</a><a class="post-meta__tags" href="/tags/Pwn/">Pwn</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/cover-123.jpg" data-sites="facebook, twitter, wechat, weibo, qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> å¥–åŠ±ä¸€ä¸‹ç«™é•¿</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/rewards/wechat.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/rewards/wechat.png" alt="å¾®ä¿¡æ”¯ä»˜"></a><div class="post-qr-code-desc">å¾®ä¿¡æ”¯ä»˜</div></li><li class="reward-item"><a href="/img/rewards/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/rewards/alipay.jpg" alt="æ”¯ä»˜å®"></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/35b1366d.html" title="ã€wustctf 2020ã€‘name_your_cat"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-122.jpg" onerror='onerror=null,src="/img/404/pic_404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">ã€wustctf 2020ã€‘name_your_cat</div></div></a></div><div class="next-post pull-right"><a href="/posts/1cb138a7.html" title="ã€BUUCTFã€‘hitcontraining_uaf"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-124.jpg" onerror='onerror=null,src="/img/404/pic_404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">ã€BUUCTFã€‘hitcontraining_uaf</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/c695aa69.html" title="Bypasså®‰å…¨æœºåˆ¶"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-117.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-10-15</div><div class="title">Bypasså®‰å…¨æœºåˆ¶</div></div></a></div><div><a href="/posts/cfa3ef5.html" title="Linuxä¸‹çš„ä¿æŠ¤æœºåˆ¶"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-65.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-06-05</div><div class="title">Linuxä¸‹çš„ä¿æŠ¤æœºåˆ¶</div></div></a></div><div><a href="/posts/29133b28.html" title="PLTè¡¨å’ŒGOTè¡¨"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-64.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-06-05</div><div class="title">PLTè¡¨å’ŒGOTè¡¨</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="author_top is-center"><div class="card-info-avatar"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg" onerror='this.onerror=null,this.src="/img/404/loading_404.gif"' alt="avatar"></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="palm_tree" fallback-src="https://lskypro.acozycotage.net/LightPicture/2022/12/fe1dc0402e623096.jpg">ğŸ˜’</g-emoji><span>ç–²æƒ«å¿ƒç´¯</span></div></div></div><div class="author-info__name">uf4te</div><div class="author-info__description">å¤©é“é…¬å‹¤</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/uf4te/uf4te.github.io"><i class="fab fa-github"></i><span>ç»™æˆ‘çš„ç½‘ç«™ä¸€ä¸ªstar ğŸ¤—</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:916884674@qq.com" target="_blank" title="mail æˆ‘çš„é‚®ç®±"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/img/me/QRCode_QQ.png" target="_blank" title="åŠ æˆ‘ QQ"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="/img/me/QRCode_WeChat.png" target="_blank" title="åŠ æˆ‘å¾®ä¿¡"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS è®¢é˜…"><i class="fa-solid fa-square-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fa-solid fa-gift fa-shake"></i><span>æ¬¢è¿æ¥åˆ°æˆ‘çš„å°ç«™</span></div><div class="announcement_content">æˆ‘æ˜¯ä¸€ä¸ªå–œæ¬¢å­¦ä¹  PWN å’Œé€†å‘çš„äºŒè¿›åˆ¶ CTFerï¼ŒåŠ æ²¹ï¼Œäº’å‹‰ï¼</div><div style="margin-bottom:8px"></div><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>æœ€æ–°å…¬å‘Š</span></div><div class="newest_announcement_content">åº”å¤‡æ¡ˆæ–¹è¦æ±‚ï¼Œæœ¬ç«™å·²å…³é—­è¯„è®ºã€ä¼‘é—²ç­‰äº¤äº’åŠŸèƒ½</div><div style="margin-bottom:8px"></div><div class="item-headline"><i class="fa-solid fa-hourglass-half fa-shake"></i><span>è®¡æ—¶å°åŠ©æ‰‹</span></div><div id="timing"></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A0%86"><span class="toc-text">å †</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="toc-text">å †çš„åŸºæœ¬æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#malloc"><span class="toc-text">malloc</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#calloc"><span class="toc-text">calloc</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#realloc"><span class="toc-text">realloc</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#free"><span class="toc-text">free</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D%E8%83%8C%E5%90%8E%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8"><span class="toc-text">å†…å­˜åˆ†é…èƒŒåçš„ç³»ç»Ÿè°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#brk"><span class="toc-text">brk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mmap"><span class="toc-text">mmap</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A0%86%E7%9A%84%E7%BB%93%E6%9E%84"><span class="toc-text">å †çš„ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AE%E8%A7%82%E7%BB%93%E6%9E%84"><span class="toc-text">å¾®è§‚ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#malloc-chunk"><span class="toc-text">malloc_chunk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#top-chunk"><span class="toc-text">top chunk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#last-remainder-chunk"><span class="toc-text">last remainder chunk</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E8%A7%82%E7%BB%93%E6%9E%84"><span class="toc-text">å®è§‚ç»“æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#arena"><span class="toc-text">arena</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#heap-info"><span class="toc-text">heap_info</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#malloc-state"><span class="toc-text">malloc_state</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bin-%E7%9A%84%E7%A7%8D%E7%B1%BB"><span class="toc-text">bin çš„ç§ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#fast-bin"><span class="toc-text">fast bin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#unsorted-bin"><span class="toc-text">unsorted bin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#small-bin"><span class="toc-text">small bin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#large-bin"><span class="toc-text">large bin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcache"><span class="toc-text">tcache</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/f5dbafd0.html" title="AFL++ç¯å¢ƒæ­å»ºä¸æ¨¡ç³Šæµ‹è¯•"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-135.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="AFL++ç¯å¢ƒæ­å»ºä¸æ¨¡ç³Šæµ‹è¯•"></a><div class="content"><a class="title" href="/posts/f5dbafd0.html" title="AFL++ç¯å¢ƒæ­å»ºä¸æ¨¡ç³Šæµ‹è¯•">AFL++ç¯å¢ƒæ­å»ºä¸æ¨¡ç³Šæµ‹è¯•</a><time datetime="2024-10-14T15:06:13.000Z" title="å‘è¡¨äº 2024-10-14 23:06:13">2024-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/194d06e.html" title="Uç›˜é‡è£…ç³»ç»Ÿä»¥åŠUbuntuä¸WindowsåŒç³»ç»Ÿ"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-134.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="Uç›˜é‡è£…ç³»ç»Ÿä»¥åŠUbuntuä¸WindowsåŒç³»ç»Ÿ"></a><div class="content"><a class="title" href="/posts/194d06e.html" title="Uç›˜é‡è£…ç³»ç»Ÿä»¥åŠUbuntuä¸WindowsåŒç³»ç»Ÿ">Uç›˜é‡è£…ç³»ç»Ÿä»¥åŠUbuntuä¸WindowsåŒç³»ç»Ÿ</a><time datetime="2024-09-28T04:30:04.000Z" title="å‘è¡¨äº 2024-09-28 12:30:04">2024-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb411a4c.html" title="å¤šæ¶æ„ä¸äº¤å‰ç¼–è¯‘"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-133.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="å¤šæ¶æ„ä¸äº¤å‰ç¼–è¯‘"></a><div class="content"><a class="title" href="/posts/bb411a4c.html" title="å¤šæ¶æ„ä¸äº¤å‰ç¼–è¯‘">å¤šæ¶æ„ä¸äº¤å‰ç¼–è¯‘</a><time datetime="2024-06-16T14:48:33.000Z" title="å‘è¡¨äº 2024-06-16 22:48:33">2024-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f0cbf9ee.html" title="IOTå›ºä»¶ä»¿çœŸä¸gdbserverè¿œç¨‹è°ƒè¯•"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-132.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="IOTå›ºä»¶ä»¿çœŸä¸gdbserverè¿œç¨‹è°ƒè¯•"></a><div class="content"><a class="title" href="/posts/f0cbf9ee.html" title="IOTå›ºä»¶ä»¿çœŸä¸gdbserverè¿œç¨‹è°ƒè¯•">IOTå›ºä»¶ä»¿çœŸä¸gdbserverè¿œç¨‹è°ƒè¯•</a><time datetime="2024-06-16T14:16:49.000Z" title="å‘è¡¨äº 2024-06-16 22:16:49">2024-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c2233a9.html" title="CNVD-2013-11625å¤ç°"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-131.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="CNVD-2013-11625å¤ç°"></a><div class="content"><a class="title" href="/posts/c2233a9.html" title="CNVD-2013-11625å¤ç°">CNVD-2013-11625å¤ç°</a><time datetime="2024-06-12T13:03:01.000Z" title="å‘è¡¨äº 2024-06-12 21:03:01">2024-06-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">Â©2023 - 2024 By uf4te</div><div class="framework-info"><span>æ¡†æ¶</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="running-time"></div><div class="icp"><a target="_blank" rel="noopener" href="https://beian.mps.gov.cn/#/query/webSearch?code=42011702000764"><img class="icp-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/footer/gongan.png"><span>é„‚å…¬ç½‘å®‰å¤‡42011702000764</span></a> <span>|</span> <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><img class="icp-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/footer/icp.ico"><span>é„‚ICPå¤‡2023029632å·-1</span></a> <span>|</span> <a target="_blank" rel="noopener" href="https://icp.gov.moe/?keyword=20240052"><img class="icp-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/footer/moe.png"><span>èŒICPå¤‡20240052å·</span></a></div><script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3GoBenqrrrBby5er/quote.js?theme=#1690FF,#00C4B6,#CACACA,#00C4B6,#FFFFFF,#1690FF,14&amp;f=12"></script><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" title="åšå®¢æ¡†æ¶ Hexo_v6.3.0"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" title="ä¸»é¢˜ç‰ˆæœ¬ Butterfly_v4.7.0"></a><a class="github-badge" target="_blank" href="https://cloud.tencent.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-%E8%85%BE%E8%AE%AF%E4%BA%91-00bfff?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAEQUlEQVRIie1Wa0wcVRT+7t1ld3kIdGFbVAqIKSitMViQxjY+oVYbTfEVBB8xRovGCKbtj5L6z0pT07T+oSYNiUitsU3ahkokJUj/FJSKRrZsWRCYLGWBursIArKPucfMbJewhdmlxl+GL5lMMvOd8813zj33DlbxvwdTDBLRbfnsGKa7RqeQzhlEphlSwXrmup14xhj0KyUPu4l/cpEOnP6VvTzjYwkAsm6+ktbE0p9vPkwNR0v5sRWLYwWOv7oiHn3/DDs+62N5EWhSajy5Gl+j13fcz/siijIWXbj+R1H8zrf8BBGy9JxQlk8oe4jhvnWALIAeJ6GhC2i2cShZDDrqP/82lT6Tx22RhBESXu6yOuUE4x5hRxXRugOCOoZk0sK532SK3ydI4Zr3i26tnCGTmo5ZNfjOPPF5s41/YNQTLlcRNq/nkSqIJqvArnrVufPpXGEIEPe39aMIwAgt6n7EUrNqXGCMthGx5OrHBI6WRhYN4dglgYt2DslD8MtsWhDYkBsbAEyExBXhZbOxanRzjmIY5RidZQ4vFogViSrYsoHBOgFM+xhmA0hMioUSHLiVt2Scakfd5ZZXJ8nlExPQi0wlqsTJUOFLRG2GBZaY5SdweIaw92dC0wiHnAlgXs0+rk+mqS+ep8LKOt4SZg6LSl1ic5xom5orXjSjYUg36HE2Nx0FCaaw5+3jAi9dYpj0Ma1CSBXZ4mTjNv4xbi317sHxmpBoYYIJZ3LuRl9+Nto3ZuCVlESVc90XwBO9Dnzn+WshY9OIwM62oKiOAZW5Ap3PEmy7CF9uFchJVE1lfT3A3/jUKsrDPsc+5zXoO/sGWMc12mFzkFcWS4amfmKSjJ19pHC29EgUEIJOSzIZGwWxBqK4k0TnHEvHbconKP9CkHPHKWENW8iHrrvKlIS6jmv0+99ezVltnZyh7b0O8vgD1DgoU0zjQkJqG1v6sSG0j8kqjzXQ8Kkh+RFFUy21fd6Xo9wzTQbcazJo9QnFyfFoyUvHWYnhrcsMAcGQZCB8/xThyTTN/mLrWg5DsKlZ/dNM1dLfVFfnRV7BKVVnJ1R1cQgCzMagaGFq5BlX8lJwHYOxoJYasSnOdFVZeSNeP3pm5zUTHOkV+PCnoKjFRGgtiS6qoHWM4A9uBdKmZFxdEK6+c815A2M+xe/uoXFMy3JYoPL8YI/Avu7gQZAWS/hhOyHfHF3UOSfw0ZWg2xQjuV7IYL9g8RzXOP5499Coe7/Sh3uMMahMS8aDcSbEco7mQQMOW3VqsFFHqCsi5CRp91SpyIwf6HIBx+3AjXmVK9UVifcqc3nLkr26YsB58BvXdPniDYS7LRCelKjOokDau1F8dngzr4PWIdFwY+rxI2OePb1z3jzmWgsxac7+t2KckShMRVfNA1T7XDrvCb2I+iPQ7aZUr4D2fEVArA7z+WbmWY6x8COwilX85wDwD1dajk5dTj13AAAAAElFTkSuQmCC" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œä¸»çº¿è·¯éƒ¨ç½²äºè…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨"></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-black?style=flat&amp;logo=Vercel" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œå¤‡ç”¨çº¿è·¯éƒ¨ç½²äº Vercel"></a><a class="github-badge" target="_blank" href="https://www.cloudflare.com/zh-cn/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Cloudflare-F38020?style=flat&amp;logo=Cloudflare" title="æœ¬ç«™é‡‡ç”¨å¤šçº¿éƒ¨ç½²ï¼Œå¤‡ç”¨çº¿è·¯éƒ¨ç½²äº Cloudflare"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" title="æœ¬ç«™é¡¹ç›®ä¸»è¦ç”± Github æ‰˜ç®¡"></a><a class="github-badge" target="_blank" href="https://gitee.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Backup-Gitee-C71D23?style=flat&amp;logo=Gitee" title="æœ¬ç«™é¡¹ç›®ä¸»è¦ç”± Gitee å¤‡ä»½"></a><a class="github-badge" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-FF3030?style=flat&amp;logo=Claris" title="æœ¬ç«™é‡‡ç”¨çŸ¥è¯†å…±äº«ç½²å - éå•†ä¸šæ€§ä½¿ç”¨ - ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®è¿›è¡Œè®¸å¯"></a><a class="github-badge" target="_blank" href="https://beian.mps.gov.cn/#/query/webSearch?code=42011702000764" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E9%84%82%E5%85%AC%E7%BD%91%E5%AE%89%E5%A4%87-42011702000764-ee6363?style=flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAdCAYAAAC9pNwMAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAACNlJREFUSInF1mmMVeUdx/Hv2e+5+519mJWBYQZkGxZZxLKJqBXGoLS1iXWrmihotFXaJiTWWlsbl6q1aetWd5u0VkKjNG4YEJSlOCibDLMwM8x679z9nnPP1jcVJUxf+7z6J8+LT37/Z4VvaQhfFS8+sBXbctCDGrVTKlBUH4mxAbI9Hfj0IJLsp6paJ5/tmn20N/D0wKDRMq9F/c3M2U1/V0vDfWMFh+tv/Ig1zYPMabDImPJ52OaXO87W580KggCiiOsJOJ6I3wcNFaaeNKxrt72f2fLGu4FpJ/sDQABRzD22fH7/Yze069vGc6mrDLNIJCDik10sxz2by3VdPM87xzkP9jwPTZFRVI1YUJKH+oy7n3tbvv/P2wW/UQxRWe6w4ZJRptYLHDoCuz8v5cP92XbI762O+h6UVWHnUFbPpU0fEb2A60mMJ7MUi9b/b7UgKhiZMaIxm8YLplLMDPz8hl/EH+rs8TNlUpFf32uyZJGLPDwCiTGUyTWodTN49eUCdz2YwXb9NNcObp1X98WDoufynzMVCEKGn27ayPTWBi5ad8P5iQUkJEnFLjqM9Z+hrVX0vfDe6K2dPRWsW2bwyp9EUifSJB84gdxrkR0eRgv1o/3I4fbbprJ6scqamzVO9pffec1S5ZWY2Nfz5qEy/FqOC2Y3s3j53HMSi18VRjFPwSwg+1RfVbl115vvJrsfej7UGIsYPPGgQ7JXoO+Xx5B3dHEomyJ9x1qiQozkr95h5937aFnVyouPlgJK+Ss7Fxz64OTSxSX+LHYxT2IsRW5kbGI4oHcR0jqoqTjV9se3I7/f8rS/ClS23GxSXhph6L5d9Akm7qqZhHWBQGUJ+CWGFzcg7e7m6D3/ZuW1Ea5YKdA3EojuONi813TqNi+YPYOKUhXDtCeGL26/hakLLiEcdsaHRkRAoLRc4fJrmhnekyF0apgZowWSwwkaa+rw3f8WA1GZZsPP5JEChX8dhZTN6iU6kAcs5s+dHd183SJ0VVKL57pfw6YdRQw23aeWTns47DPTALWlRTR7kMLew6hGgYqUhWXYFFUdPZ6lUBahLA8hVcOftckfi7No7VRAAQqsX1dybfvG1qwriM9mM5mJ4e4jO5Cc01dPqixbr8tWGBQUL4vjGigEEShi+xUmZ2RiR/sJ1pbS8NkgZrKAGw0TsgQsQyFaF/nfYTGprAlMFysbA1pI3mhkR6snhGsaymYGvPyFEb9IdbUE2AzFFTwpRqCtBY0wmdER+hZW4j63gcJj38V+/ErSUZXsYBfjIZHIRW0c2Z8BskCAqN+CbBJBFnyyKjR+Ez57nBxLqpfMUeSISElMBFz6x2Q6OxzWrYjyxWVzEewioU3LCS5vQY6nMUrLwNaxXvoQ59IloFSx54PPAZtQLExVZZDxsVE8J4dn6v4JYatgbSjk0owPw7RGH2ADMo88Z7L20ip8f7gC7fAo0q4+0rt7kEQDvaghVZbiPHUHcyeXcfLjT3jmpR7AYsnSScya3UR8bARVMck7Y/cB75/X6rDf3Fg2dw2jKZm5dXGm1LuAzO5DCo9v6aT0ibco5kzOvLOP+NGTFJtDpPYeZKijk/Rn3QxsfZV7txwhX7ABiZUXBsGvIvguQApNQQva9RMmTvZ2dpVUls+tX/UD7GN/Y8Ws05w6rQF+9vyzg1vZjbvMRJhXiRSU8DpTFFe0QE8S6SfPkOkZoktrB2oAhZWrwljxOPmchiSMYOWNoxNuruFU5vWeXdsojiUon345113dBBQBmTYlTimgdB8nfPo4WjaNFgN9OMEkJ02dnadVt5ki54Esqy+bzKJltVhSPbI3iN2zCyMTeXNCuG7Omm2Zok7PR2+R7jvD8ouruHhmCrB5jVZeYxLdrTP4sr4Vtd9g4MA4qc4c+6cu5NPamfw4P59t2WrA4YdXKkASf7SFivo6PDdEPmf1fRM++zp1bH/0r4I1dD1ODtOWaW4IsvPjL7nqXhloQiSPwjjgMYkMASyGEBkjhISCQwkwzve/18AbT+pk8pVY4UacQi9y+gyZ0eRAw4qHa89LXEx1LXMSPfhDJYRb59BtlLKg2WPT2l6qYl1svtGkrLYckyA1S+t5+2ATm37WCui0LSynsckDNH5zTxAchbQtkx08hDHYiW6NgC0enHBzEZ102UDH8QORdEckjEzZrNWkRydzyx17uGnDXqbUnGZ6dRPjSY91q2TqwjFuvTxLo5Zn5Qo/pumRSFcTLQtybEhGE0fQrDhhJ0VvH2lTnnHPhGtsmWan469apERjI2MH3qN7+7MEfH6ql29CbV7PvsMG32k6yU2XDhEKyZw66eJaRdrXR7CzCcqUNC3zwgymPJRCH4KRRLINimpL14A5Y4GDeOqbsPRVcfuN7Xj44pav/hFfrNT2kr2rsqf2Ibp5pEA14ZIImUyW3t5REkkTXRGQ/DGGhtLginhqCWknQDE5hKf5UFSF9Lj020Q2ul5V1AR2hr+8vuP8Vlc2zMPRxoSjnx7XBC14sDoydahSGq7KdO/HFyrBchxCVfX4fDKp4T7SCQejYODZLrYgIqgKFsNIgQqEYob8mW6yiUyb7Z64LVK/+B85xznnJ3AWzqTzuIX46mr5wLs+UUTyIriBCjRNxguHMJIFDLEEvXEOVRWnSJ0+jCd4CJoGjoedM1CLcXQziW3nMV2TSMBeOx7vWZvPt1r+cMPzE8KunaUkFn0vNrvtqXj34c1W6gzxlEQ6naIoBahtnkMwoFMwIVzSRNguMt53Aj2s4nkSlgPoGqLkICsRNF0gl8rYWuP8+11/w/OOJDEhHPKLCIpOXmi+M9AgP+maiesLifF2T1Rn5ZNj5Lo/Qc/GcPMmhdoqlEgIGzCK4PiCmJKK68p4KfF3qYGuF0qCRUkJTzleUbvQyWRTuE5xYthxQbBs7EISAbkzUFG3VfXXbK2YFi3X/eryfKKnqVBItNjJxDzH8erddC4SqWwcN5WyTtlyO1RP/Lh3eHD76MB40swmiDVJyDLYRhpc5+ub6tse/wWKbvSQEAw1awAAAABJRU5ErkJggg==" title="æœ¬ç«™å·²é€šè¿‡å…¬å®‰å¤‡æ¡ˆ"></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E9%84%82ICP%E5%A4%87-2023029632%E5%8F%B7--1-e1d492?style=flat&amp;logo=data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkRFRDAzMDFGQTRERjExRTdBOERFRDM3QzM0QkNFNDU4IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRFRDAzMDIwQTRERjExRTdBOERFRDM3QzM0QkNFNDU4Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REVEMDMwMURBNERGMTFFN0E4REVEMzdDMzRCQ0U0NTgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REVEMDMwMUVBNERGMTFFN0E4REVEMzdDMzRCQ0U0NTgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7byXusAAAK8ElEQVR42uRXeXAUVRr/Xl/TMz2ZyUyOCWESAiEGSLiWhAQEJRARCYiCgKvFobUrWNaulFrK7rKo5a7ueq2iBV5AsARFDtldQZc7SCALgYQjEMhBIPfJTJLunr7e29eTLVdZ9m//2J7qmp6erv6+9zu+73uIEAI/5cHAT3z85AlwPfs/+/4HoR8XcgLf3w99rAx8+jiweCewusaTkr1T1TNlM8X8GWXStHv2GO2tYFkWKFs3bMRVFydCxrBz1rO/WUFcTlkMhcBZUQOWbgGOjwUpMwsQwwKLMOzu9ECF7IGAy4LRowYDd3tcKDAsB1b3DTD6QmD23Awan769n/SqbKS+vNfMSJrgGDSkFpd+N9s6tf9xbAGgiy3ZMSdPrQF3jIzjYsEy9ABWNEBCoP3796LbIHDrDcTRW5g4QFH8NJFWoeEacLpCsGAhJtXfyUhxNWzV+alM7KB6osgJ4oT8T4gZ8Vm6lsZo2KFnpgCuu5Rj7Nj4hdWnis4FS1ehtIxdLMYUYMuG+ZYECP5BdATWza4UdefmD4zmKznozul/YvNmvg+xQrMjFHqB8DQLpSsIFQcWR47vWcU6JQDT6mMdUgcXzDxu4XDQUMIdaN/Od0lLUzqY9O/y40+z987ZJWsmVCoeuNTHgMD/IAEBO4CSCYRnAUkuiBz7arleeWI2K1AmLpz6JZuWUW2eujCNvVZRRHqasgAPSJehcOKbUeGATQG+eobSxjzNJqaXsSkZJXzaHUfU40dWOKdO+/CUzJHtN1yQEBcPOlFB+AEMKHJgL1C4wWqrAyY5jqJk+uT1L1YzwdRSPivvW3xs++9JuCvI0MUyPBPlEdEsiDkQnNDfURANug56D+s2g/TZjNyv+dyC4sbcZSXvNzl9l6+3STPSvJ0WWO1ul8eMEUwYkZkMHLHTpwolsgpINQGlem+KS1feT65WzTX3b3wHkYiT8TL2I3TVGJCdfIy/AyWPOoq9iSepYhrB5cFGqC+ZbWu4S2+oLmL6ZQlXnZ5jyf3xXaMeLPFwzngnwz/8zuHGR5wCdAyL6y0pGOn7ZJzAnkXapZOgHT9apO4sXsUHk2vFufd/QXrDiermV7ZzTio8Bw1OozD2Mp1OlZny6FpIGfopcIkdZn8XiD0tgPwB0GQMrBAD4POOVLe/tdWsqRqPFQB+3vKnWwqXrKv3ZMGJut6HX9t79XOgehAFLvLsnOG/YEDuFdS9W181G64U6uePrcTNnUO13RveYzkLIX5g5SwNjgLBRmb+b2fwOXPeBIQ7CChAUkaDlTAEiKEDoifhKTXB4GWu4IFXkW05W2yNtVNGhmshVHsVQha/2+cWO0DgIGJicdORhjVcf1s3bznd9ZTYMfzEgm1mTXkB7m4PcBR2ZFNOYSei1M/NXrXIDI4oU5EFjs46MLypEkqbopqeRGyF24Dpbqeep6bq6gImout2KSF2ndVMLdKqQnKGD9JMPjViWh4q1qiATIw5BpwuWVy4/EHXwiUrhOHZJ/Dl4wsYMerI6GmLC+XP/ZDLHFt2PTAC2hODwBrqOIZl0h1YIw5TodqIAHYjQD4/sMGhYNVXLIsqnOqFG593QB2ZAa7UABysavmjqhMxaiETw/TMuH2M0NwGILgAT5z5kRXuVnCfIiEa2S7LCFPoY+P62Lw5Gzo8AWhNTAfcXDcGCdJ9wojJVZzRTaDhJGClJ2pl3NcD5t6Pf2edPzzfdokjc/R3Sv7crTdS82HL6dDqA9WhRSBQTg0C8V5n26JJwTc4s71lgnHu6kxCzYPMUDDaE2wbUX8R20+S91yko6vuQnAIe6HZGDO6ZMsaS3JcNDuuWwIn0lVSiHgKWWvDROv03hfw+dPzGXpLmHDn5+Gfv/Tk10KG8LcjbWv3netaDTxVs2ZAik+of3JW1qN9rvgmTv5221aoqc0UJ/+slBmSesXC/y4uZODbofeGw9dOwe6MFcO9mpofH2p2G5er11h9YQ8O3HGFdF4PsJ1fFpJrF6eQXpqLx3tDm/LwixfynyjeISfn7CxrX9/Q2p8b5ZPCnj3Yc+S5aUnLJL+3sYNwwCGeU+2YuC/M4e7OSLSw0MDIsrOg10KCxI2bRy808TtdmtWdu3xd3FfPZ/JnD60CfGigwbCgWPFph7XC2dsqUwv/up/P9u2vE4vL6lsfsRSDtzn380zHrDFJ63KHxL3hdVl6v0FrDnUJ55m9+DE562IBx/BuYDCxubNrk50xYghoPd3ZbpZPXOiDS+UKchQmrvzVE8vyVmc0npIdPc0kEshQ2/ypVqOY5ixVYvLOdOJv2rvkHJC7owgOixMujAt4i9P9zOdZg3ytnX2YWtAEizrBDsPxg1MqHamBSs7pp/X8fJ6OmFfA5oFmjW0ftnfEo5N7lmb7B7/5XDB30RtN7OZfRyYWk+R8lUs0FWyYghHS4qFfBdA1mr0JyW6mIT1ROpwpMXuGBVz7h4isFgi1AGcicNKq5qX2iNg9gfoUyacPAunsBrX0yELexcfq5QdXWNcvT2AlRIsQipZfxp903b3ipZzG9Mldf5cyaVcjWV39MElRjNFtYd3p57Ca4UJdJKJd8cUwV9K9Uk2/jBWmpwOGyy0wKZaBeE1xYJoIlTptkrbLBoYDpFwuA3nTBy/L24rXCqPSq6X5S1+SP/7DVoY3WIa3k6CPUqy44eMOivMeW9AWl9J7QhwMPb5hYIg+KO+SITNGgEmJIlRfa6PNSYN0SwepqRbS6y9AAolARIk8hEeknuMSE2rANH88D/C9IVu5rTYhxsW6EdqEa2O5yYXbrEPfLCEeiihlA1Ek9OrKQlN572hCwfyn5sfFn1Rry6GHkyA31Aw8nQs8lK1U0MEPIrjdsaD3dQMbbk/uOXn0L2zmyLqYqfm7sEH9SdgfD0CR0yW0iGC+5+N330JamOV8SWf5WTO/1jev22FWVUxFdoWz+z/VBKHaQIJgsCMm7BCSMvdxMd4zutnZwuiaYqoKIWkZEqeJyUS1spQrFTPM8tOLnVNn7JGeWv0EtZYVXc2tE5h8+Bi1Aw9GdzMwVhc1vgcMTb4D1dZOMipLZ+iVx5cw1C6I0mELMzoLGANDCRFFnXFI3QixN2nRsocuP+7tTbDCGm/TJtxVuNF5z7z1zvE5Z4mq3nYoRPKRkujEaoRaATkx8P4ACr/z6meR0pKHXPcU/RFZukM/V/o49N1MsoPa3o0Gt9+FB067U9v2jSZGr9lAco1QMGuDXl+fZ1y9epdv7ZtjGLfURSzrv4dS0S9ELxy+IG2ntJtZFo97QklY1gT5q90vOxYveB29/NZY7h+HHrCaaoqslmtjQQknE03n7RnTnhVoKdZQvL+F9Q2qQGPHf8l7EiP9xR9+YLR3J0XnwqqKIum+wi0DKNySACOwP5qZCYP0mGUrHiS843UsSTpbVPQauONCTGr2P/X2tklCTsFHENE1zDv7QbsZoroYzvI8bR2CB+uYlwrv306brOBsbFpnHTz4uJST97Yja9R2W8jgEG4zlpP/bEvs6mfDhESh13n39JWaJIGARXC0RkALh4ap3xxabrjpk7xD9z6z9m7X5Nyy8JZNf+7btf15ohJgB8W1OkZmP8P6PLpz+r2vMUNHreMEkKO13W4ut9mH3n5rhnF0yqFqBEv0g+aLA2vI0EpXft4m4kmoc9993yfusTllkV46c+XdtZ44Yxv5oUMrxMkz37aSh2GDtm5LVuw9hkyi1vvfG2D0f787/pcAAwAwtTs7N8++1QAAAABJRU5ErkJggg==" title="æœ¬ç«™å·²é€šè¿‡å·¥ä¿¡éƒ¨ ICP å¤‡æ¡ˆ"></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20240052%E5%8F%B7-fe1384?style-flat&amp;logo=data:image/png;base64,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" title="æœ¬ç«™å·²é€šè¿‡èŒå¤‡å¤‡æ¡ˆ"></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="go-down" type="button" title="åˆ·æ–°é¡µé¢" onclick="window.location.reload()"><i class="fa-solid fa-arrows-rotate"></i></button><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fa-solid fa-book-open-reader"></i></button><button id="translateLink" type="button" title="ç¹ç®€åˆ‡æ¢">ç¹</button><button id="darkmode" type="button" title="æ˜¼å¤œåˆ‡æ¢"><i class="fa-solid fa-moon"></i></button><button id="hide-aside-btn" type="button" title="å…¨å±æ¨¡å¼" onclick="rmf.fullScreen()"><i class="fas fa-expand"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-down" type="button" title="åˆ†äº«æœ¬é¡µ" onclick="rmf.copyWordsLink()"><i class="fa-solid fa-share-from-square"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" title="åé€€ä¸€æ­¥" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" title="å‰è¿›ä¸€æ­¥" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" title="åˆ·æ–°é¡µé¢" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" title="ç›´è¾¾é¡¶éƒ¨" href="javascript:btf.scrollToDest(0, 500)"><i class="fa fa-arrow-up"></i></a><a class="rightMenu-item" title="ç›´è¾¾åº•éƒ¨" href="javascript:btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" href="/archives/"><i class="fa-solid fa-calendar-days"></i><span>æ–‡ç« å½’æ¡£</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fas fa-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fas fa-folder-open"></i><span>æ–‡ç« åˆ†ç±»</span></a><a class="rightMenu-item" href="javascript:toRandomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.bing.com/search?q=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa-brands fa-edge"></i><span>ç”¨Bingæœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fa fa-comments"></i><span>ç›´è¾¾è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.click()"><i class="fa fa-arrows-alt"></i><span>å…¨å±æ˜¾ç¤º</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item menu-link" href="/copyright/"><i class="fa-solid fa-copyright"></i><span>æœ¬ç«™åè®®</span></a><a class="rightMenu-item menu-link" href="/about/#reward-me"><i class="fa-sharp fa-solid fa-heart-circle-bolt"></i><span>èµåŠ©æœ¬ç«™</span></a><a class="rightMenu-item menu-link" href="/about/"><i class="fa-regular fa-address-card"></i><span>å…³äºæœ¬ç«™</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"></div><script src="/js/jquery.min.js"></script><script src="/js/sakura.js"></script><script data-pjax="" src="/js/footer_beautification.js"></script><canvas id="universe"></canvas><script src="/js/universe.js"></script><script src="/js/title.js"></script><script async data-pjax="" src="/js/fps.js"></script><script async data-pjax="" src="/js/txmap.js"></script><script src="/js/console.js"></script><script src="/js/hotsearch.js"></script><script src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script async data-pjax="" src="/js/timing.js"></script><script data-pjax="" src="/js/rightmenu.js"></script><script src="/js/random.js"></script><script src="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/jinrishici.js"></script><script data-pjax="" src="/js/poem.js"></script><script src="/js/chuckle-post-ai.js"></script><script data-pjax="" defer>new ChucklePostAI({el:"#post>#article-container",key:"e3524467cea76d785e9a",title_el:".post-title",interface:{name:"uf4te çš„ AI å°åŠ©æ‰‹",introduce:"Heyï¼Œä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ï¼æˆ‘æ˜¯ uf4te çš„æ–‡ç« è¾…åŠ© AIï¼Œç‚¹å‡»ä¸‹æ–¹çš„æŒ‰é’®ï¼Œæˆ‘å¯ä»¥ä¸ºä½ ç”Ÿæˆæœ¬æ–‡æ‘˜è¦ã€æ¨èç›¸å…³æ–‡ç« ï¼ˆé¦–æ¬¡ç”Ÿæˆå¯èƒ½ä¼šæ¯”è¾ƒæ…¢ï¼Œè¯·æ‚¨è€å¿ƒç­‰å¾…ä¸€å°ä¼šï¼Œè°¢è°¢ç†è§£å“¦~ï¼‰",version:"GPT-3.5",button:["ä»‹ç»è‡ªå·±","æ¨èç›¸å…³æ–‡ç« ","ç”Ÿæˆæœ¬æ–‡æ‘˜è¦","çŸ©é˜µç©¿æ¢­"]},hide_shuttle:!0,pjax:!0,summary_toggle:!1,summary_speech:!0})</script><script data-pjax="" src="/js/random-friends-post.js"></script><script data-pjax="" src="/js/pagination.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="â™¡å¯Œå¼ºâ™¡,â™¡æ°‘ä¸»â™¡,â™¡æ–‡æ˜â™¡,â™¡å’Œè°â™¡,â™¡è‡ªç”±â™¡,â™¡å¹³ç­‰â™¡,â™¡å…¬æ­£â™¡,â™¡æ³•æ²»â™¡,â™¡çˆ±å›½â™¡,â™¡æ•¬ä¸šâ™¡,â™¡è¯šä¿¡â™¡,â™¡å‹å–„â™¡" data-fontsize="16px" data-random="false" async></script><link rel="stylesheet" href="/js/APlayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="/js/APlayer/APlayer.min.js"></script><script src="/js/APlayer/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax], .pjax-reload script").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><div class="pjax-reload"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInLeft"),arr[i].setAttribute("data-wow-duration","600ms"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInRightBig"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer src="/js/wow_init.js"></script></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInLeft"),arr[i].setAttribute("data-wow-duration","600ms"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInRightBig"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html><script>var flinks=["https://hexo.io/zh-cn/","https://nodejs.org/en/","https://butterfly.js.org/","https://cnhuazhu.top/","https://www.fomal.cc/","https://guole.fun/","https://akilar.top/","https://zykj.js.org/","https://blog.eurkon.com/","https://fe32.top/","https://blog.anheyu.com/","https://meuicat.com/","https://blog.zhheo.com/","https://blog.justlovesmile.top/","https://uuanqin.top/","https://blog.leonus.cn/","https://aeneag.xyz/","https://www.52pojie.cn/","https://www.kanxue.com/","https://www.anquanke.com/","https://www.freebuf.com/","https://blog.xmcve.com/","https://ctf-wiki.org/","https://bestwing.me/","https://houjingyi233.com/","https://paper.seebug.org/","https://security.tencent.com/index.php/blog/","https://xlab.tencent.com/cn/","https://www.ctfiot.com/blog/","https://www.iotsec-zone.com/article/original","https://www.yuque.com/cyberangel/rg9gdm/","https://www.yuque.com/u239977/","https://www.yuque.com/hxfqg9/","https://blog.aabyss.cn/","https://wiki.wgpsec.org/","https://www.cnblogs.com/trunk","https://lazzzaro.github.io/","https://zikh26.github.io/","https://bbs.kanxue.com/homepage-949925.htm","https://www.henry-blog.life/henry-blog","https://blog.imzjw.cn/","https://zfe.space/","https://blog.hclonely.com/","https://whb1990.github.io/","https://nickxu.me/","https://benpaodewoniu.github.io/","https://www.antmoe.com/","https://immmmm.com/","https://jinlinxingjian.top/"];function toRandomFlink(){window.open(flinks[Math.floor(Math.random()*flinks.length)])}</script>