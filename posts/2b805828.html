<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>Ubuntu16.04虚拟机环境搭建 | 坠入星野的月🌙</title><meta name="author" content="uf4te"><meta name="copyright" content="uf4te"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="由于 Ubuntu 16.04 环境比较老，导致 2023 年 Ubuntu 22.04 下的许多 PWN 环境搭建并不适用于 16.04，所以出了一个专门针对 16.04 的环境配置教程，并对与 22.04 中不同的地方专门做了讲解和处理"><meta property="og:type" content="article"><meta property="og:title" content="Ubuntu16.04虚拟机环境搭建"><meta property="og:url" content="https://www.uf4te.cn/posts/2b805828.html"><meta property="og:site_name" content="坠入星野的月🌙"><meta property="og:description" content="由于 Ubuntu 16.04 环境比较老，导致 2023 年 Ubuntu 22.04 下的许多 PWN 环境搭建并不适用于 16.04，所以出了一个专门针对 16.04 的环境配置教程，并对与 22.04 中不同的地方专门做了讲解和处理"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.uf4te.cn/img/cover/cover-108.jpg"><meta property="article:published_time" content="2023-11-07T16:00:00.000Z"><meta property="article:modified_time" content="2024-10-17T08:47:02.000Z"><meta property="article:author" content="uf4te"><meta property="article:tag" content="CTF"><meta property="article:tag" content="Pwn"><meta property="article:tag" content="Linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.uf4te.cn/img/cover/cover-108.jpg"><link rel="shortcut icon" href="/img/blog/avatar.jpg"><link rel="canonical" href="https://www.uf4te.cn/posts/2b805828.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//sdk.51.la"><meta name="baidu-site-verification" content="codeva-b3iLZWQECM"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>!function(t){"use strict";!function(e){var r=window,s=document,n=t,c="".concat("https:"===s.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),i=s.createElement("script"),o=s.getElementsByTagName("script")[0];i.type="text/javascript",i.setAttribute("charset","UTF-8"),i.async=!0,i.src=c,i.id="LA_COLLECT",n.d=i;var a=function(){r.LA.ids.push(n)};r.LA?r.LA.ids&&a():(r.LA=t,r.LA.ids=[],a()),o.parentNode.insertBefore(i,o)}()}({id:"3GoBenqrrrBby5er",ck:"3GoBenqrrrBby5er",hashMode:!0})</script><script>!function(e,t,n,r){var i=t.createElement("script"),o=t.getElementsByTagName("script")[0];i.type="text/javascript",i.crossorigin=!0,i.onload=function(){(new e.LingQue.Monitor).init({id:"3GoBenqrrrBby5er"})},o.parentNode.insertBefore(i,o),i.src="https://sdk.51.la/perf/js-sdk-perf.min.js"}(window,document)</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"XY1UOYTY6S",apiKey:"4f03dfbbbff745c98fa4728e2ca61a96",indexName:"uf4te",hits:{per_page:10},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"prismjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#323232",bgDark:"#696969",position:"bottom-center"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!1,rightside:!0}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Ubuntu16.04虚拟机环境搭建",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-10-17 16:47:02"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"></head><body><span id="fps"></span><script src="/js/reward.js"></script><script src="https://cdn1.tianli0.top/npm/sweetalert2@11.6.16/dist/sweetalert2.all.min.js"></script><script>var fdataUser={apiurl:"https://friends.uf4te.cn/",defaultFish:500,hungryFish:500}</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="坠入星野的月🌙" type="application/atom+xml"><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg" onerror='onerror=null,src="/img/404/loading_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-book-open"></i> <span>文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i> <span>文章归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>文章标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>文章分类</span></a></li><li><a class="site-page child" href="javascript:toRandomPost()"><i class="fa-fw fa-solid fa-car-side"></i> <span>随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-gift"></i> <span>休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa-solid fa-headphones"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa-brands fa-youtube"></i> <span>视频</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fa-regular fa-images"></i> <span>图片</span></a></li><li><a class="site-page child" href="/play/"><i class="fa-fw fa-solid fa-gamepad"></i> <span>游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-circle-nodes"></i> <span>互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/comments/"><i class="fa-fw fa-sharp fa-solid fa-paper-plane"></i> <span>留言板</span></a></li><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa-solid fa-pen-nib"></i> <span>我的说说</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fa-solid fa-user-group"></i> <span>友链朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-thumbs-up"></i> <span>推荐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/"><i class="fa-fw fa-solid fa-wrench"></i> <span>实用工具</span></a></li><li><a class="site-page child" href="/collect/"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>时空之海</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-user-astronaut"></i> <span>我的装备</span></a></li><li><a class="site-page child" href="/commentwall/"><i class="fa-fw fa-brands fa-skyatlas"></i> <span>言语星空</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-regular fa-address-card"></i> <span>关于本站</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url('/img/blog/default_top_img.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="坠入星野的月🌙"><img class="site-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg"></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-book-open"></i> <span>文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i> <span>文章归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>文章标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>文章分类</span></a></li><li><a class="site-page child" href="javascript:toRandomPost()"><i class="fa-fw fa-solid fa-car-side"></i> <span>随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-gift"></i> <span>休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa-solid fa-headphones"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa-brands fa-youtube"></i> <span>视频</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fa-regular fa-images"></i> <span>图片</span></a></li><li><a class="site-page child" href="/play/"><i class="fa-fw fa-solid fa-gamepad"></i> <span>游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-circle-nodes"></i> <span>互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/comments/"><i class="fa-fw fa-sharp fa-solid fa-paper-plane"></i> <span>留言板</span></a></li><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa-solid fa-pen-nib"></i> <span>我的说说</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fa-solid fa-user-group"></i> <span>友链朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-thumbs-up"></i> <span>推荐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/"><i class="fa-fw fa-solid fa-wrench"></i> <span>实用工具</span></a></li><li><a class="site-page child" href="/collect/"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>时空之海</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-user-astronaut"></i> <span>我的装备</span></a></li><li><a class="site-page child" href="/commentwall/"><i class="fa-fw fa-brands fa-skyatlas"></i> <span>言语星空</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-regular fa-address-card"></i> <span>关于本站</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Ubuntu16.04虚拟机环境搭建</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-sharp fa-regular fa-pen-to-square fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-07T16:00:00.000Z 2023-11-08 00:00:00">2023-11-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-17T08:47:02.000Z 2024-10-17 16:47:02">2024-10-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-folder-open fa-fw post-meta-icon"></i> <a class="post-meta-categories" href="/categories/Linux%E7%8E%AF%E5%A2%83/">Linux环境</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span> <span class="word-count">13.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span> <span>58分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title="Ubuntu16.04虚拟机环境搭建"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="waline-pageview-count" data-path="/posts/2b805828.html"><i class="fa-solid fa-spinner fa-spin"></i></span></span> <span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/2b805828.html#post-comment"><span class="waline-comment-count" data-path="/posts/2b805828.html"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><blockquote><p>安装软件或 <code>git</code> 仓库到本地时，建议在路径 <code>/opt</code> 下安装或存放，养成文件管理的习惯</p><p>另外，apt 安装时建议使用新的 <code>sudo apt install xxx</code> 代替旧的 <code>sudo apt-get install xxx</code></p></blockquote><p>使用 pip 安装库时，<code>pip install xxx</code> 和 <code>sudo pip install xxx</code> 安装的库路径不一样，例如：</p><ul><li><code>sudo pip install xxx</code> 安装路径：<code>/usr/local/lib/python3.10/dist-packages/</code></li><li><code>pip install xxx</code> 安装路径：<code>/home/wyy/.local/lib/python3.10/site-packages/</code></li></ul><p><strong>尽量不要使用 <code>sudo pip install</code> 来安装 python 库</strong></p><hr><p><mark>如果搭建 Ubuntu 22.04 这种新版本的环境，请移步本站：《<a href="226aff2b.html">Ubuntu22.04虚拟机环境搭建</a>》一文</mark></p><hr><p>以下所有的安装都基于 Ubuntu 16.04 （需要升级 pip 和 python）虚拟机进行了测试，因为许多地方与 Ubuntu 22.04 有所区别，所以另写了一篇专门针对 Ubuntu 16.04 的配置</p><blockquote><p><strong>不算 tips 的小 tips：</strong></p><ol><li><em>VM 虚拟机挂起后再保存快照可以秒存，但开机运行状态保存快照相当慢（开机运行状态保存快照中途是可以继续操作虚拟机的，不影快照的保存）</em></li><li>如果发现在虚拟机中，鼠标的额外功能键无法使用，比如：前进、后退等<br>在虚拟机文件夹下，有一个&nbsp;<code>xxx.vmx</code>&nbsp;的文件，<u>在虚拟机关闭的条件下</u>，使用记事本打开，在文件的最后添加如下内容，重新开启虚拟机，即可<em>使用鼠标的额外功能键</em>：<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mouse.vusb.enable <span class="token operator">=</span> <span class="token string">"TRUE"</span>  
mouse.vusb.useBasicMouse <span class="token operator">=</span> <span class="token string">"FALSE"</span>  
usb.generic.allowHID <span class="token operator">=</span> <span class="token string">"TRUE"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><em>Ubuntu 16.04 将屏幕左侧的启动器栏移动到屏幕底部</em>，在终端输入：<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">gsettings <span class="token builtin class-name">set</span> com.canonical.Unity.Launcher launcher-position Bottom

<span class="token comment"># 如果想换回左侧，输入：</span>
gsettings <span class="token builtin class-name">set</span> com.canonical.Unity.Launcher launcher-position Left<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li>如果在 VMware Workstation 中安装 Ubuntu 虚拟机时界面显示不全，无法点击确定和下一步，这是由于系统默认分辨率与电脑分辨率的差异导致的，可以在桌面空白位置按 <code>Ctrl + Alt + T</code>，即可打开终端，输入：<code>xrandr -s 1280x800</code> 后回车即可显示全部界面</li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA36.png" alt="Linux虚拟机CTF环境搭建36.png"></p><ol start="5"><li>如果<em>开机出现显示器相关报错</em>：无法应用原保存的显示器配置或者 <code>CRTC 63</code> 相关问题<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> ~/.config/monitors.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>重启即可解决</li></ol></blockquote><hr><h1 id="VMtools"><a href="#VMtools" class="headerlink" title="VMtools"></a>VMtools</h1><blockquote><p>像 Ubuntu16.04 这种旧版本不建议使用 <code>Open VM Tools</code>（会报错），还是建议使用 VMware 官方的 <code>VMware Tools</code></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 安装，将VMtools解压到一个目录下，例如主目录</span>
<span class="token builtin class-name">cd</span> ~/vmware-tools-distrib
<span class="token function">sudo</span> ./vmware-install.pl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><h1 id="更换镜像源"><a href="#更换镜像源" class="headerlink" title="更换镜像源"></a>更换镜像源</h1><blockquote><p>Linux 自带的源来自国外，有时候下载速度感人，十分难受，建议更换系统的镜像源</p><p><mark>针对 Ubuntu 16.04 我建议使用阿里源，因为后面 pip 源也建议使用阿里源，否则 pip 会出现 SSL 问题，这里可以将镜像源和 pip 源统一一下</mark></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /etc/apt <span class="token comment"># 进入apt目录下</span>
<span class="token function">sudo</span> <span class="token function">cp</span> sources.list sources.list.backup <span class="token comment"># 备份</span>
<span class="token function">sudo</span> <span class="token function">vim</span> sources.list <span class="token comment"># 编辑sources.list文件</span>

<span class="token comment"># 加入下面两个----之间的内容</span>
-----------------------------------------------------------------
<span class="token comment"># deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricted</span>
deb-src http://archive.ubuntu.com/ubuntu xenial main restricted <span class="token comment">#Added by software-properties</span>
deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe <span class="token comment">#Added by software-properties</span>
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe <span class="token comment">#Added by software-properties</span>
deb http://mirrors.aliyun.com/ubuntu/ xenial universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates universe
deb http://mirrors.aliyun.com/ubuntu/ xenial multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse <span class="token comment">#Added by software-properties</span>
deb http://archive.canonical.com/ubuntu xenial partner
deb-src http://archive.canonical.com/ubuntu xenial partner
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted
deb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe <span class="token comment">#Added by software-properties</span>
deb http://mirrors.aliyun.com/ubuntu/ xenial-security universe
deb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse
-----------------------------------------------------------------

 <span class="token comment"># 刷新三连</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade
<span class="token function">sudo</span> <span class="token function">apt</span> clean<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h1 id="Python-配置"><a href="#Python-配置" class="headerlink" title="Python 配置"></a>Python 配置</h1><blockquote><p>注意：<br>如果要给 Ubuntu 16.04 安装新版本的 Python，尽量不要更改系统默认的 <code>python3</code> 指向，因为 Ubuntu 的一些功能依赖于 python 2.7 和 python 3.5，随意改动可能出现各种奇奇怪怪的兼容性问题</p><p><strong>另外，系统自带的 python 千万不要卸载，可能导致系统崩溃！！！</strong></p><p><em>Ubuntu 16.04 的 pip 源建议使用阿里源，否则后面使用 pip 可能会遇到 SSL 问题</em></p></blockquote><p>Ubuntu 16.04 默认：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">2.7</span>
python2 <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">2.7</span>
python3 <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">3.5</span>

pip <span class="token operator">==</span><span class="token operator">&gt;</span> pip <span class="token punctuation">(</span>python <span class="token number">2.7</span><span class="token punctuation">)</span>
pip2 <span class="token operator">==</span><span class="token operator">&gt;</span> pip <span class="token punctuation">(</span>python <span class="token number">2.7</span><span class="token punctuation">)</span>
pip3 <span class="token operator">==</span><span class="token operator">&gt;</span> 无<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><mark>以上默认设置尽量不要更改</mark> <strong>（python 和 pip 的指向可以修改，但 python2、python3 尽量不要动）</strong></p><p>如果安装了新版的 Python，例如安装了 python 3.10.6，就使用 <code>python3.10</code> 来打开，同理使用 <code>pip3.10</code></p><p>即对应关系为：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">2.7</span>
python2 <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">2.7</span>
python3 <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">3.5</span>
python3.10 <span class="token operator">==</span><span class="token operator">&gt;</span> python <span class="token number">3.10</span>

pip <span class="token operator">==</span><span class="token operator">&gt;</span> pip <span class="token punctuation">(</span>python <span class="token number">2.7</span><span class="token punctuation">)</span>
pip2 <span class="token operator">==</span><span class="token operator">&gt;</span> pip <span class="token punctuation">(</span>python <span class="token number">2.7</span><span class="token punctuation">)</span>
pip3 <span class="token operator">==</span><span class="token operator">&gt;</span> 无
pip3.10 <span class="token operator">==</span><span class="token operator">&gt;</span> pip <span class="token punctuation">(</span>python <span class="token number">3.10</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="升级系统自带-pip"><a href="#升级系统自带-pip" class="headerlink" title="升级系统自带 pip"></a>升级系统自带 pip</h2><blockquote><p>由于系统自带的 python 的 pip 版本太低 （pip-8），后续操作会导致各种问题，所以最好升级一下</p><p><mark>但是注意千万不能直接使用 <code>pip3 install --upgrade pip</code> 来升级系统自带的 pip</mark></p><p>因为这会将 pip 升级为最新版，导致与 python 3.5 不匹配，因为 <strong>python 3.5 最高只支持 pip-20.3.4</strong> （python 3.5 在 2020 年 9 月后不再支持 pip-21 以后的版本）</p></blockquote><p>使用 <code>get-pip.py</code> 更新 python 3.5 自带的 pip 版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">wget</span> https://bootstrap.pypa.io/pip/3.5/get-pip.py <span class="token parameter variable">-O</span> get-pip3.5.py
python3.5 get-pip3.5.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>同理 python 2.7：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">wget</span> https://bootstrap.pypa.io/pip/2.7/get-pip.py <span class="token parameter variable">-O</span> get-pip2.7.py
python2.7 get-pip2.7.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果更新 pip 后使用 <code>pip -V</code> 出现警告：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: pip is being invoked by an old script wrapper. This will fail <span class="token keyword">in</span> a future version of pip.
Please see https://github.com/pypa/pip/issues/5599 <span class="token keyword">for</span> advice on fixing the underlying issue.
To avoid this problem you can invoke Python with <span class="token string">'-m pip'</span> instead of running pip directly.
pip <span class="token number">20.3</span>.4 from /home/wyy/.local/lib/python3.5/site-packages/pip <span class="token punctuation">(</span>python <span class="token number">3.5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>解决办法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 注意, PATH 的内容要与上述 WARNING 中的路径一致</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export PATH=/home/wyy/.local/lib/python3.5/site-packages/pip:$PATH'</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc
<span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><h2 id="更换-pip-源"><a href="#更换-pip-源" class="headerlink" title="更换 pip 源"></a>更换 pip 源</h2><blockquote><p>Ubuntu 16.04 的 pip 源建议使用阿里源，否则后面使用 pip 可能会遇到 SSL 问题</p></blockquote><p>如果使用 <code>pip install xxx</code> 无法安装库，出现警告：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: Retrying <span class="token punctuation">(</span>Retry<span class="token punctuation">(</span>total<span class="token operator">=</span><span class="token number">4</span>, <span class="token assign-left variable">connect</span><span class="token operator">=</span>None, <span class="token assign-left variable">read</span><span class="token operator">=</span>None, <span class="token assign-left variable">redirect</span><span class="token operator">=</span>None, <span class="token assign-left variable">status</span><span class="token operator">=</span>None<span class="token punctuation">))</span> after connection broken by <span class="token string">'SSLError(SSLEOFError(8, '</span>EOF occurred <span class="token keyword">in</span> violation of protocol <span class="token punctuation">(</span>_ssl.c:645<span class="token punctuation">)</span><span class="token string">'),)'</span><span class="token builtin class-name">:</span> /simple/pwn/
WARNING: Retrying <span class="token punctuation">(</span>Retry<span class="token punctuation">(</span>total<span class="token operator">=</span><span class="token number">3</span>, <span class="token assign-left variable">connect</span><span class="token operator">=</span>None, <span class="token assign-left variable">read</span><span class="token operator">=</span>None, <span class="token assign-left variable">redirect</span><span class="token operator">=</span>None, <span class="token assign-left variable">status</span><span class="token operator">=</span>None<span class="token punctuation">))</span> after connection broken by <span class="token string">'SSLError(SSLEOFError(8, '</span>EOF occurred <span class="token keyword">in</span> violation of protocol <span class="token punctuation">(</span>_ssl.c:645<span class="token punctuation">)</span><span class="token string">'),)'</span><span class="token builtin class-name">:</span> /simple/pwn/
WARNING: Retrying <span class="token punctuation">(</span>Retry<span class="token punctuation">(</span>total<span class="token operator">=</span><span class="token number">2</span>, <span class="token assign-left variable">connect</span><span class="token operator">=</span>None, <span class="token assign-left variable">read</span><span class="token operator">=</span>None, <span class="token assign-left variable">redirect</span><span class="token operator">=</span>None, <span class="token assign-left variable">status</span><span class="token operator">=</span>None<span class="token punctuation">))</span> after connection broken by <span class="token string">'SSLError(SSLEOFError(8, '</span>EOF occurred <span class="token keyword">in</span> violation of protocol <span class="token punctuation">(</span>_ssl.c:645<span class="token punctuation">)</span><span class="token string">'),)'</span><span class="token builtin class-name">:</span> /simple/pwn/
WARNING: Retrying <span class="token punctuation">(</span>Retry<span class="token punctuation">(</span>total<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">connect</span><span class="token operator">=</span>None, <span class="token assign-left variable">read</span><span class="token operator">=</span>None, <span class="token assign-left variable">redirect</span><span class="token operator">=</span>None, <span class="token assign-left variable">status</span><span class="token operator">=</span>None<span class="token punctuation">))</span> after connection broken by <span class="token string">'SSLError(SSLEOFError(8, '</span>EOF occurred <span class="token keyword">in</span> violation of protocol <span class="token punctuation">(</span>_ssl.c:645<span class="token punctuation">)</span><span class="token string">'),)'</span><span class="token builtin class-name">:</span> /simple/pwn/
WARNING: Retrying <span class="token punctuation">(</span>Retry<span class="token punctuation">(</span>total<span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">connect</span><span class="token operator">=</span>None, <span class="token assign-left variable">read</span><span class="token operator">=</span>None, <span class="token assign-left variable">redirect</span><span class="token operator">=</span>None, <span class="token assign-left variable">status</span><span class="token operator">=</span>None<span class="token punctuation">))</span> after connection broken by <span class="token string">'SSLError(SSLEOFError(8, '</span>EOF occurred <span class="token keyword">in</span> violation of protocol <span class="token punctuation">(</span>_ssl.c:645<span class="token punctuation">)</span><span class="token string">'),)'</span><span class="token builtin class-name">:</span> /simple/pwn/
Could not fetch URL https://pypi.tuna.tsinghua.edu.cn/simple/pwn/: There was a problem confirming the ssl certificate: HTTPSConnectionPool<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'pypi.tuna.tsinghua.edu.cn'</span>, <span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">443</span><span class="token punctuation">)</span>: Max retries exceeded with url: /simple/pwn/ <span class="token punctuation">(</span>Caused by SSLError<span class="token punctuation">(</span>SSLEOFError<span class="token punctuation">(</span><span class="token number">8</span>, <span class="token string">'EOF occurred in violation of protocol (_ssl.c:645)'</span><span class="token punctuation">)</span>,<span class="token punctuation">))</span> - skipping<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可尝试更换 pip 源，这通常是因为 Ubuntu 16.04 这种老版本使用清华源导致的</p><p>例如将清华源换成阿里源，更改 <code>~/.config/pip/pip.conf</code> 文件内容，示例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>global<span class="token punctuation">]</span>
index-url <span class="token operator">=</span> http://mirrors.aliyun.com/pypi/simple/

<span class="token punctuation">[</span>install<span class="token punctuation">]</span>
trusted-host <span class="token operator">=</span> mirrors.aliyun.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="安装-python-3-10-6"><a href="#安装-python-3-10-6" class="headerlink" title="安装 python 3.10.6"></a>安装 python 3.10.6</h2><blockquote><p>由于 Ubuntu 16.04 自带的 python 3.5 太老了，pip 默认版本只有 8，是无法直接安装 pwntools 的，也会存在其他的版本问题，索性直接安装一个新一点的 python 3.10.6</p><p><em>但是安装过程也不是一帆风顺的，遇到了各种各样的 bug，下面会具体分析和解决</em></p><p><em>如果图方便和稳定，就安装 python 3.9 及以下的版本吧，试了一次好像没什么 bug （至少没有 SSL 问题）</em></p><p>参考文章：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44132990/article/details/126308573">Ubuntu安装python3.10.6-CSDN博客</a></p></blockquote><p>安装相关库：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libffi-dev build-essential python-dev python-setuptools python-pip python-smbus build-essential libncursesw5-dev libgdbm-dev libc6-dev zlib1g-dev libsqlite3-dev tk-dev libssl-dev openssl libxpm-dev libxext-dev zlib1g-dev libbz2-dev libssl-dev libncurses5-dev libsqlite3-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>安装依赖：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev <span class="token function">wget</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下载并解压 python 3.10.6 源码：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">wget</span> https://www.python.org/ftp/python/3.10.6/Python-3.10.6.tgz
<span class="token function">tar</span> <span class="token parameter variable">-vxf</span> Python-3.10.6.tgz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>编译安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> Python-3.10.6

<span class="token comment"># --prefix 指定安装的目录，我这里安装在 /usr/local/python3.10.6 下</span>
<span class="token comment"># --enable-optimizations 对编译结果进行优化，提高运行效率</span>
<span class="token function">sudo</span> ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/python3.10.6 --enable-optimizations

<span class="token function">sudo</span> <span class="token function">make</span>

<span class="token function">sudo</span> <span class="token function">make</span> altinstall<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这里安装使用的是 <code>sudo make altinstall</code> 而不是 <code>sudo make install</code> （当然也可以）<br>使用 <code>sudo make install</code> 可能会更改自带的 python3 安装，使卸载变得困难，甚至使自带的 python3 变得不可用，但一般不会出现这些恶性错误</p></blockquote><hr><h3 id="踩坑与解决"><a href="#踩坑与解决" class="headerlink" title="踩坑与解决"></a>踩坑与解决</h3><blockquote><p>参考文章：</p><ol><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39719415/article/details/121361399">python3的安装（踩坑版，解决ssl问题，解决pip3无法使用的问题）python3 安装ssl模块-CSDN博客</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/mdh17322249/article/details/123966953">python3.10编译安装报SSL失败解决方法_python源码编译的时候 — logging error — got an error: -CSDN博客</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/u011573853/article/details/107243183">The necessary bits to build these optional modules were not found: _uuid _bz2 _curse _curses_panel-CSDN博客</a></li></ol></blockquote><p>安装 python 3.10.6 在 <code>make</code> 编译的最后会报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">The necessary bits to build these optional modules were not found:  
_lzma                 _uuid                                      
To <span class="token function">find</span> the necessary bits, <span class="token function">look</span> <span class="token keyword">in</span> setup.py <span class="token keyword">in</span> detect_modules<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> the module's name.  
  
  
The following modules found by detect_modules<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> setup.py, have been  
built by the Makefile instead, as configured by the Setup files:  
_abc                  <span class="token builtin class-name">pwd</span>                   <span class="token function">time</span>                 
  
  
Failed to build these modules:  
_hashlib              _ssl                                       
  
  
Could not build the ssl module<span class="token operator">!</span>  
Python requires a OpenSSL <span class="token number">1.1</span>.1 or newer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>原因在于 python 3.10 依赖的 OpenSSL 必须要是 1.1.1 之后的版本，或者安装了 2.6.4 之后的 libressl，linux 自带的 OpenSSL 版本过低，同时还显示缺少 <code>_lzma</code> 和 <code>_uuid</code></p><hr><h4 id="编译安装-OpenSSL-1-1-1n"><a href="#编译安装-OpenSSL-1-1-1n" class="headerlink" title="编译安装 OpenSSL 1.1.1n"></a>编译安装 <code>OpenSSL 1.1.1n</code></h4><p>下载：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cub3BlbnNzbC5vcmcvc291cmNlL29wZW5zc2wtMS4xLjFuLnRhci5neg==" title="https://www.openssl.org/source/openssl-1.1.1n.tar.gz">https://www.openssl.org/source/openssl-1.1.1n.tar.gz</a></p><p>解压并编译：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">wget</span> https://www.openssl.org/source/openssl-1.1.1n.tar.gz
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> openssl-1.1.1n.tar.gz
<span class="token builtin class-name">cd</span> openssl-1.1.1n

<span class="token function">sudo</span> ./config <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/openssl
<span class="token function">sudo</span> <span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>修改链接文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 备份原有链接</span>
<span class="token function">sudo</span> <span class="token function">mv</span> /usr/bin/openssl /usr/bin/openssl.bak
 
<span class="token comment"># 创建软链接</span>
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-sf</span> /usr/local/openssl/bin/openssl /usr/bin/openssl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>添加路径至 <code>ld.so.conf</code>： （注意路径最后不能带 <code>'/'</code>，否则会报错）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">su</span>   <span class="token comment"># 先进入 root 账户，否则下面一条语句会报权限问题的错误</span>
<span class="token builtin class-name">echo</span> <span class="token string">"/usr/local/openssl/lib"</span> <span class="token operator">&gt;&gt;</span> /etc/ld.so.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>查看设置是否生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ldconfig <span class="token parameter variable">-v</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看 OpenSSL 版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">openssl version

<span class="token comment"># 输出：</span>
OpenSSL <span class="token number">1.1</span>.1n  <span class="token number">15</span> Mar <span class="token number">2022</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>修改 python 3.10.6 编译源文件的 <code>Setup</code> 中的链接，路径位于：<code>Python-3.10.6/Modules/Setup</code></p><p>在 <code>Setup</code> 中找到如下位置，可直接搜索 <code>'OPENSSL'</code> （大概位于第 211 行）：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Socket module helper for SSL support; you must comment out the other</span>
<span class="token comment"># socket line above, and edit the OPENSSL variable:</span>
 <span class="token assign-left variable">OPENSSL</span><span class="token operator">=</span>/usr/local/openssl
 _ssl _ssl.c <span class="token punctuation">\</span>
     -I<span class="token variable"><span class="token variable">$(</span>OPENSSL<span class="token variable">)</span></span>/include -L<span class="token variable"><span class="token variable">$(</span>OPENSSL<span class="token variable">)</span></span>/lib <span class="token punctuation">\</span>
     <span class="token parameter variable">-lssl</span> <span class="token parameter variable">-lcrypto</span>
<span class="token comment">#_hashlib _hashopenssl.c \</span>
<span class="token comment">#     -I$(OPENSSL)/include -L$(OPENSSL)/lib \</span>
<span class="token comment">#     -lcrypto</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>将中间这四句取消注释，并<strong>将 OpenSSL 的安装路径填入 <code>OPENSSL=</code> 后面</strong> <em>（其他地方都不需要改动，可能 Setup 的内容有些区别，以自己的为主）</em>：</p><p>保存 <code>Setup</code> 文件</p><hr><h4 id="安装-lzma-和-uuid"><a href="#安装-lzma-和-uuid" class="headerlink" title="安装 _lzma 和 _uuid"></a>安装 <code>_lzma</code> 和 <code>_uuid</code></h4><p>直接一次性安装全部：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> uuid-dev libbz2-dev libncurses5-dev libgdbm-dev liblzma-dev sqlite3 libsqlite3-dev openssl libssl-dev tcl8.6-dev tk8.6-dev libreadline-dev zlib1g-dev libffi-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h4 id="再次编译安装-python"><a href="#再次编译安装-python" class="headerlink" title="再次编译安装 python"></a>再次编译安装 python</h4><p>最后，重新编译安装 python 3.10.6：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> Python-3.10.6

<span class="token comment"># --prefix 指定安装的目录，我这里安装在 /usr/local/python3.10.6 下</span>
<span class="token comment"># --enable-optimizations 对编译结果进行优化，提高运行效率</span>
<span class="token function">sudo</span> ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/python3.10.6 --enable-optimizations

<span class="token function">sudo</span> <span class="token function">make</span>

<span class="token function">sudo</span> <span class="token function">make</span> altinstall<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此时 <code>make</code> 编译最后显示：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">The following modules found by detect_modules<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">in</span> setup.py, have been
built by the Makefile instead, as configured by the Setup files:
_abc                  _ssl                  <span class="token builtin class-name">pwd</span>                
<span class="token function">time</span>                                                           


Failed to build these modules:
_hashlib  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>_hashlib</code> 是 OpenSSL 用于支持哈希加密的模块之一，由于我们手动编译安装了 <code>OpenSSL 1.1.1n</code>，忽略即可</p><p>安装完后，终端输入 <code>python3.10</code> 即可打开 python3.10.6 的界面</p><p>pip3 也会自动安装好：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA8.png" alt="Linux虚拟机CTF环境搭建8.png"></p><p>如果出现：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: The script pip3.10 is installed <span class="token keyword">in</span> <span class="token string">'/usr/local/python3.10.6/bin'</span> <span class="token function">which</span> is not on <span class="token environment constant">PATH</span><span class="token builtin class-name">.</span>
Consider adding this directory to <span class="token environment constant">PATH</span> or, <span class="token keyword">if</span> you prefer to suppress this warning, use --no-warn-script-location.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解决办法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 注意, PATH 的内容要与上述 WARNING 中的路径一致</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export PATH=/usr/local/python3.10.6/bin:$PATH'</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc
<span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>验证安装：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA9.png" alt="Linux虚拟机CTF环境搭建9.png"></p><p>查看安装路径：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA13.png" alt="Linux虚拟机CTF环境搭建13.png"></p><p>防止后续安装 Pwntools 时发生报错，还需要在 <code>/usr/local/python3.10.6</code>（以自己实际安装路径为主）下建立一个 pip 的软连接：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.10.6/bin/pip3.10 /usr/local/python3.10.6/bin/pip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>同时，此时 <code>python3.10</code> 和 <code>pip3.10</code> 是不可以在 <code>sudo</code> 下运行的，加入软链接：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.10.6/bin/python3.10 /usr/bin/python3.10
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.10.6/bin/pip3.10 /usr/bin/pip3.10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>到此，大功告成！完美！</p><hr><h3 id="设置默认-python-和-pip-版本"><a href="#设置默认-python-和-pip-版本" class="headerlink" title="设置默认 python 和 pip 版本"></a>设置默认 python 和 pip 版本</h3><blockquote><p><strong>提示：</strong><br><strong>尽量不要更改 python3 的默认版本，python3 默认指向 python 3.5，因为 Ubuntu 16.04 某些设置可能会用到 python 3.5，更改可能会出现各种奇奇怪怪的问题</strong></p></blockquote><p>设置默认 python 版本为 python 3.10.6，默认 pip 版本为 pip-22.2.1 （python 3.10.6）</p><ol><li>通过修改软连接：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 删除原有的软链接</span>
<span class="token function">sudo</span> <span class="token function">rm</span> /usr/bin/python
<span class="token function">sudo</span> <span class="token function">rm</span> /usr/bin/pip

<span class="token comment"># 设置软连接，即：/usr/bin/python -&gt; /usr/local/python3.10.6/bin/python3.10</span>
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.10.6/bin/python3.10 /usr/bin/python
<span class="token comment"># 设置软连接，即：/usr/bin/pip -&gt; /usr/local/python3.10.6/bin/pip3.10</span>
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.10.6/bin/pip3.10 /usr/bin/pip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>通过更改 <code>.bashrc</code>：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token builtin class-name">alias</span> <span class="token assign-left variable">python</span><span class="token operator">=</span>python3.10 <span class="token operator">&gt;&gt;</span> ~/.bashrc
<span class="token builtin class-name">echo</span> <span class="token builtin class-name">alias</span> <span class="token assign-left variable">pip</span><span class="token operator">=</span>pip3.10 <span class="token operator">&gt;&gt;</span> ~/.bashrc
<span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：<code>/usr/local/python3.10.6</code> 这个地址是安装后 python 3.10.6 的路径，视自己的情况而定</p><p>python 3.10.6 的路径可以通过 <code>which python3.10</code> 来查看</p></blockquote><hr><h2 id="安装-python-3-9-及以下版本"><a href="#安装-python-3-9-及以下版本" class="headerlink" title="安装 python 3.9 及以下版本"></a>安装 python 3.9 及以下版本</h2><blockquote><p>以 python 3.9.13 为例，这个版本就没有 python 3.10 那么麻烦了</p></blockquote><p>安装相关库：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libffi-dev build-essential python-dev python-setuptools python-pip python-smbus build-essential libncursesw5-dev libgdbm-dev libc6-dev zlib1g-dev libsqlite3-dev tk-dev libssl-dev openssl libxpm-dev libxext-dev zlib1g-dev libbz2-dev libssl-dev libncurses5-dev libsqlite3-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>安装依赖：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> build-essential zlib1g-dev libncurses5-dev libgdbm-dev libnss3-dev libssl-dev libreadline-dev libffi-dev <span class="token function">wget</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> uuid-dev libbz2-dev libncurses5-dev libgdbm-dev liblzma-dev sqlite3 libsqlite3-dev openssl libssl-dev tcl8.6-dev tk8.6-dev libreadline-dev zlib1g-dev libffi-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下载：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9mdHAvcHl0aG9uLzMuOS4xMy9QeXRob24tMy45LjEzLnRneg==">Python Release Python 3.9.13 | Python.org</a></p><p>解压并编译安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> Python-3.9.13.tgz
<span class="token builtin class-name">cd</span> Python-3.9.13

<span class="token comment"># --prefix 指定安装的目录，我这里安装在 /usr/local/python3.9 下</span>
<span class="token comment"># --with-pydebug 添加调试工具</span>
<span class="token comment"># --enable-optimizations 对编译结果进行优化，提高运行效率</span>
<span class="token function">sudo</span> ./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/python3.9 --with-pydebug --enable-optimizations

<span class="token function">sudo</span> <span class="token function">make</span>

<span class="token function">sudo</span> <span class="token function">make</span> altinstall<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>配置 python 3.9.13 和 pip 3.9：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.9/bin/python3.9  /usr/bin/python3.9
$ <span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3.9/bin/pip3.9  /usr/bin/pip3.9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>如果出现：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">The directory <span class="token string">'/home/wyy/.cache/pip/http'</span> or its parent directory is not owned by the current user and the cache has been disabled. Please check the permissions and owner of that directory. If executing pip with sudo, you may want <span class="token function">sudo</span><span class="token string">'s -H flag.
The directory '</span>/home/wyy/.cache/pip<span class="token string">' or its parent directory is not owned by the current user and caching wheels has been disabled. check the permissions and owner of that directory. If executing pip with sudo, you may want sudo'</span>s <span class="token parameter variable">-H</span> flag.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解决办法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 注意修改为自己的用户名</span>
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> root /home/wyy/.cache/pip/
<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token parameter variable">-R</span> root /home/wyy/.cache/pip/http/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><hr><h2 id="管理多个版本的-Python"><a href="#管理多个版本的-Python" class="headerlink" title="管理多个版本的 Python"></a>管理多个版本的 Python</h2><blockquote><p>使用 <code>update-alternatives</code> 来切换终端中 <code>python</code> 指令所对应的 python 版本</p></blockquote><p>示例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> update-alternatives <span class="token parameter variable">--install</span> /usr/bin/python python /usr/bin/python2.7 <span class="token number">1</span>
<span class="token function">sudo</span> update-alternatives <span class="token parameter variable">--install</span> /usr/bin/python python /usr/bin/python3.5 <span class="token number">2</span>
<span class="token function">sudo</span> update-alternatives <span class="token parameter variable">--install</span> /usr/bin/python python /usr/local/python3.9/bin/python3.9 <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>最后数字为对应 python 版本优先级，数值越大，优先级越高</p><p>快速切换 python 版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> update-alternatives <span class="token parameter variable">--config</span> python<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输出：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">有 <span class="token number">3</span> 个候选项可用于替换 python <span class="token punctuation">(</span>提供 /usr/bin/python<span class="token punctuation">)</span>。

  选择       路径                              优先级  状态
------------------------------------------------------------
* <span class="token number">0</span>            /usr/local/python3.9/bin/python3.9   <span class="token number">3</span>         自动模式
  <span class="token number">1</span>            /usr/bin/python2.7                   <span class="token number">1</span>         手动模式
  <span class="token number">2</span>            /usr/bin/python3.5                   <span class="token number">2</span>         手动模式
  <span class="token number">3</span>            /usr/local/python3.9/bin/python3.9   <span class="token number">3</span>         手动模式

要维持当前值<span class="token punctuation">[</span>*<span class="token punctuation">]</span>请按<span class="token operator">&lt;</span>回车键<span class="token operator">&gt;</span>，或者键入选择的编号：<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>选择需要切换的 python 版本即可</p><hr><h1 id="安装-Anaconda"><a href="#安装-Anaconda" class="headerlink" title="安装 Anaconda"></a>安装 Anaconda</h1><blockquote><p>python 项目的神器（尤其是论文实验），可以配合 Pycharm 使用，不用再为项目中千奇百怪的 python 版本而烦恼了</p></blockquote><p>官网下载安装脚本即可：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9yZXBvLmFuYWNvbmRhLmNvbS9hcmNoaXZlLw==">https://repo.anaconda.com/archive/</a></p><p>安装简单，参考这篇文章即可，写的很详细：<a target="_blank" rel="noopener" href="https://blog.csdn.net/wyf2017/article/details/118676765">如何在Linux服务器上安装Anaconda（超详细） linux安装anconda-CSDN博客</a></p><p>查看当前 conda 配置：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config <span class="token parameter variable">--show</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>添加清华源，提高下载速度：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config <span class="token parameter variable">--add</span> channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config <span class="token parameter variable">--set</span> show_channel_urls <span class="token function">yes</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>创建新的 conda 环境：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda create <span class="token parameter variable">-n</span> 环境名称 <span class="token assign-left variable">python</span><span class="token operator">=</span>python版本 需要安装的python库 <span class="token parameter variable">-y</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看已有的 conda 环境：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda <span class="token function">env</span> list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>激活 conda 环境：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda activate 环境名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除 conda 环境：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda remove <span class="token parameter variable">--name</span> 环境名称 <span class="token parameter variable">--all</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>注意：</p><p>如果设置过默认 python 版本，例如：<code>sudo ln -s /usr/bin/python3.10 /usr/bin/python</code>，有可能在 conda 环境中 python 指向的是默认版本，而不是 conda 环境设置的版本</p><p>可以使用如下命令取消设置的默认 python 版本：<code>sudo unlink /usr/bin/python</code>，但是更推荐下面的方法</p><p>也可以临时设置环境变量：<code>export PATH=~/anaconda3/envs/环境名称/bin:$PATH</code>（具体请根据自己实际的环境路径来设置，可以通过 <code>conda env list</code> 来查看）</p></blockquote><hr><h1 id="Java-配置"><a href="#Java-配置" class="headerlink" title="Java 配置"></a>Java 配置</h1><blockquote><p><code>open-jdk</code> 和 <code>oracle-jdk</code> 选其一即可，<code>oracle-jdk</code> 相对来说更稳定一点</p></blockquote><h2 id="安装-open-jdk"><a href="#安装-open-jdk" class="headerlink" title="安装 open-jdk"></a>安装 open-jdk</h2><p>查找 open-jdk 版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> search openjdk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>以安装 open-jdk 8 为例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openjdk-8-jdk

<span class="token comment"># 验证</span>
<span class="token function">java</span> <span class="token parameter variable">-version</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>查看已安装的 open-jdk 版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt</span> list <span class="token parameter variable">--installed</span> <span class="token operator">|</span> <span class="token function">grep</span> openjdk

<span class="token comment"># 显示：</span>
<span class="token comment"># openjdk-11-jdk-headless/jammy-updates,jammy-security,now 11.0.20.1+1-0ubuntu1~22.04 amd64 [已安装，自动]</span>
<span class="token comment"># openjdk-11-jdk/jammy-updates,jammy-security,now 11.0.20.1+1-0ubuntu1~22.04 amd64 [已安装]</span>
<span class="token comment"># openjdk-11-jre-headless/jammy-updates,jammy-security,now 11.0.20.1+1-0ubuntu1~22.04 amd64 [已安装，自动]</span>
<span class="token comment"># openjdk-11-jre/jammy-updates,jammy-security,now 11.0.20.1+1-0ubuntu1~22.04 amd64 [已安装，自动]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>卸载 open-jdk，以 open-jdk 11 为例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">--purge</span> remove openjdk-11-jdk
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">--purge</span> remove openjdk-11-jdk-headless
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">--purge</span> remove openjdk-11-jre
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token parameter variable">--purge</span> remove openjdk-11-jre-headless<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>可以同时使用 apt 安装多个版本的 open-jdk，然后使用如下命令切换 jdk 版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 如果我们只用 apt 安装过一个版本的 java，会显示无需配置</span>
<span class="token function">sudo</span> update-alternatives <span class="token parameter variable">--config</span> <span class="token function">java</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="安装-oracle-jdk"><a href="#安装-oracle-jdk" class="headerlink" title="安装 oracle-jdk"></a>安装 oracle-jdk</h2><p>官网下载 jdk 压缩包：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cub3JhY2xlLmNvbS9qYXZhL3RlY2hub2xvZ2llcy9kb3dubG9hZHMv">Java Downloads | Oracle</a></p><p>以 oracle-jdk 8 为例，下载 <a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cub3JhY2xlLmNvbS93ZWJhcHBzL3JlZGlyZWN0L3NpZ25vbj9uZXh0dXJsPWh0dHBzOi8vZG93bmxvYWQub3JhY2xlLmNvbS9vdG4vamF2YS9qZGsvOHUzODEtYjA5LzhjODc2NTQ3MTEzYzRlNGFhYjNjODY4ZTllMGVjNTcyL2pkay04dTM4MS1saW51eC14NjQudGFyLmd6">jdk-8u381-linux-x64.tar.gz</a></p><p>解压并移动到 <code>/usr/bin</code> 目录下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> vxf jdk-8u381-linux-x64.tar.gz
<span class="token function">sudo</span> <span class="token function">mv</span> jdk1.8.0_381 <span class="token function">java</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">mv</span> <span class="token function">java</span> /usr/bin/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>配置环境变量：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/usr/bin/java
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar

<span class="token comment"># 验证</span>
<span class="token function">java</span> <span class="token parameter variable">-version</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>卸载只需删除 <code>/usr/bin/java</code> 目录即可</p><hr><h1 id="CTF-配置"><a href="#CTF-配置" class="headerlink" title="CTF 配置"></a>CTF 配置</h1><blockquote><p>回归正题，可以开始安装 CTF 所需要的环境了</p></blockquote><h2 id="安装-git"><a href="#安装-git" class="headerlink" title="安装 git"></a>安装 git</h2><blockquote><p>迟早要用到的</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>如果发现有时候网不行，github 项目 git 不下来或者 wget 不下来，无法连接，尝试 cdn 加速：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> url.<span class="token string">"https://ghproxy.com/https://github.com"</span>.insteadOf <span class="token string">"https://github.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果不想使用了，通过：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--edit</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除掉对应的配置即可</p><blockquote><p><strong>注意：官方是没有提供 cdn 的，因此上面的 cdn 链接都是用爱发电，可能某天就无法使用了</strong></p></blockquote><ul><li>也可以对 github.com 添加代理：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> http.https://github.com.proxy socks5://127.0.0.1:7890<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果不想使用了，通过：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> http.https://github.com.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>取消代理即可</p><hr><h2 id="安装-32-位库"><a href="#安装-32-位库" class="headerlink" title="安装 32 位库"></a>安装 32 位库</h2><blockquote><p>运行 32 位的 ELF 可执行文件时需要</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> dpkg --add-architecture i386
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libncurses5-dev lib32z1
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> libc6:i386 libstdc++6:i386<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="安装-Capstone"><a href="#安装-Capstone" class="headerlink" title="安装 Capstone"></a>安装 Capstone</h2><blockquote><p>一个轻量级的多平台架构支持的反汇编架构</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/aquynh/capstone /opt/capstone
<span class="token builtin class-name">cd</span> /opt/capstone
<span class="token function">sudo</span> <span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="安装-pwntools"><a href="#安装-pwntools" class="headerlink" title="安装 pwntools"></a>安装 pwntools</h2><blockquote><p>通过 pip 安装或通过 git 安装，两种方法都可以，选其一即可</p></blockquote><ul><li>通过 python 的 pip 安装</li></ul><p><strong>需要注意使用哪个版本的 python 的 pip 来安装</strong></p><p>如果安装了新版的 python，例如 python 3.10.6，那就需要将 <code>python</code> 修改为默认指向 python 3.10.6，因为 Ubuntu 16.04 中 <code>python</code> 默认指向 python 2.7</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> pwntools

<span class="token comment"># 或者直接安装pwn库，自带pwntools</span>
<span class="token function">sudo</span> python <span class="token parameter variable">-m</span> pip <span class="token function">install</span> pwn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>或者直接：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3.10 <span class="token function">install</span> pwntools

<span class="token comment"># 或者直接安装pwn库，自带pwntools</span>
pip3.10 <span class="token function">install</span> pwn<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：<br>如果坚持使用系统自带的 python 3.5 来安装 pwntools 的话</p><p>因为 pip 默认版本只有 8，是无法直接安装 pwntools 的，报错<br>直接使用 <code>pip3 install --upgrade pip</code> 更新 pip 的话，会将 pip 更新到最新版，导致与 python 3.5 不匹配，报错</p><p>解决方法：<br>首先下载 python 3.5 的 <code>get-pip.py</code> 并进行 pip 更新<br>如果 wget 下载太慢，建议直接访问 <a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9ib290c3RyYXAucHlwYS5pby9waXAvMy41Lw==">https://bootstrap.pypa.io/pip/3.5/</a> 用科学上网进行下载<br>在进行 <code>python3.5 get-pip.py</code> 之前，请先更换 pip 源，否则会很痛苦</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://bootstrap.pypa.io/pip/3.5/get-pip.py  
python3.5 get-pip.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样会安装好 python 3.5 所支持的最新版 pip：pip-20.3.4</p><p>但在通过 pip 安装 pwntools 时，可能会报错：<code>ERROR: Failed building wheel for cffi</code></p><p>解决办法：<br>先安装 cffi 所需要的依赖：<code>sudo apt install libffi-dev</code><br>然后即可正常安装：<code>pip3 install pwntools -i https://pypi.tuna.tsinghua.edu.cn/simple</code></p><p><mark>建议还是直接安装 python 3.10 使用</mark></p></blockquote><ul><li>通过 git 安装</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/Gallopsled/pwntools /opt/pwntools
<span class="token builtin class-name">cd</span> /opt/pwntools
<span class="token function">sudo</span> python setup.py <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>因为我没用这种方法，如果报错的话，请参照 GDB 配置一节中安装 pwndbg 的方法，去 <a target="_blank" rel="noopener" href="https://github.com/Gallopsled/pwntools">Gallopsled/pwntools: CTF framework and exploit development library (github.com)</a> 手动下载一个旧版本的 pwntools，然后编译安装</p><ul><li>验证安装</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python <span class="token comment"># 打开python</span>

<span class="token comment"># 输入下面的代码，Ⅰ或Ⅱ选其一即可</span>
-------------------------------------------
<span class="token comment"># Ⅰ</span>
<span class="token function">import</span> pwn
pwn.asm<span class="token punctuation">(</span><span class="token string">"xor eax,eax"</span><span class="token punctuation">)</span>
-------------------------------------------
<span class="token comment"># Ⅱ</span>
from pwn <span class="token function">import</span> *
asm<span class="token punctuation">(</span><span class="token string">"xor eax,eax"</span><span class="token punctuation">)</span>
-------------------------------------------
<span class="token comment"># 如果输出的是这个，那就是安装成功了</span>
输出：<span class="token string">'1\xc0'</span>
-------------------------------------------<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="安装-LibcSearcher"><a href="#安装-LibcSearcher" class="headerlink" title="安装 LibcSearcher"></a>安装 LibcSearcher</h2><blockquote><p>在做栈溢出相关的题时，经常会遇到构造 ROP 链的情况。若我们在 IDA 反编译之后没有看到 system 函数，栈题大概率需要泄漏 libc 库中的函数。此时，LibcSearcher 就是最好的选择，可以用它找到偏移地址</p></blockquote><p><strong>需要注意使用哪个版本的 python 的 pip 来安装</strong></p><p>如果安装了新版的 python，例如 python 3.10.6，那就需要将 <code>python</code> 修改为默认指向 python 3.10.6，因为 Ubuntu 16.04 中 <code>python</code> 默认指向 python 2.7</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> LibcSearcher <span class="token parameter variable">-i</span> http://mirrors.aliyun.com/pypi/simple/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><mark>Ubuntu 16.04 的 pip 使用清华源可能会出现 SSL 错误，建议使用阿里源：<code>http://mirrors.aliyun.com/pypi/simple/</code></mark></p><blockquote><p><strong>注意</strong>：<br>网上有很多通过 git 来安装的 <code>LibcSearcher</code> 在使用的时候会出现 “<code>libcsearcher No matched libc, please add more libc or try others</code>“ 的报错，通过 git 安装的那个版本可能不支持 python3，或者不是云端查找</p><p>我自己当初就是通过 git 安装，然后踩坑了，网上一大堆说删了 <code>Libcdatabase</code> 重新下载、通过 <code>./get</code> 更新的方法，但都行不通。。。</p></blockquote><hr><h2 id="安装-checksec"><a href="#安装-checksec" class="headerlink" title="安装 checksec"></a>安装 checksec</h2><blockquote><p>checksec 可用于识别二进制文件的安全属性，只是一个 sh 脚本，<mark>安装 pwntools 时自带，如果没有或者出现问题的话可以再手动安装</mark></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/slimm609/checksec.sh.git /opt/checksec.sh
<span class="token builtin class-name">cd</span> /opt/checksec.sh

<span class="token comment"># 直接创建软链接即可使用,</span>
<span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /opt/checksec.sh/checksec /usr/local/bin/checksec<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意：<em>创建软连接的指令中，两个路径都必须使用绝对路径</em>，否则会报如下错误：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">符号连接的层数过多: checksec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果使用 checksec 过程中出现如下报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">command</span> not found: checksec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可尝试使用上述方法通过 git 仓库创建软链接进行修复</p><p>当然还可以直接重装 pwntools，因为 checksec 一般是安装 pwntools 自带的，报错大概率与 pwntools 有关：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip uninstall pwntools
pip <span class="token function">install</span> pwntools<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="安装-ROPgadget"><a href="#安装-ROPgadget" class="headerlink" title="安装 ROPgadget"></a>安装 ROPgadget</h2><blockquote><p>用来找 gadget 的，<mark>这个安装 pwntools 时自带，如果没有的话可以再手动安装</mark></p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/JonathanSalwan/ROPgadget.git /opt/ROPgadget
<span class="token builtin class-name">cd</span> /opt/ROPgadget
<span class="token function">sudo</span> python setup.py <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>如果使用 ROPgadget 过程中出现如下报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"/usr/local/bin/ROPgadget"</span>, line <span class="token number">4</span>, <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
    __import__<span class="token punctuation">(</span><span class="token string">'pkg_resources'</span><span class="token punctuation">)</span>.run_script<span class="token punctuation">(</span><span class="token string">'ROPGadget==7.3'</span>, <span class="token string">'ROPgadget'</span><span class="token punctuation">)</span>
  File <span class="token string">"/home/wyy/.local/lib/python3.10/site-packages/pkg_resources/__init__.py"</span>, line <span class="token number">720</span>, <span class="token keyword">in</span> run_script
    self.require<span class="token punctuation">(</span>requires<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>.run_script<span class="token punctuation">(</span>script_name, ns<span class="token punctuation">)</span>
  File <span class="token string">"/home/wyy/.local/lib/python3.10/site-packages/pkg_resources/__init__.py"</span>, line <span class="token number">1546</span>, <span class="token keyword">in</span> run_script
    raise ResolutionError<span class="token punctuation">(</span>
pkg_resources.ResolutionError: Script <span class="token string">'scripts/ROPgadget'</span> not found <span class="token keyword">in</span> metadata at <span class="token string">'/home/wyy/.local/lib/python3.10/site-packages/ROPGadget-7.3.dist-info'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>无论是 pwntools 自带的 ROPgadget 还是自己手动 git 安装的 ROPgadget，都将 ROPgadget 的 git 仓库下的 <code>scripts</code> 目录移动到<strong>报错的路径</strong>下即可</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 如果是 pwntools 自带的 ROPgadget, 首先需要将 ROPgadget 仓库 git 到本地</span>
<span class="token comment"># sudo git clone https://github.com/JonathanSalwan/ROPgadget.git /opt/ROPgadget</span>

<span class="token builtin class-name">cd</span> /opt/ROPgadget
<span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-r</span> scripts /home/wyy/.local/lib/python3.10/site-packages/ROPGadget-7.3.dist-info<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>也可以尝试查看 ROPgadget 的版本，并卸载重装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip list <span class="token operator">|</span> <span class="token function">grep</span> ROPgadget

pip uninstall ROPgadget
pip <span class="token function">install</span> <span class="token assign-left variable">ROPgadget</span><span class="token operator">==</span>版本号<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>重装 ROPgadget 后若因为旧版本而导致 pip 产生警告：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: Skipping /usr/local/lib/python3.11/dist-packages/ROPGadget-7.2.dist-info due to invalid metadata entry <span class="token string">'name'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除该文件即可：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /usr/local/lib/python3.11/dist-packages/ROPGadget-7.2.dist-info<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="安装-one-gadget"><a href="#安装-one-gadget" class="headerlink" title="安装 one_gadget"></a>安装 one_gadget</h2><blockquote><p>one_gadget 可以用来动态查找执行 libc 动态库中的 system 执行函数，可以一步到位<br>在做相关堆题时尤为有效，用来寻找 libc 库中的 <code>execve('/bin/sh', NULL, NULL)</code> ，一个 gadget 就可以 getshell，但需要注意 one_gadget 相关限制条件</p></blockquote><p>注意：one_gadget 需要安装 ruby <strong>（ruby &lt; 2.4 会导致 one_gadget 无法安装）</strong></p><p>最好是通过添加仓库的方式安装 ruby，Ubuntu 16.04 使用 <code>sudo apt install ruby</code> 安装的 ruby &lt; 2.4</p><p>通过添加仓库安装 ruby：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 删除旧版本 ruby</span>
<span class="token function">sudo</span> <span class="token function">apt</span> purge --auto-remove ruby

<span class="token comment"># 添加仓库</span>
<span class="token function">sudo</span> add-apt-repository ppa:brightbox/ruby-ng
<span class="token function">sudo</span> <span class="token function">apt</span> update

<span class="token comment"># 指定 ruby 2.6 版本</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ruby2.6 ruby2.6-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>安装 one_gadget：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gem <span class="token function">install</span> one_gadget<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="安装-glibc-all-in-one"><a href="#安装-glibc-all-in-one" class="headerlink" title="安装 glibc-all-in-one"></a>安装 glibc-all-in-one</h2><blockquote><p>在做堆题时，经常遇到不同版本的 libc，这时 glibc-all-in-one 可以很好的派上用场，动态更改 elf 文件 libc 版本</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/matrix1001/glibc-all-in-one.git /opt/glibc-all-in-one
<span class="token builtin class-name">cd</span> /opt/glibc-all-in-one
./update_list   <span class="token comment"># 获取可以更新的 glibc 的版本</span>
<span class="token function">cat</span> list   <span class="token comment"># 查看可下载的 glibc</span>
./download 需要的libc版本   <span class="token comment"># 例如：2.31-0ubuntu9_amd64</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>默认下载到 glibc-all-in-one 的 <code>/libs</code> 目录下</p><p>如果运行 <code>./update_list</code> 报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">requests.exceptions.ProxyError: HTTPSConnectionPool<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'mirror.tuna.tsinghua.edu.cn'</span>, <span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">443</span><span class="token punctuation">)</span>: Max retries exceeded with url: /ubuntu/pool/main/g/glibc/ <span class="token punctuation">(</span>Caused by ProxyError<span class="token punctuation">(</span><span class="token string">'Unable to connect to proxy'</span>, SSLError<span class="token punctuation">(</span>SSLEOFError<span class="token punctuation">(</span><span class="token number">8</span>, <span class="token string">'EOF occurred in violation of protocol (_ssl.c:997)'</span><span class="token punctuation">))</span><span class="token punctuation">))</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>检查 <code>urllib3</code> 库的版本：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip list <span class="token operator">|</span> <span class="token function">grep</span> urllib3
<span class="token comment"># urllib3            2.0.7</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>将 <code>urllib3</code> 库降级，即可解决：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip uninstall urllib3
pip <span class="token function">install</span> <span class="token assign-left variable">urllib3</span><span class="token operator">==</span><span class="token number">1.25</span>.11<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="安装-patchelf"><a href="#安装-patchelf" class="headerlink" title="安装 patchelf"></a>安装 patchelf</h2><blockquote><p>与 glibc-all-in-one 配合使用，可以用于更改 elf 文件 libc 版本</p></blockquote><ul><li>通过 apt 安装</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> patchelf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>源码编译安装</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/NixOS/patchelf.git /opt/patchelf
<span class="token builtin class-name">cd</span> /opt/patchelf
<span class="token function">sudo</span> ./bootstrap.sh
<span class="token function">sudo</span> ./configure
<span class="token function">sudo</span> <span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> check
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>

<span class="token comment"># 验证安装：</span>
patchelf <span class="token parameter variable">--version</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>执行 <code>sudo ./bootstrap.sh</code> 可能会报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">./bootstrap.sh: <span class="token number">2</span>: ./bootstrap.sh: autoreconf: not found<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装所需的包：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> autoconf automake libtool<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="安装-main-arena-offset"><a href="#安装-main-arena-offset" class="headerlink" title="安装 main_arena_offset"></a>安装 main_arena_offset</h2><blockquote><p>获取给定 libc 的 main_arena 偏移量</p><p>作者 <a target="_blank" rel="noopener" href="https://github.com/zarkivy">zarkivy</a> 将其集成到了 pymao 库中：<a target="_blank" rel="noopener" href="https://github.com/zarkivy/py_main_arena_offset">GitHub - zarkivy/py_main_arena_offset: Get main_arena offset of a given libc with python</a> （依赖于 objdump，请确保你的 Linux 中已安装 binutils 包）</p></blockquote><ul><li>原版</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/bash-c/main_arena_offset /opt/main_arena_offset<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>使用方法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /opt/main_arena_offset
./main_arena libc文件名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>pymao 集成版</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/IZAY01/py_main_arena_offset /opt/py_main_arena_offset
<span class="token builtin class-name">cd</span> /opt/py_main_arena_offset
<span class="token function">sudo</span> python3 setup.py develop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>使用示例：</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> pymao <span class="token keyword">import</span> <span class="token operator">*</span>

libc <span class="token operator">=</span> <span class="token string">"./libc-2.27.so"</span>
main_arena_offset <span class="token operator">=</span> gmao<span class="token punctuation">(</span>libc<span class="token punctuation">)</span>
<span class="token comment"># or main_arena_offset = get_main_arena_offset(libc)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="安装-QEMU"><a href="#安装-QEMU" class="headerlink" title="安装 QEMU"></a>安装 QEMU</h2><blockquote><p>这是 arm 的 pwn 环境，QEMU 可以用来模拟各种架构的固件的运行，前期可以不安装，但是终究是逃不过的，建议一步到位</p><p>VMware 和 Virtualbox 之类通常只能在 x86 计算机上虚拟出一个 x86 虚拟机，而 QEMU 支持在 x86 上虚拟出一个 ARM 虚拟机</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> qemu qemu-kvm virt-manager bridge-utils binfmt-support
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span>  qemu-system qemu-user-static   <span class="token comment"># 安装系统态、用户态</span>

<span class="token comment"># 安装依赖库</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc-arm-linux-gnueabi
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> qemu libncurses5-dev gcc-arm-linux-gnueabi build-essential gdb-arm-none-eabi synaptic gcc-aarch64-linux-gnu eclipse-cdt <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过 apt 方式安装的 QEMU 卸载：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 删除包和相关依赖</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> remove --auto-remove qemu*
<span class="token comment"># 删除配置文件和相关的数据文件</span>
<span class="token function">sudo</span> <span class="token function">apt-get</span> purge --auto-remove qemu*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="安装-Zsteg"><a href="#安装-Zsteg" class="headerlink" title="安装 Zsteg"></a>安装 Zsteg</h2><blockquote><p>做 MISC 需要，图像隐写神器</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gem <span class="token function">install</span> zsteg<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="安装-Basecrack"><a href="#安装-Basecrack" class="headerlink" title="安装 Basecrack"></a>安装 Basecrack</h2><blockquote><p>做 REVERSE、MISC 需要，Base 系列编码分析工具</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/mufeedvh/basecrack.git /opt/basecrack
<span class="token builtin class-name">cd</span> /opt/basecrack
pip <span class="token function">install</span> <span class="token parameter variable">-r</span> requirements.txt
python basecrack.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h1 id="升级-GDB-到-gdb-10-2"><a href="#升级-GDB-到-gdb-10-2" class="headerlink" title="升级 GDB 到 gdb-10.2"></a>升级 GDB 到 gdb-10.2</h1><blockquote><p>Ubuntu 16.4 自带的 GDB 版本太老（gdb-7.11.1），可以更新到 gdb-10.2</p><p>我尝试过安装 gdb-12.1 和 gdb-11.2，但是都会报错，估计与 python 3.5 有关 （使用 python 3.10.6 编译 GDB 依然报错），暂未解决，如果你喜欢折腾可以自己尝试一下，报错如下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA1.png" alt="Ubuntu16.04虚拟机PWN环境搭建1.png"></p><p>参考文章：</p><ol><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39153421/article/details/116753735">Ubuntu16.04升级gdb7.11升级到10.2版本_ubuntu gdb升级命令-CSDN博客</a></li><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/EJoft/article/details/123036910">Ubuntu18.04升级gdb10.2_gdb10.2.tar.gz_EJoft的博客-CSDN博客</a></li></ol></blockquote><p>下载 GDB 源码：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9mdHAuZ251Lm9yZy9nbnUvZ2RiLw==">Index of /gnu/gdb</a></p><p>这里以 gdb-10.2.tar.gz 为例</p><p>编译安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> gdb-10.2.tar.gz
<span class="token builtin class-name">cd</span> ./gdb-10.2
<span class="token function">mkdir</span> build <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> build

<span class="token function">sudo</span> <span class="token punctuation">..</span>/configure --with-python<span class="token operator">=</span>/usr/bin/python3.5 --enable-targets<span class="token operator">=</span>all
<span class="token function">sudo</span> <span class="token function">make</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里 <code>--with-python=/usr/bin/python3.5</code> 指定使用系统自带的 python 3.5 来编译 GDB</p><p>如果自己源码编译安装了新版的 Python，这里指定用新版的 Python 进行编译，编译时可能会报下列错误：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">configure: WARNING: MPFR is missing or unusable<span class="token punctuation">;</span> some features may be unavailable.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>网上说是与 Python 的 <code>distutils</code> 和 <code>dev</code> 有关，源码编译的 Python 缺少相应的 <code>python-distutils</code> 和 <code>python-dev</code></p><p>但是暂时还未解决该问题，所以建议直接使用系统自带的 python 3.5 来编译 GDB，较为稳定</p><p>编译过程很漫长，编译可能会报如下错误：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: <span class="token string">'makeinfo'</span> is missing on your system.
         You should only need it <span class="token keyword">if</span> you modified a <span class="token string">'.texi'</span> file, or
         any other <span class="token function">file</span> indirectly affecting the aspect of the manual.
         You might want to <span class="token function">install</span> the Texinfo package:
         <span class="token operator">&lt;</span>http://www.gnu.org/software/texinfo/<span class="token operator">&gt;</span>
         The spurious makeinfo call might also be the consequence of
         using a buggy <span class="token string">'make'</span> <span class="token punctuation">(</span>AIX, DU, IRIX<span class="token punctuation">)</span>, <span class="token keyword">in</span> <span class="token function">which</span> <span class="token keyword">case</span> you might
         want to <span class="token function">install</span> GNU make:
         <span class="token operator">&lt;</span>http://www.gnu.org/software/make/<span class="token operator">&gt;</span>
make<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>: *** <span class="token punctuation">[</span>gdb.info<span class="token punctuation">]</span> Error <span class="token number">127</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>安装 <code>texinfo</code> 即可：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> texinfo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>接下来，替换老版本 GDB</p><p>编译生成的新版 gdb 二进制文件一般位于编译目录 <code>gdb-10.2/build/gdb/gdb</code>，如果不在该目录下，可以使用指令查找：<code>sudo find / -name gdb</code></p><p>将 gdb 二进制文件拷贝到 <code>/usr/bin/</code> 下，替换原来的旧版 gdb，也可以先将原来的旧版 gdb 做个备份，以防出问题：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mv</span> /usr/local/bin/gdb /usr/local/bin/gdb-7.11.1.backup

<span class="token comment"># 以自己编译的新版 gdb 实际路径为主</span>
<span class="token function">sudo</span> <span class="token function">cp</span> ~/下载/gdb-10.2/build/gdb/gdb /usr/local/bin/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>运行 GDB，升级完成：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA6.png" alt="Ubuntu16.04虚拟机PWN环境搭建6.png"></p><hr><h1 id="GDB-配置"><a href="#GDB-配置" class="headerlink" title="GDB 配置"></a>GDB 配置</h1><blockquote><p><em>见 《<a href="c9687d57.html">GDB的基础和使用</a>》一文，有非常详细的介绍</em></p><p><mark>但是需要注意，Ubuntu 16.04 由于版本太老，无法直接安装最新版 <code>pwndbg</code> 和 <code>gef</code>，要自己通过旧版本安装</mark></p><p><strong>Ubuntu 16.04 安装 GDB 插件请以本文为主</strong>，<strong>设置脚本自动切换 GDB 插件可以参照《GDB的基础和使用》一文</strong></p></blockquote><h2 id="安装-peda"><a href="#安装-peda" class="headerlink" title="安装 peda"></a>安装 peda</h2><p>最新版安装方法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/longld/peda.git /opt/gdb_plugins/peda
<span class="token function">sudo</span> <span class="token builtin class-name">echo</span> <span class="token string">"source /opt/gdb_plugins/peda/peda.py"</span> <span class="token operator">&gt;&gt;</span> ~/.gdbinit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>在 Ubuntu 16.04 中使用上述方法安装，暂时没有出现问题</p></blockquote><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA9.png" alt="Ubuntu16.04虚拟机PWN环境搭建9.png"></p><hr><h2 id="安装-pwndbg"><a href="#安装-pwndbg" class="headerlink" title="安装 pwndbg"></a>安装 pwndbg</h2><blockquote><p><code>pwndbg</code> 与 <code>Pwngdb</code> 需要一起搭配使用</p></blockquote><p>最新版安装方法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/pwndbg/pwndbg /opt/gdb_plugins/pwndbg
<span class="token builtin class-name">cd</span> /opt/gdb_plugins/pwndbg
<span class="token function">sudo</span> ./setup.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>如果在 Ubuntu 16.04 这样的老版本中使用上述方法，安装过程中会报错<br>因为 python 版本太低不支持新的语法，无法安装最新的 pwndbg <em>（pwndbg 会检测 GDB 所使用的 python 版本，与 GDB 的 python 保持一致，默认是 python 3.5）</em></p><p>报错信息如下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">File <span class="token string">"/usr/local/lib/python3.5/dist-packages/pip/_internal/cli/main.py"</span>, line <span class="token number">57</span>  
sys.stderr.write<span class="token punctuation">(</span>f<span class="token string">"ERROR: {exc}"</span><span class="token punctuation">)</span>  
^  
SyntaxError: invalid syntax<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA2.png" alt="Ubuntu16.04虚拟机PWN环境搭建2.png"></p></blockquote><p>Ubuntu 16.04 需要在 <a target="_blank" rel="noopener" href="https://github.com/pwndbg/pwndbg">https://github.com/pwndbg/pwndbg</a> 中下载旧版本的源码</p><p>比如 2021 版的 pwndbg 就可以正常使用：<a target="_blank" rel="noopener" href="https://github.com/pwndbg/pwndbg/tree/2021.06.22">pwndbg/pwndbg at 2021.06.22 (github.com)</a> （实测 <code>pwndbg-2022.01.05</code> 版也可以）</p><p>然后解压移动到 <code>/opt/gdb_plugins/</code> 目录下，在 <code>/opt/gdb_plugins/pwndbg-2021.06.22</code> 目录下使用：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> ./setup.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装过程中会报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">+ <span class="token function">git</span> submodule update <span class="token parameter variable">--init</span> <span class="token parameter variable">--recursive</span>
fatal: Not a <span class="token function">git</span> repository <span class="token punctuation">(</span>or any of the parent directories<span class="token punctuation">)</span>: .git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>在当前目录下初始化 git 再重新安装即可：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="安装-Pwngdb"><a href="#安装-Pwngdb" class="headerlink" title="安装 Pwngdb"></a>安装 Pwngdb</h3><p>安装方法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/scwuaptx/Pwngdb.git /opt/gdb_plugins/Pwngdb
<span class="token builtin class-name">cd</span> /opt/gdb_plugins/Pwngdb
<span class="token function">sudo</span> <span class="token function">cp</span> .gdbinit ~/
<span class="token function">sudo</span> <span class="token function">vim</span> ~/.gdbinit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在 <code>~/.gdbinit</code> 的第二行插入：（记得插入在 <code>source /opt/gdb_plugins/Pwngdb/pwngdb.py</code> 这一句的前面）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> /opt/gdb_plugins/pwndbg-2021.06.22/gdbinit.py<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果 pwndbg 的路径不是 <code>/opt/gdb_plugins/pwndbg-2021.06.22</code>，请按照自己的实际路径修改</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA8.png" alt="Ubuntu16.04虚拟机PWN环境搭建8.png"></p><hr><h3 id="配置-pwndbg-分屏调试"><a href="#配置-pwndbg-分屏调试" class="headerlink" title="配置 pwndbg 分屏调试"></a>配置 pwndbg 分屏调试</h3><blockquote><p>由于 pwndbg 输出的信息较多，经常在一页上看不全，需要上下翻找，眼花缭乱</p><p>我们可以设置 pwndbg 分屏调试，一边屏幕输入命令，一边屏幕查看输出信息，提高效率</p></blockquote><h4 id="方法一：修改-gdbinit"><a href="#方法一：修改-gdbinit" class="headerlink" title="方法一：修改 gdbinit"></a>方法一：修改 gdbinit</h4><p>配置很简单，先后打开两个终端</p><p>假设先打开的一个终端用于开启 gdb 调试并输入调试命令，后打开的一个终端用于输出调试信息</p><p>在两个终端分别输入 <code>tty</code>，先打开的终端为 <code>/dev/pts/19</code>，后打开的为 <code>/dev/pts/20</code> <em>（以自己的实际输出信息为主）</em></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/GDB%E7%9A%84%E5%9F%BA%E7%A1%80%E5%92%8C%E4%BD%BF%E7%94%A82.png" alt="GDB的基础和使用2.png"></p><p>修改 <code>~/.gdbinit</code> 中的内容：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.gdbinit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 <code>~/.gdbinit</code> 末尾加入一句：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> context-output xxx

<span class="token comment"># 这里的 xxx 就是用于输出调试信息的分屏，我这里是：/dev/pts/20</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><mark>注意：如果你开了多个终端，就设置为实际想要用于输出调试信息的分屏</mark></p><p>保存退出</p><p>在先打开的终端中开启 gdb 并输入调试命令，在后打开的终端中即可输出调试信息</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/GDB%E7%9A%84%E5%9F%BA%E7%A1%80%E5%92%8C%E4%BD%BF%E7%94%A83.png" alt="GDB的基础和使用3.png"></p><p>然后我们将屏幕调整一下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/GDB%E7%9A%84%E5%9F%BA%E7%A1%80%E5%92%8C%E4%BD%BF%E7%94%A84.png" alt="GDB的基础和使用4.png"></p><blockquote><p>设置分屏后，如果只开启一个终端，使用 gdb 可能会遇到如下报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Exception occurred: context: <span class="token punctuation">[</span>Errno <span class="token number">13</span><span class="token punctuation">]</span> 权限不够: <span class="token string">'/dev/pts/20'</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>class <span class="token string">'PermissionError'</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>  
For <span class="token function">more</span> info invoke <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">set</span> exception-verbose on<span class="token variable">`</span></span> and rerun the <span class="token builtin class-name">command</span>  
or debug it by yourself with <span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">set</span> exception-debugger on<span class="token variable">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>再开启一个终端即可解决 （新开启的终端需为 /dev/pts/20）</p></blockquote><hr><h4 id="方法二：gdb-临时设置"><a href="#方法二：gdb-临时设置" class="headerlink" title="方法二：gdb 临时设置"></a>方法二：gdb 临时设置</h4><p>由于有时候新开启的终端并不是我们在 <code>~/.gdbinit</code> 中设置的那个终端，频繁更改 <code>~/.gdbinit</code> 中的内容未免太过麻烦</p><p>所以，我们也可以不在 <code>~/.gdbinit</code> 中设置，而是先在一个终端中启动 gdb 调试，然后再另开一个新的终端，使用 <code>tty</code> 查看新的终端的分屏信息：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tty</span>

<span class="token comment"># 假设输出为：/dev/pts/18</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>然后在 gdb 中直接设置输出调试信息的分屏： （以自己上一步实际的分屏信息为主）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>gdb<span class="token punctuation">)</span> <span class="token builtin class-name">set</span> context-output /dev/pts/18<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这样就可以避免新打开的终端与我们在 <code>~/.gdbinit</code> 中设置的终端不一致的问题</p><hr><h2 id="安装-gef"><a href="#安装-gef" class="headerlink" title="安装 gef"></a>安装 gef</h2><p>最新版安装方法：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/hugsy/gef /opt/gdb_plugins/gef
<span class="token function">sudo</span> <span class="token builtin class-name">echo</span> <span class="token string">"source /opt/gdb_plugins/gef/gef.py"</span> <span class="token operator">&gt;&gt;</span> ~/.gdbinit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>如果在 Ubuntu 16.04 这样的老版本中使用上述方法，打开 gdb 会报错</p><p>与 pwndbg 一样，是因为 python 版本太低不支持新的语法，无法安装最新的 gef</p></blockquote><p>Ubuntu 16.04 需要在 <a target="_blank" rel="noopener" href="https://github.com/hugsy/gef">https://github.com/hugsy/gef</a> 中下载旧版本的源码</p><p>比如 2021 版的 gef 就可以正常使用：<a target="_blank" rel="noopener" href="https://github.com/hugsy/gef/releases/tag/2021.10">Release 2021.10 - Royal Kill · hugsy/gef (github.com)</a></p><p>然后解压移动到 <code>/opt/gdb_plugins/</code> 目录下，在 <code>/opt/gdb_plugins/gef-2021.10</code> 目录下使用：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token builtin class-name">echo</span> <span class="token string">"source /opt/gdb_plugins/gef-2021.10/gef.py"</span> <span class="token operator">&gt;&gt;</span> ~/.gdbinit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>打开 gdb 后如果 <code>gef</code> 显示：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>*<span class="token punctuation">]</span> <span class="token number">3</span> <span class="token builtin class-name">command</span> could not be loaded, run <span class="token variable"><span class="token variable">`</span>gef missing<span class="token variable">`</span></span> to know why.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>输入 <code>gef missing</code> 查看缺失的库</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>*<span class="token punctuation">]</span> Command <span class="token variable"><span class="token variable">`</span>set-permission<span class="token variable">`</span></span> is missing, reason  →  Missing <span class="token variable"><span class="token variable">`</span>keystone-engine<span class="token variable">`</span></span> package, <span class="token function">install</span> with: <span class="token variable"><span class="token variable">`</span>pip <span class="token function">install</span> keystone-engine<span class="token variable">`</span></span><span class="token builtin class-name">.</span>
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Command <span class="token variable"><span class="token variable">`</span>ropper<span class="token variable">`</span></span> is missing, reason  →  Missing <span class="token variable"><span class="token variable">`</span>ropper<span class="token variable">`</span></span> package <span class="token keyword">for</span> Python, <span class="token function">install</span> with: <span class="token variable"><span class="token variable">`</span>pip <span class="token function">install</span> ropper<span class="token variable">`</span></span><span class="token builtin class-name">.</span>
<span class="token punctuation">[</span>*<span class="token punctuation">]</span> Command <span class="token variable"><span class="token variable">`</span>assemble<span class="token variable">`</span></span> is missing, reason  →  Missing <span class="token variable"><span class="token variable">`</span>keystone-engine<span class="token variable">`</span></span> package <span class="token keyword">for</span> Python, <span class="token function">install</span> with: <span class="token variable"><span class="token variable">`</span>pip <span class="token function">install</span> keystone-engine<span class="token variable">`</span></span><span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>使用 pip 安装对应的库即可</p><p><strong>注意要用 GDB 所使用的 python 版本对应的 pip 来安装，Ubuntu 16.04 的 GDB 默认使用 python 3.5</strong></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA7.png" alt="Ubuntu16.04虚拟机PWN环境搭建7.png"></p><hr><h2 id="验证安装"><a href="#验证安装" class="headerlink" title="验证安装"></a>验证安装</h2><ul><li>自用的 <code>~/.gdbinit</code> 文件内容示例：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># source /opt/gdb_plugins/peda/peda.py</span>

<span class="token builtin class-name">source</span> /opt/gdb_plugins/pwndbg-2021.06.22/gdbinit.py

<span class="token comment"># source /opt/gdb_plugins/gef-2021.10/gef.py</span>

<span class="token builtin class-name">source</span> /opt/gdb_plugins/Pwngdb/pwngdb.py
<span class="token builtin class-name">source</span> /opt/gdb_plugins/Pwngdb/angelheap/gdbinit.py

define hook-run
python
<span class="token function">import</span> angelheap
angelheap.init_angelheap<span class="token punctuation">(</span><span class="token punctuation">)</span>
end
end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>终端输入 <code>gdb</code>：</p><ol><li>当启用 <strong>peda</strong> 时，会出现：<code>gdb-peda$</code></li><li>当启用 <strong>pwndbg</strong> 时，会出现：<code>pwndbg&gt;</code></li><li>当启用 <strong>gef</strong> 时，会出现：<code>gef➤</code></li></ol><p>如果验证出现上述输出内容，<mark>并且在输出内容之前没有任何报错提示</mark>，则说明安装成功</p><p>如果没有安装成功，输入 <code>gdb</code> 会显示默认的：<code>(gdb)</code></p></blockquote><p><mark>另外，可以设置脚本自动切换不同的 GDB 插件使用，省去手动注释 <code>~/.gdbinit</code> 文件的麻烦，具体方法请移步《GDB的基础和使用》</mark></p><hr><h1 id="配置-ZSH-终端"><a href="#配置-ZSH-终端" class="headerlink" title="配置 ZSH 终端"></a>配置 ZSH 终端</h1><blockquote><p>对比 Ubuntu 和 Kali 之后，觉得 Kali 的<mark>终端历史命令自动补全</mark>的功能真的是太好用了，还有<mark>命令输入正确和错误的高亮提示</mark>，简直不要太好用，原因就在于 Kali 2020 之后的版本默认终端为 zsh</p><p>Ubuntu 也可以安装 zsh 作为终端哦，不用再羡慕隔壁 Kali 啦，接下来用 zsh 打造一个究极好用的全新 Ubuntu 终端吧</p><p>参考文章：</p><ol><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_51692609/article/details/121228694">Ubuntu版本安装zsh、配置ohmyzsh及插件、主题更换_ubuntu ohmyzsh-CSDN博客</a></li><li><a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuYmt0dXMuY29tL2FyY2hpdmVzLzI3NTk=">解决oh-my-zsh plugin ‘zsh-autosuggestions’ not found 与 plugin ‘zsh-syntax-highlighting’ not found问题 | BaKanTu union us (bktus.com)</a></li></ol><p><strong>注意：安装 <code>zsh</code> 后，以后所有要写入 <code>~/.bashrc</code> 的配置全都只需要写入 <code>~/.zshrc</code> 即可</strong></p></blockquote><p>安装 <code>zsh</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> upgrade
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">zsh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>为了配置 <code>zsh</code>，还必须安装 <code>zsh</code> 的配置工具 <code>oh my zsh</code>，安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/robbyrussell/oh-my-zsh /opt/oh-my-zsh
<span class="token builtin class-name">cd</span> /opt/oh-my-zsh/tools
<span class="token function">sh</span> install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>输入 <code>y</code> 将默认 shell 更改为&nbsp;<code>zsh</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Looking <span class="token keyword">for</span> an existing <span class="token function">zsh</span> config<span class="token punctuation">..</span>.
Found /root/.zshrc. Backing up to /root/.zshrc.pre-oh-my-zsh
Using the Oh My Zsh template <span class="token function">file</span> and adding it to /root/.zshrc.

Time to change your default shell to zsh:
Do you want to change your default shell to zsh? <span class="token punctuation">[</span>Y/n<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA10.png" alt="Ubuntu16.04虚拟机PWN环境搭建10.png"></p><p>验证安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">zsh</span> <span class="token parameter variable">--version</span>

<span class="token comment"># zsh 5.1.1 (x86_64-ubuntu-linux-gnu)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>添加原来 bash 的环境变量，将 <code>~/.zshrc</code> 的第二行取消注释：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA25.png" alt="Linux虚拟机CTF环境搭建25.png"></p><p>使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>一些可能的问题：</p><ol><li>如果使用 <code>zsh</code> 过程中历史记录出现问题，报错如下：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zsh: corrupt <span class="token function">history</span> <span class="token function">file</span> /home/wyy/.zsh_history<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>删除原历史记录并重建：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mv</span> ~/.zsh_history ~/.zsh_history_bad
strings <span class="token parameter variable">-eS</span> ~/.zsh_history_bad <span class="token operator">&gt;</span> ~/.zsh_history <span class="token operator">&amp;&amp;</span> fc <span class="token parameter variable">-R</span> ~/.zsh_history
<span class="token function">sudo</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> ~/.zsh_history_bad<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>重启终端即可解决</p><ol start="2"><li>如果出现以下报错：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">zsh: no matches found: xxx<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>编辑 <code>~/.zshrc</code> 文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在文件最后加上一句：<code>setopt no_nomatch</code></p><p>使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="配置-zsh-autosuggestions"><a href="#配置-zsh-autosuggestions" class="headerlink" title="配置 zsh-autosuggestions"></a>配置 zsh-autosuggestions</h2><blockquote><p>这是一个历史命令智能提示插件，能帮助我们快速执行历史命令，实现终端历史命令自动补全</p></blockquote><p>通过 git 安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /opt/oh-my-zsh/plugins
<span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/zsh-users/zsh-autosuggestions.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>打开 <code>zsh</code> 配置文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>搜索 <code>plugins</code>，在 plugins 后面添加插件 <code>zsh-autosuggestions</code> （注意与原有的 git 空格隔开）</p><p>并加入插件 <code>zsh-autosuggestions</code> 的默认保存地址：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">plugins</span><span class="token operator">=</span><span class="token punctuation">(</span>git zsh-autosuggestions<span class="token punctuation">)</span>

<span class="token builtin class-name">source</span> /opt/oh-my-zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA11.png" alt="Ubuntu16.04虚拟机PWN环境搭建11.png"></p><p>保存退出后，更新 <code>~/.zshrc</code> 使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">➜  ~ <span class="token builtin class-name">source</span> ~/.zshrc
<span class="token punctuation">[</span>oh-my-zsh<span class="token punctuation">]</span> plugin <span class="token string">'zsh-autosuggestions'</span> not found<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这是因为前面并没有把插件的代码仓库克隆到本地位置上，所以插件其实并没有被安装</p><p>将插件克隆到本地：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/zsh-users/zsh-autosuggestions ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更新 <code>~/.zshrc</code> 使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>问题即可解决</p><p>安装 <code>zsh-autosuggestions</code> 前：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA18.png" alt="Linux虚拟机CTF环境搭建18.png"></p><p>安装 <code>zsh-autosuggestions</code> 后：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA20.png" alt="Linux虚拟机CTF环境搭建20.png"></p><p>灰色部分就是终端历史命令自动补全，与 Kali 终端一样</p><hr><h2 id="配置-zsh-syntax-highlighting"><a href="#配置-zsh-syntax-highlighting" class="headerlink" title="配置 zsh-syntax-highlighting"></a>配置 zsh-syntax-highlighting</h2><blockquote><p>语法高亮插件，当在终端输入命令时，这个插件可以帮助纠错，命令为红色代表错误，绿色代表正确</p></blockquote><p>方法和配置 <code>zsh-autosuggestions</code> 一样</p><p>通过 git 安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /opt/oh-my-zsh/plugins
<span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>打开 <code>zsh</code> 配置文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>搜索 <code>plugins</code>，在 plugins 后面添加插件 <code>zsh-syntax-highlighting</code> （空格隔开）</p><p>并加入插件 <code>zsh-syntax-highlighting</code> 的默认保存地址：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">plugins</span><span class="token operator">=</span><span class="token punctuation">(</span>git zsh-autosuggestions zsh-syntax-highlighting<span class="token punctuation">)</span>

<span class="token builtin class-name">source</span> /opt/oh-my-zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA12.png" alt="Ubuntu16.04虚拟机PWN环境搭建12.png"></p><p>将插件克隆到本地：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/zsh-users/zsh-syntax-highlighting.git ~/.oh-my-zsh/custom/plugins/zsh-syntax-highlighting<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更新 <code>~/.zshrc</code> 使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装 <code>zsh-syntax-highlighting</code> 后：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA22.png" alt="Linux虚拟机CTF环境搭建22.png"></p><p>命令为绿色代表正确，红色代表输入错误</p><hr><h2 id="更换-ZSH-终端主题"><a href="#更换-ZSH-终端主题" class="headerlink" title="更换 ZSH 终端主题"></a>更换 ZSH 终端主题</h2><blockquote><p>zsh 终端自带很多不同风格的主题，可以根据自己的喜好更换</p></blockquote><p>查看 <code>zsh</code> 自带的主题：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/.oh-my-zsh/themes <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA24.png" alt="Linux虚拟机CTF环境搭建24.png"></p><p>打开 <code>zsh</code> 配置文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>搜索 <code>ZSH_THEME</code>：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA23.png" alt="Linux虚拟机CTF环境搭建23.png"></p><p>默认主题是 <code>robbyrussell</code>，可以根据个人喜好自行修改</p><p>如果设置为：<code>ZSH_THEME="random"</code>，则每次打开终端时，主题都是随机的</p><p>如果不知道选哪个主题好，也可以先将主题设置为随机，然后每次打开 <code>zsh</code> 后都会显示：<br><code>[oh-my-zsh] Random theme 'xxx' loaded</code><br>其中 <code>xxx</code> 就是该主题的名字，遇到喜欢的，就将其加到 <code>ZSH_THEME</code> 中</p><p>修改好后，更新 <code>~/.zshrc</code> 使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>以下主题样式可供参考：</p><ol><li><code>af-magic</code></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/ZSH%E7%BB%88%E7%AB%AF%E4%B8%BB%E9%A2%981.png" alt="ZSH终端主题1.png"></p><ol start="2"><li><code>bira</code></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/ZSH%E7%BB%88%E7%AB%AF%E4%B8%BB%E9%A2%982.png" alt="ZSH终端主题2.png"></p><ol start="3"><li><code>fox</code></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/ZSH%E7%BB%88%E7%AB%AF%E4%B8%BB%E9%A2%983.png" alt="ZSH终端主题3.png"></p><ol start="4"><li><code>xiong-chiamiov</code></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/ZSH%E7%BB%88%E7%AB%AF%E4%B8%BB%E9%A2%984.png" alt="ZSH终端主题4.png"></p><ol start="5"><li><code>gianu</code></li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/ZSH%E7%BB%88%E7%AB%AF%E4%B8%BB%E9%A2%985.png" alt="ZSH终端主题5.png"></p><blockquote><p>更多主题请查看：<a target="_blank" rel="noopener" href="https://github.com/ohmyzsh/ohmyzsh/wiki/themes#pygmalion">Themes · ohmyzsh/ohmyzsh Wiki (github.com)</a></p></blockquote><hr><h2 id="切换-shell-终端"><a href="#切换-shell-终端" class="headerlink" title="切换 shell 终端"></a>切换 shell 终端</h2><p>查看系统已安装的 shell：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> /etc/shells<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看当前使用的 shell：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token environment constant">$SHELL</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>临时切换 shell：</li></ol><p>直接输入 shell 的名称即可，切换 zsh 就终端输入 zsh，切换 bash 就终端输入 bash</p><ol start="2"><li>永久切换 shell：</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 将终端永久切换为 zsh</span>
<span class="token function">sudo</span> chsh <span class="token parameter variable">-s</span> /bin/zsh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h1 id="编辑器和-IDE"><a href="#编辑器和-IDE" class="headerlink" title="编辑器和 IDE"></a>编辑器和 IDE</h1><h2 id="安装-Pycharm-x2F-CLion"><a href="#安装-Pycharm-x2F-CLion" class="headerlink" title="安装 Pycharm/CLion"></a>安装 Pycharm/CLion</h2><blockquote><p>Ubuntu 16.04 的应用商店没有 Pycharm 和 CLion，只能自己通过安装包安装</p></blockquote><p>官网下载 Linux 版：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS9weWNoYXJtL2Rvd25sb2FkLz9zZWN0aW9uPWxpbnV4">Download PyCharm: Python IDE for Professional Developers by JetBrains</a></p><p>以 <code>pycharm-community-2021.3.3.tar.gz</code> 为例（专业版同理）</p><p>解压并移动到&nbsp;<code>/opt</code>&nbsp;下：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> pycharm-community-2021.3.3.tar.gz
<span class="token function">sudo</span> <span class="token function">mv</span> pycharm-community-2021.3.3 /opt/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>解压后进入 Pycharm 的 bin 目录，运行 Pycharm：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /opt/pycharm-community-2021.3.3/bin
<span class="token function">sudo</span> ./pycharm.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>运行软件后：<code>工具栏 –&gt; Tools –&gt; Create Desktop Entery</code> 可以创建桌面快捷方式，并将图标加入开始菜单</p><blockquote><p>如果不想用了，可以参照官方卸载方法：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuamV0YnJhaW5zLmNvbS9oZWxwL3B5Y2hhcm0vdW5pbnN0YWxsLmh0bWw=">卸载 PyCharm | PyCharm 文档 (jetbrains.com)</a></p></blockquote><p>打开 Pycharm 后，如果界面显示异常，比如各种按键的方框显示不全：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA5.png" alt="Linux虚拟机CTF环境搭建5.png"></p><p><strong>一般虚拟机中的各种显示问题 bug，都和 VM 的 3D 图形加速有关</strong>，关掉即可正常显示：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA6.png" alt="Linux虚拟机CTF环境搭建6.png"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA7.png" alt="Linux虚拟机CTF环境搭建7.png"></p><hr><h2 id="安装-VScode"><a href="#安装-VScode" class="headerlink" title="安装 VScode"></a>安装 VScode</h2><blockquote><p>Ubuntu 16.04 的应用商店没有 VScode，只能自己通过安装包安装</p></blockquote><p>下载软件包：<a target="_blank" rel="noopener" href="https://packages.microsoft.com/repos/vscode/pool/main/c/code/">Microsoft VScode</a></p><p>安装，以 <code>code_1.74.2-1671533413_amd64.deb</code> 为例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> code_1.74.2-1671533413_amd64.deb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>安装好后，如果 Ubuntu 16.04 设置了代理，在 VScode 中扩展会无法访问：<code>XHR failed</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA3.png" alt="Ubuntu16.04虚拟机PWN环境搭建3.png"></p><p>其实是整个 VScode 都无法连接网络，也无法登录账户同步</p><p>解决办法：</p><p>在 VScode 的设置中搜索 <code>proxy</code> （代理），找到 <code>Http：Proxy</code> 这一项</p><p>在 <code>Http：Proxy</code> 中填入 HTTP 代理的 IP 地址和端口号：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA5.png" alt="Ubuntu16.04虚拟机PWN环境搭建5.png"></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Ubuntu16.04%E8%99%9A%E6%8B%9F%E6%9C%BAPWN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA4.png" alt="Ubuntu16.04虚拟机PWN环境搭建4.png"></p><p>刷新一下扩展，扩展访问正常</p><p>如果不使用代理，则同时关闭 Ubuntu 和 VScode 的代理设置</p><hr><h3 id="配置-C-x2F-C"><a href="#配置-C-x2F-C" class="headerlink" title="配置 C/C++"></a>配置 C/C++</h3><blockquote><p>首先要安装好 <code>gcc</code>、<code>g++</code>、<code>gdb</code> 环境</p></blockquote><p>安装 <code>C/C++</code> 和 <code>Code Runner</code> 插件</p><p>使用 VScode 调试：<br>新建 <code>.vscode</code> 文件夹，在 <code>.vscode</code> 文件夹下新建两个文件：<code>launch.json</code> 和 <code>tasks.json</code></p><p><strong>以后在其他的文件夹中要调试都要重建 <code>.vscode</code> 子文件夹并配置</strong></p><ul><li><code>launch.json</code> 内容：</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.2.0"</span><span class="token punctuation">,</span>
    <span class="token property">"configurations"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"C/C++"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"cppdbg"</span><span class="token punctuation">,</span>
            <span class="token property">"request"</span><span class="token operator">:</span> <span class="token string">"launch"</span><span class="token punctuation">,</span>
            <span class="token property">"program"</span><span class="token operator">:</span> <span class="token string">"${fileDirname}/${fileBasenameNoExtension}"</span><span class="token punctuation">,</span>
            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"stopAtEntry"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">"cwd"</span><span class="token operator">:</span> <span class="token string">"${workspaceFolder}"</span><span class="token punctuation">,</span>
            <span class="token property">"environment"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"externalConsole"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">"MIMode"</span><span class="token operator">:</span> <span class="token string">"gdb"</span><span class="token punctuation">,</span>
            <span class="token property">"preLaunchTask"</span><span class="token operator">:</span> <span class="token string">"compile"</span><span class="token punctuation">,</span>
            <span class="token property">"setupCommands"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Enable pretty-printing for gdb"</span><span class="token punctuation">,</span>
                    <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"-enable-pretty-printing"</span><span class="token punctuation">,</span>
                    <span class="token property">"ignoreFailures"</span><span class="token operator">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><code>tasks.json</code> 内容：</li></ul><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>
    <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"2.0.0"</span><span class="token punctuation">,</span>
    <span class="token property">"tasks"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token property">"label"</span><span class="token operator">:</span> <span class="token string">"compile"</span><span class="token punctuation">,</span>
            <span class="token property">"command"</span><span class="token operator">:</span> <span class="token string">"g++"</span><span class="token punctuation">,</span>   <span class="token comment">// c 文件为 gcc, cpp 文件为 g++</span>
            <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"-g"</span><span class="token punctuation">,</span>
                <span class="token string">"${file}"</span><span class="token punctuation">,</span>
                <span class="token string">"-o"</span><span class="token punctuation">,</span>
                <span class="token string">"${fileDirname}/${fileBasenameNoExtension}"</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">"problemMatcher"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"owner"</span><span class="token operator">:</span> <span class="token string">"cpp"</span><span class="token punctuation">,</span>
                <span class="token property">"fileLocation"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token string">"relative"</span><span class="token punctuation">,</span>
                    <span class="token string">"${workspaceRoot}"</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">"pattern"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">"regexp"</span><span class="token operator">:</span> <span class="token string">"^(.*):(\\d+):(\\d+):\\s+(warning|error):\\s+(.*)$"</span><span class="token punctuation">,</span>
                    <span class="token property">"file"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">"line"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                    <span class="token property">"column"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
                    <span class="token property">"severity"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
                    <span class="token property">"message"</span><span class="token operator">:</span> <span class="token number">5</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">"group"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">"kind"</span><span class="token operator">:</span> <span class="token string">"build"</span><span class="token punctuation">,</span>
                <span class="token property">"isDefault"</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="配置-Python"><a href="#配置-Python" class="headerlink" title="配置 Python"></a>配置 Python</h3><blockquote><p>首先要安装好 <code>python</code> 环境</p></blockquote><p>安装插件 <code>Code Runner</code> 即可，其他插件：<code>Pylance</code>、<code>Python</code></p><p><code>Code Runner</code> 插件的代码运行指令可在 <code>扩展 -&gt; Code Runner -&gt; 扩展设置 -&gt; Code-runner: Executor Map -&gt; 在 settings.json 中编辑</code> 进行自定义</p><hr><h3 id="使用和一些问题"><a href="#使用和一些问题" class="headerlink" title="使用和一些问题"></a>使用和一些问题</h3><blockquote><p>如果是从 snap 商店安装的 VScode 可以直接使用，如果是自己通过 .deb 包安装，可能需要将 code 添加到环境变量</p></blockquote><p>从终端打开 VScode：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">code<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>使用 VScode 创建文件并编辑： （类似于 VIM）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">code 文件名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>注意：<br><strong>在 VScode 中使用绝对路径一般没问题，但是使用相对路径 <code>./</code> 可能会出问题</strong><br>这并不是路径错了，而是 <em>VScode 默认的相对路径是针对 <code>.vscode</code> 文件夹所在的目录，而不是当前编辑的文件所在目录</em><br><em><code>.vscode</code> 文件夹默认放置在用户家目录下：<code>~/</code></em></p></blockquote><p>解决办法：</p><ul><li>打开 VScode 设置，在 <code>Code Runner</code> 插件中搜索：<code>File Directory As Cwd</code>，将下面的选项打上勾，重新打开编辑的文件，即可正常</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA2.png" alt="Linux虚拟机CTF环境搭建2.png"></p><ul><li>如果不使用 <code>Code Runner</code>，而是直接使用 <code>Python</code> 插件，则在 <code>Python</code> 插件中搜索：<code>Execute ln File Dir</code>，将下面的选项打上勾，重新打开编辑的文件，即可正常</li></ul><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA4.png" alt="Linux虚拟机CTF环境搭建4.png"></p><hr><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="安装-Chrome-浏览器"><a href="#安装-Chrome-浏览器" class="headerlink" title="安装 Chrome 浏览器"></a>安装 Chrome 浏览器</h2><blockquote><p>众所周知，“Chrome 是世界上最好的浏览器” （手动狗头）</p></blockquote><p>由于最新版的 Chrome 已经不支持 Ubuntu 16.04 了，因此需要自己下载旧版本的 deb 包进行安装</p><p>下载地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuY2hyb21lZG93bmxvYWRzLm5ldC9jaHJvbWU2NGxpbnV4Lw==">Chrome Downloads</a></p><p>下载后解压，直接安装 deb 包即可：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> google-chrome-stable_current_amd64.deb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果安装报错，说明版本不合适，请选择其他更旧的版本</p><p>推荐版本：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuY2hyb21lZG93bmxvYWRzLm5ldC9jaHJvbWU2NGxpbnV4LXN0YWJsZS8xMjY2Lmh0bWw=" title="chrome_linux64_stable_101.0.4951.54">chrome_linux64_stable_101.0.4951.54</a></p><hr><h2 id="安装搜狗输入法"><a href="#安装搜狗输入法" class="headerlink" title="安装搜狗输入法"></a>安装搜狗输入法</h2><p>下载 Linux 版搜狗输入法：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cDovL2NkbjIuaW1lLnNvZ291LmNvbS9kbC9pbmRleC8xNTcxMzAyMTk3L3NvZ291cGlueWluXzIuMy4xLjAxMTJfYW1kNjQuZGViP3N0PUVEc0thclA3bWpYMm9QbXRxQk9DSkEmZT0xNTg5MjAwMzEwJmZuPXNvZ291cGlueWluXzIuMy4xLjAxMTJfYW1kNjQuZGVi">sogoupinyin_2.3.1.0112_amd64.deb</a></p><p>以参考安装步骤中的 <code>sogoupinyin_2.3.1.0112_amd64.deb</code> 版本为主，使用太新的版本会导致 Ubuntu 重启后无法进入桌面</p><p>参考安装步骤：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44205779/article/details/107464267">【Ubuntu】Ubuntu16.04安装 搜狗输入法 史上最详细_ubuntu 16.04 安装搜狗输入法-CSDN博客</a></p><hr><h2 id="安装-Typora"><a href="#安装-Typora" class="headerlink" title="安装 Typora"></a>安装 Typora</h2><p>查看电脑架构：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">uname</span> <span class="token parameter variable">-m</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下载对应的 Typora 安装包：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># x86(amd64)</span>
<span class="token function">wget</span> https://download2.typoraio.cn/linux/typora_1.6.6_amd64.deb --output-document typora.deb
  
<span class="token comment"># ARM</span>
<span class="token function">wget</span> https://download2.typoraio.cn/linux/typora_1.6.6_arm64.deb --output-document typora.deb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>安装 Typora：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> typora.deb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="虚拟机代理"><a href="#虚拟机代理" class="headerlink" title="虚拟机代理"></a>虚拟机代理</h2><blockquote><p><strong>这里针对 Ubuntu 16.04 主要介绍虚拟机走主机代理的方法，也是比较推荐这种方法，因为简单方便</strong></p><p>如果想在 Ubuntu 16.04 安装 clash 请参考《<a href="226aff2b.html">Ubuntu22.04虚拟机环境搭建</a>》一文的《<a href="226aff2b.html#%E8%99%9A%E6%8B%9F%E6%9C%BA%E8%87%AA%E8%BA%AB%E5%AE%89%E8%A3%85-clash">虚拟机自身安装 clash</a>》部分（可能需要注意版本问题）</p></blockquote><p>将虚拟机网络模式设置为 NAT 或桥接模式 （两种方式物理机 IP 地址不一样，NAT 模式虚拟机走物理机的 VMnet8 虚拟网卡，桥接模式走物理机的 VMnet0 网卡）</p><p>这里以 NAT 模式为例，假设物理机 IP 为 192.168.148.1</p><hr><h3 id="通过-clash-走代理"><a href="#通过-clash-走代理" class="headerlink" title="通过 clash 走代理"></a>通过 clash 走代理</h3><p>物理机在 clash 主界面中打开“局域网代理”（Allow LAN），并查看代理端口，以 7890 为例</p><p>在虚拟机中按参数手动设置代理即可：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA12.png" alt="Linux虚拟机CTF环境搭建12.png"></p><hr><h3 id="通过-v2rayN-走代理"><a href="#通过-v2rayN-走代理" class="headerlink" title="通过 v2rayN 走代理"></a>通过 v2rayN 走代理</h3><p>物理机在 v2rayN 中打开：<code>设置 -&gt; 参数设置 -&gt; 允许来自局域网的连接</code></p><p>在 v2rayN 主界面中，查看局域网的 socks5 和 http 端口号：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA10.png" alt="Linux虚拟机CTF环境搭建10.png"></p><p>在虚拟机中按参数手动设置代理即可：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA11.png" alt="Linux虚拟机CTF环境搭建11.png"></p><hr><h3 id="配置终端代理"><a href="#配置终端代理" class="headerlink" title="配置终端代理"></a>配置终端代理</h3><blockquote><p>如果有时候发现浏览器等软件是走的代理，但是终端貌似没有走代理，可以在终端配置文件中单独设置一次</p></blockquote><p>可以通过终端的环境变量来实现，打开终端的配置文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.zshrc

<span class="token comment"># 如果没有安装 zsh 终端，使用的是默认终端，则打开：~/.bashrc</span>
<span class="token comment"># sudo gedit ~/.bashrc</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>添加以下内容：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">http_proxy</span><span class="token operator">=</span>http://proxyAddress:port
<span class="token builtin class-name">export</span> <span class="token assign-left variable">https_proxy</span><span class="token operator">=</span>http://proxyAddress:port<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc

<span class="token comment"># 如果没有安装 zsh 终端，使用的是默认终端，则打开：~/.bashrc</span>
<span class="token comment"># source ~/.bashrc</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="创建桌面快捷方式并添加到开始菜单"><a href="#创建桌面快捷方式并添加到开始菜单" class="headerlink" title="创建桌面快捷方式并添加到开始菜单"></a>创建桌面快捷方式并添加到开始菜单</h2><blockquote><p>这里以 IDA Freeware 8.2 为例，因为我 Ubuntu 22.04 安装的是 IDA Freeware 8.2，但是 <strong>Ubuntu 16.04 貌似不支持这么新的版本，会无法运行，所以这里主要演示如何创建桌面快捷方式并添加到开始菜单，建议不要安装太高版本的 IDA</strong></p></blockquote><p>在桌面打开终端</p><p>新建一个 IDA-Freeware-8.2.desktop 文件： <em>（Ubuntu 16.04 安装 IDA 后会自动在桌面新建一个快捷方式，可以不用手动创建，这里主要演示如何创建桌面快捷方式并添加到开始菜单）</em></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/桌面
<span class="token function">sudo</span> <span class="token function">vim</span> IDA-Freeware-8.2.desktop<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>并写入以下内容： （注意按照自己实际情况修改路径）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Desktop Entry<span class="token punctuation">]</span>
<span class="token assign-left variable">Version</span><span class="token operator">=</span><span class="token number">0.9</span>.4
<span class="token assign-left variable">Type</span><span class="token operator">=</span>Application
<span class="token assign-left variable">Name</span><span class="token operator">=</span>IDA Freeware <span class="token number">8.2</span>
<span class="token assign-left variable">Comment</span><span class="token operator">=</span>Interactive Disassembler Freeware <span class="token number">8.2</span>
<span class="token assign-left variable">Icon</span><span class="token operator">=</span>/opt/idafree-8.2/appico64.png
<span class="token assign-left variable">Exec</span><span class="token operator">=</span>/opt/idafree-8.2/ida64
<span class="token assign-left variable">Terminal</span><span class="token operator">=</span>false
<span class="token assign-left variable">MimeType</span><span class="token operator">=</span>application/octet-stream<span class="token punctuation">;</span>application/mac-binary<span class="token punctuation">;</span>application/macbinary<span class="token punctuation">;</span>application/octet-stream<span class="token punctuation">;</span>application/x-binary<span class="token punctuation">;</span>application/x-macbinary
<span class="token assign-left variable">StartupNotify</span><span class="token operator">=</span>true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th align="left">参数</th><th align="left">含义</th><th align="left">必要性</th></tr></thead><tbody><tr><td align="left"><code>[Desktop Entry]</code></td><td align="left">文件头，每个 Desktop 文件都以这个标签开始</td><td align="left"><strong>必选</strong></td></tr><tr><td align="left"><code>Version</code></td><td align="left">标明 Desktop Entry 的版本</td><td align="left">可选</td></tr><tr><td align="left"><code>Type</code></td><td align="left">Desktop 的类型, 常见值有 Application 和 Link</td><td align="left"><strong>必选</strong></td></tr><tr><td align="left"><code>Name</code></td><td align="left">程序名称，可自定义</td><td align="left"><strong>必选</strong></td></tr><tr><td align="left"><code>Comment</code></td><td align="left">程序描述，可自定义</td><td align="left">可选</td></tr><tr><td align="left"><code>Icon</code></td><td align="left">设置快捷方式的图标，支持 png 和 svg</td><td align="left">可选</td></tr><tr><td align="left"><code>Exec</code></td><td align="left">程序的启动命令, 可以带参数运行, 当 Type 为 Application 时有效</td><td align="left"><strong>必选</strong></td></tr><tr><td align="left"><code>Terminal</code></td><td align="left">是否在终端中运行, 当 Type 为 Application 时有效 <em>（对于没有图形界面的程序很有用）</em></td><td align="left">可选</td></tr><tr><td align="left"><code>MimeType</code></td><td align="left">设置该程序可以打开的文件类型</td><td align="left">可选</td></tr><tr><td align="left"><code>StartupNotify</code></td><td align="left">程序启动通知</td><td align="left">可选</td></tr></tbody></table><p>其他 <code>MimeType</code> 可打开的文件类型：<a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaoyw2008/article/details/46647723">完整的 mime type 列表-CSDN博客</a></p><p>增加执行权限：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> +x IDA-Freeware-8.2.desktop<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>最后将 .desktop 文件存放到 <code>/usr/share/applications/</code> 目录下</p><p>程序就会现在开始菜单中，同时也可以在 <code>右键 -&gt; 使用其他应用程序打开</code> 中找到，然后也可以自己将应用固定到任务栏，方便打开</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> ~/桌面
<span class="token function">sudo</span> <span class="token function">mv</span> IDA-Freeware-8.2.desktop /usr/share/applications/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><p>jetbrains 全家桶等等创建桌面快捷方式就简单了，运行软件后：<code>工具栏 –&gt; Tools –&gt; Create Desktop Entery</code></p><p>以 Pycharm 自动创建的图标为例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>Desktop Entry<span class="token punctuation">]</span>
<span class="token assign-left variable">Version</span><span class="token operator">=</span><span class="token number">1.0</span>
<span class="token assign-left variable">Type</span><span class="token operator">=</span>Application
<span class="token assign-left variable">Name</span><span class="token operator">=</span>PyCharm Professional Edition
<span class="token assign-left variable">Icon</span><span class="token operator">=</span>/opt/pycharm-2022.3/bin/pycharm.svg
<span class="token assign-left variable">Exec</span><span class="token operator">=</span><span class="token string">"/opt/pycharm-2022.3/bin/pycharm.sh"</span> %f
<span class="token assign-left variable">Comment</span><span class="token operator">=</span>Python IDE <span class="token keyword">for</span> Professional Developers
<span class="token assign-left variable">Categories</span><span class="token operator">=</span>Development<span class="token punctuation">;</span>IDE<span class="token punctuation">;</span>
<span class="token assign-left variable">Terminal</span><span class="token operator">=</span>false
<span class="token assign-left variable">StartupWMClass</span><span class="token operator">=</span>jetbrains-pycharm
<span class="token assign-left variable">StartupNotify</span><span class="token operator">=</span>true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h2 id="创建软连接将应用添加到终端启动"><a href="#创建软连接将应用添加到终端启动" class="headerlink" title="创建软连接将应用添加到终端启动"></a>创建软连接将应用添加到终端启动</h2><blockquote><p>这里以 IDA Freeware 8.2 为例，因为我 Ubuntu 22.04 安装的是 IDA Freeware 8.2，但是 <strong>Ubuntu 16.04 貌似不支持这么新的版本，会无法运行，所以这里主要演示如何创建软连接将应用添加到终端启动，建议不要安装太高版本的 IDA</strong></p></blockquote><p>以 IDA 为例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> <span class="token string">"/opt/idafree-8.2/ida64"</span> /usr/bin/ida
<span class="token comment"># 即：建软连接 /usr/bin/ida -&gt; /opt/idafree-8.2/ida64</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样在终端输入 <code>ida</code> 即可打开 IDA</p><blockquote><p><code>/usr/bin/ida</code> 中的 ida 名字可以自定义</p><p>这样只是在 <code>/usr/bin/</code> 下创建了一个软链接，指向 <code>/opt/idafree-8.2/ida64</code><br>若想删除软链接：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> unlink /usr/bin/ida
<span class="token comment"># 例如使用 sudo ln -s "/opt/idafree-8.2/ida64" /usr/bin/ida 后</span>
<span class="token comment"># 会创建软连接 /usr/bin/ida -&gt; /opt/idafree-8.2/ida64</span>
<span class="token comment"># 使用 sudo unlink /usr/bin/ida 后会将 /usr/bin/ida 删除，但不会删除 /opt/idafree-8.2/ida64</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>尽量不要用 <code>rm -rf</code> 删除软链接，如果不小心加上 <code>'/'</code> 就会删除源文件，例如：<code>rm -rf filename/</code></p></blockquote><hr><h2 id="终端将-cd-命令与-ls-命令连用"><a href="#终端将-cd-命令与-ls-命令连用" class="headerlink" title="终端将 cd 命令与 ls 命令连用"></a>终端将 cd 命令与 ls 命令连用</h2><blockquote><p>其实就是将 <code>cd xxx</code> 命令变为 <code>cd xxx &amp;&amp; ls</code>，好处也显而易见：可以少敲一条命令，方便~</p><p>但是 Ubuntu 不支持 <code>chdir</code>，所以不能直接用 <code>alias</code> 实现目录内容的显示</p></blockquote><p>注：以下操作对 Kali Linux 同样适用</p><p>如果你的 Ubuntu 配置了 zsh 终端，编辑 <code>~/zshrc</code> 配置文件（Kali Linux 自带 zsh 终端）：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> gedit ~/.zshrc

<span class="token comment"># 如果没有配置 zsh 终端，则打开 ~/.bashrc</span>
<span class="token function">sudo</span> gedit ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>在文件最后加入以下内容，保存退出：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cd</span><span class="token operator">=</span>cdls<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-name function">cdls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">builtin</span> <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后使配置生效：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">source</span> ~/.zshrc

<span class="token comment"># 如果没有配置 zsh 终端，则使用如下命令</span>
<span class="token builtin class-name">source</span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>然后就可以看到效果了：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA29.png" alt="Linux虚拟机CTF环境搭建29.png"></p><p>如果想顺便显示当前所在路径，只需将前面的内容改为：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">cd</span><span class="token operator">=</span>cdls<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function-name function">cdls</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">builtin</span> <span class="token builtin class-name">cd</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">pwd</span> <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span>
<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后就可以看到效果了：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/Linux%E8%99%9A%E6%8B%9F%E6%9C%BACTF%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA30.png" alt="Linux虚拟机CTF环境搭建30.png"></p><hr><h2 id="配置-SSH-服务端"><a href="#配置-SSH-服务端" class="headerlink" title="配置 SSH 服务端"></a>配置 SSH 服务端</h2><blockquote><p>Linux 默认只安装了 SSH 客户端，有时候在执行 ssh 或者 scp 命令时会出现：<code>ssh: connect to host port 22: Connection refused</code> 拒绝连接</p><p>客户端和服务端的关系：<br>如果 A 机器想被 B 机器远程控制，那么 A 机器需要安装 SSH 服务端，B 机器需要安装 SSH 客户端<br>例如：B 机器通过 ssh 连接 A 机器，或者 B 机器通过 scp 上传文件到 A 机器</p></blockquote><p>查看 ssh 服务：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">dpkg <span class="token parameter variable">-l</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果只显示有 openssh-client 没有 openssh-server，说明未安装 SSH 服务端</p><p>安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openssh-server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>确认 ssh-server 是否启动：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> <span class="token parameter variable">-e</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果看到 <code>sshd</code> 就说明 ssh-server 已经启动</p><p>如果出现其他问题的话，查看 SSH 服务端状态：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">service</span> <span class="token function">ssh</span> status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>重启 SSH 服务端：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">service</span> <span class="token function">ssh</span> restart<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>相关命令：</p><ul><li>连接服务端机器，假设 IP 为 192.168.1.1，用户名为 user （Windows、Linux 通用）</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> user@192.168.1.1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>从客户端机器上传当前目录下的 test 文件到服务端机器的 <code>~/</code> 或 <code>E:\</code> 目录下，假设 IP 为 192.168.1.1，用户名为 user</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 服务端为 Linux</span>
<span class="token function">sudo</span> <span class="token function">scp</span> <span class="token parameter variable">-r</span> <span class="token builtin class-name">test</span> user@192.168.1.1:~/

<span class="token comment"># 服务端为 Windows</span>
<span class="token function">sudo</span> <span class="token function">scp</span> <span class="token parameter variable">-r</span> <span class="token builtin class-name">test</span> user@192.168.1.1:E:<span class="token punctuation">\</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>其实只传文件的话，不需要 <code>-r</code> 参数，但是传文件夹需要，索性直接加上 <code>-r</code> 更方便</p><p>如果使用 ssh 连接出现如下报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED<span class="token operator">!</span>     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY<span class="token operator">!</span>
Someone could be eavesdropping on you right now <span class="token punctuation">(</span>man-in-the-middle attack<span class="token punctuation">)</span><span class="token operator">!</span>
It is also possible that a <span class="token function">host</span> key has just been changed.
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Host key verification failed.
lost connection<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>此报错是由于远程的主机的公钥发生了变化导致的</p><p>解决办法：<br>清除 ssh 所连接的 IP</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-keygen <span class="token parameter variable">-R</span> 出问题的IP地址<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后再使用 ssh 重新连接即可</p><hr></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>Ubuntu16.04虚拟机环境搭建</h></span></div><div class="post-copyright__type"><span class="post-copyright-info">本文链接：<a href="https://www.uf4te.cn/posts/2b805828.html">https://www.uf4te.cn/posts/2b805828.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="padding-left:6px;display:inline-block;width:120px"><h>作者</h><div class="post-copyright-cc-info"><h>uf4te</h></div></div><div class="post-copyright-c" style="padding-left:6px;display:inline-block;width:120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2023-11-08</h></div></div><div class="post-copyright-u" style="padding-left:6px;display:inline-block;width:120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-10-17</h></div></div><div class="post-copyright-c" style="padding-left:6px;display:inline-block;width:120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CTF/">CTF</a><a class="post-meta__tags" href="/tags/Pwn/">Pwn</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/cover-108.jpg" data-sites="facebook, twitter, wechat, weibo, qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 奖励一下站长</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/rewards/wechat.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/rewards/wechat.png" alt="微信支付"></a><div class="post-qr-code-desc">微信支付</div></li><li class="reward-item"><a href="/img/rewards/alipay.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/rewards/alipay.png" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/92acfead.html" title="栈迁移"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-111.jpg" onerror='onerror=null,src="/img/404/pic_404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">栈迁移</div></div></a></div><div class="next-post pull-right"><a href="/posts/d30b0934.html" title="PWN中Glibc引起的64位程序的堆栈平衡"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-4.jpg" onerror='onerror=null,src="/img/404/pic_404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">PWN中Glibc引起的64位程序的堆栈平衡</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/226aff2b.html" title="Ubuntu22.04虚拟机环境搭建"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-10-17</div><div class="title">Ubuntu22.04虚拟机环境搭建</div></div></a></div><div><a href="/posts/c695aa69.html" title="Bypass安全机制"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-117.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-10-15</div><div class="title">Bypass安全机制</div></div></a></div><div><a href="/posts/cfa3ef5.html" title="Linux下的保护机制"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-65.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-06-05</div><div class="title">Linux下的保护机制</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="author_top is-center"><div class="card-info-avatar"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg" onerror='this.onerror=null,this.src="/img/404/loading_404.gif"' alt="avatar"></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="palm_tree" fallback-src="https://lskypro.acozycotage.net/LightPicture/2022/12/fe1dc0402e623096.jpg">😒</g-emoji><span>疲惫心累</span></div></div></div><div class="author-info__name">uf4te</div><div class="author-info__description">天道酬勤</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a><a href="/commentwall/"><div class="headline">评论</div><div class="length-num comment-total">0</div></a><a href="/about/#reward-me"><div class="headline">赞助</div><div class="length-num reward-total">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/uf4te/uf4te.github.io"><i class="fab fa-github"></i><span>给我的网站一个star 🤗</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:916884674@qq.com" target="_blank" title="mail 我的邮箱"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/img/me/QRCode_QQ.png" target="_blank" title="加我 QQ"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="/img/me/QRCode_WeChat.png" target="_blank" title="加我微信"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS 订阅"><i class="fa-solid fa-square-rss"></i></a><a class="social-icon" href="/about/#reward-me" target="_blank" title="赞助本站"><i class="fa-sharp fa-solid fa-heart-circle-bolt"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fa-solid fa-medal"></i><span>欢迎来到我的小站</span></div><div class="announcement_content">我是一个喜欢学习 PWN 和逆向的二进制 CTFer，加油，互勉！</div><div style="margin-bottom:8px"></div><div class="item-headline"><i class="fa-solid fa-hourglass-half fa-shake"></i><span>计时小助手</span></div><div id="timing"></div><div style="margin-bottom:8px"></div><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>最新公告</span></div><div class="newest_announcement_content">可以在《互动 -&gt; 我的说说》下查看本站的更新及动态：<a href="https://www.uf4te.cn/artitalk/" target="_blank" title="点击直达">我的说说</a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#VMtools"><span class="toc-text">VMtools</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-text">更换镜像源</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-%E9%85%8D%E7%BD%AE"><span class="toc-text">Python 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E7%B3%BB%E7%BB%9F%E8%87%AA%E5%B8%A6-pip"><span class="toc-text">升级系统自带 pip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2-pip-%E6%BA%90"><span class="toc-text">更换 pip 源</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-python-3-10-6"><span class="toc-text">安装 python 3.10.6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B8%A9%E5%9D%91%E4%B8%8E%E8%A7%A3%E5%86%B3"><span class="toc-text">踩坑与解决</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-OpenSSL-1-1-1n"><span class="toc-text">编译安装 OpenSSL 1.1.1n</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-lzma-%E5%92%8C-uuid"><span class="toc-text">安装 _lzma 和 _uuid</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%8D%E6%AC%A1%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85-python"><span class="toc-text">再次编译安装 python</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4-python-%E5%92%8C-pip-%E7%89%88%E6%9C%AC"><span class="toc-text">设置默认 python 和 pip 版本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-python-3-9-%E5%8F%8A%E4%BB%A5%E4%B8%8B%E7%89%88%E6%9C%AC"><span class="toc-text">安装 python 3.9 及以下版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%A1%E7%90%86%E5%A4%9A%E4%B8%AA%E7%89%88%E6%9C%AC%E7%9A%84-Python"><span class="toc-text">管理多个版本的 Python</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Anaconda"><span class="toc-text">安装 Anaconda</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-%E9%85%8D%E7%BD%AE"><span class="toc-text">Java 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-open-jdk"><span class="toc-text">安装 open-jdk</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-oracle-jdk"><span class="toc-text">安装 oracle-jdk</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CTF-%E9%85%8D%E7%BD%AE"><span class="toc-text">CTF 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-git"><span class="toc-text">安装 git</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-32-%E4%BD%8D%E5%BA%93"><span class="toc-text">安装 32 位库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Capstone"><span class="toc-text">安装 Capstone</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-pwntools"><span class="toc-text">安装 pwntools</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-LibcSearcher"><span class="toc-text">安装 LibcSearcher</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-checksec"><span class="toc-text">安装 checksec</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-ROPgadget"><span class="toc-text">安装 ROPgadget</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-one-gadget"><span class="toc-text">安装 one_gadget</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-glibc-all-in-one"><span class="toc-text">安装 glibc-all-in-one</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-patchelf"><span class="toc-text">安装 patchelf</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-main-arena-offset"><span class="toc-text">安装 main_arena_offset</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-QEMU"><span class="toc-text">安装 QEMU</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Zsteg"><span class="toc-text">安装 Zsteg</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Basecrack"><span class="toc-text">安装 Basecrack</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7-GDB-%E5%88%B0-gdb-10-2"><span class="toc-text">升级 GDB 到 gdb-10.2</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#GDB-%E9%85%8D%E7%BD%AE"><span class="toc-text">GDB 配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-peda"><span class="toc-text">安装 peda</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-pwndbg"><span class="toc-text">安装 pwndbg</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Pwngdb"><span class="toc-text">安装 Pwngdb</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-pwndbg-%E5%88%86%E5%B1%8F%E8%B0%83%E8%AF%95"><span class="toc-text">配置 pwndbg 分屏调试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%BF%AE%E6%94%B9-gdbinit"><span class="toc-text">方法一：修改 gdbinit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9Agdb-%E4%B8%B4%E6%97%B6%E8%AE%BE%E7%BD%AE"><span class="toc-text">方法二：gdb 临时设置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-gef"><span class="toc-text">安装 gef</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85"><span class="toc-text">验证安装</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-ZSH-%E7%BB%88%E7%AB%AF"><span class="toc-text">配置 ZSH 终端</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-zsh-autosuggestions"><span class="toc-text">配置 zsh-autosuggestions</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-zsh-syntax-highlighting"><span class="toc-text">配置 zsh-syntax-highlighting</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2-ZSH-%E7%BB%88%E7%AB%AF%E4%B8%BB%E9%A2%98"><span class="toc-text">更换 ZSH 终端主题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%87%E6%8D%A2-shell-%E7%BB%88%E7%AB%AF"><span class="toc-text">切换 shell 终端</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E8%BE%91%E5%99%A8%E5%92%8C-IDE"><span class="toc-text">编辑器和 IDE</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Pycharm-x2F-CLion"><span class="toc-text">安装 Pycharm/CLion</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-VScode"><span class="toc-text">安装 VScode</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-C-x2F-C"><span class="toc-text">配置 C/C++</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Python"><span class="toc-text">配置 Python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%92%8C%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="toc-text">使用和一些问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-text">其他</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Chrome-%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-text">安装 Chrome 浏览器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95"><span class="toc-text">安装搜狗输入法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Typora"><span class="toc-text">安装 Typora</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%BB%A3%E7%90%86"><span class="toc-text">虚拟机代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-clash-%E8%B5%B0%E4%BB%A3%E7%90%86"><span class="toc-text">通过 clash 走代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-v2rayN-%E8%B5%B0%E4%BB%A3%E7%90%86"><span class="toc-text">通过 v2rayN 走代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BB%88%E7%AB%AF%E4%BB%A3%E7%90%86"><span class="toc-text">配置终端代理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E5%B9%B6%E6%B7%BB%E5%8A%A0%E5%88%B0%E5%BC%80%E5%A7%8B%E8%8F%9C%E5%8D%95"><span class="toc-text">创建桌面快捷方式并添加到开始菜单</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%BD%AF%E8%BF%9E%E6%8E%A5%E5%B0%86%E5%BA%94%E7%94%A8%E6%B7%BB%E5%8A%A0%E5%88%B0%E7%BB%88%E7%AB%AF%E5%90%AF%E5%8A%A8"><span class="toc-text">创建软连接将应用添加到终端启动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%88%E7%AB%AF%E5%B0%86-cd-%E5%91%BD%E4%BB%A4%E4%B8%8E-ls-%E5%91%BD%E4%BB%A4%E8%BF%9E%E7%94%A8"><span class="toc-text">终端将 cd 命令与 ls 命令连用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-SSH-%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-text">配置 SSH 服务端</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/f5dbafd0.html" title="AFL++环境搭建与模糊测试"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-135.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="AFL++环境搭建与模糊测试"></a><div class="content"><a class="title" href="/posts/f5dbafd0.html" title="AFL++环境搭建与模糊测试">AFL++环境搭建与模糊测试</a><time datetime="2024-10-14T15:06:13.000Z" title="发表于 2024-10-14 23:06:13">2024-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/194d06e.html" title="U盘重装系统以及Ubuntu与Windows双系统"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-134.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="U盘重装系统以及Ubuntu与Windows双系统"></a><div class="content"><a class="title" href="/posts/194d06e.html" title="U盘重装系统以及Ubuntu与Windows双系统">U盘重装系统以及Ubuntu与Windows双系统</a><time datetime="2024-09-28T04:30:04.000Z" title="发表于 2024-09-28 12:30:04">2024-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb411a4c.html" title="多架构与交叉编译"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-133.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="多架构与交叉编译"></a><div class="content"><a class="title" href="/posts/bb411a4c.html" title="多架构与交叉编译">多架构与交叉编译</a><time datetime="2024-06-16T14:48:33.000Z" title="发表于 2024-06-16 22:48:33">2024-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f0cbf9ee.html" title="IOT固件仿真与gdbserver远程调试"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-132.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="IOT固件仿真与gdbserver远程调试"></a><div class="content"><a class="title" href="/posts/f0cbf9ee.html" title="IOT固件仿真与gdbserver远程调试">IOT固件仿真与gdbserver远程调试</a><time datetime="2024-06-16T14:16:49.000Z" title="发表于 2024-06-16 22:16:49">2024-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c2233a9.html" title="CNVD-2013-11625复现"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-131.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="CNVD-2013-11625复现"></a><div class="content"><a class="title" href="/posts/c2233a9.html" title="CNVD-2013-11625复现">CNVD-2013-11625复现</a><time datetime="2024-06-12T13:03:01.000Z" title="发表于 2024-06-12 21:03:01">2024-06-12</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2023 - 2025 By uf4te</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="running-time"></div><script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3GoBenqrrrBby5er/quote.js?theme=#1690FF,#00C4B6,#CACACA,#00C4B6,#FFFFFF,#1690FF,14&amp;f=12"></script><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" title="博客框架 Hexo_v6.3.0"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" title="主题版本 Butterfly_v4.7.0"></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-black?style=flat&amp;logo=Vercel" title="本站采用多线部署，主线路部署于 Vercel"></a><a class="github-badge" target="_blank" href="https://www.cloudflare.com/zh-cn/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Cloudflare-F38020?style=flat&amp;logo=Cloudflare" title="本站采用多线部署，备用线路部署于 Cloudflare"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" title="本站项目主要由 Github 托管与备份"></a><a class="github-badge" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-FF3030?style=flat&amp;logo=Claris" title="本站采用知识共享署名 - 非商业性使用 - 相同方式共享 4.0 国际许可协议进行许可"></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20240052" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20240052%E5%8F%B7-fe1384?style-flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAByxJREFUSInl1nlwVeUZx/HPuTckkD0kQFiCEEIUlNUCAqKoSBV1AIt1ikpVLFbLONjWGUXbmWrbweJMy7hUxbbTjsUq6KCiWEvr0kE2WVK2QCKBJCxJgEASsienfxwqMob+3Zm+f93z3vM+32f5vc9z+H9bwVcfOp/YQ+1prhhEZS1VDQzqQ1MjiQmIC5Liwm3lBWpqFimrulb/7A/067vM2IsOBZ2h8MhJQW6KMDNVsKeaizKEyUlsKueqgWJ39AMJF3QpDCNYr1SaEig/lWNX2Z1h6dH5/lVyGdVIZFf7MHo9bEfh9rCg/+8NyHlN77QTsnpQ0i2y08VK+BosfhbW0cHxqmSfFd9qW+l9Pi+5WltFdGTsOBbO5dJcdh3lN5+xff0Y2zuelXjRsyYUrjOu4BVJaavlpbWIJRBLOM+J81O95AAnTtM9vNHGknut3zdT48FutJE3koWTuG4oSXH+VsInX3B9IdcVUNfCuv08t4GjO6NspOa3BNcOXx1eOugVHQnrTMkTuyWrC/BjRZO9uPYTpw7HhTWkXcLd45l9GblpHD7NWzt5ZTMXZ/OdkTy+lvR07rmcmWffq6pn9W5e/oymfcT6kJbXHiydMyVYkL/x66n+ZMcctQfjhgxl6UIGZ3Ooltd2RIZqjqKRS0ew9cFIA1cO5urlLHuPZWsZPJiZw7gqn0VT2HCIR9+jvCQhfHPrLGyE2Hng2roBxHnmJoZnc9drbD3I6QaaWkjpSVoeu4+x5XB05qMDqCenHz37UHmcFRv54ZuMeoYrB/L0DPRgZ0WfrsXVKzPX3nYykrn3dUZl8+Q0Qox/gc/L6ZlKzxQefo+UROpa6Z4VCedkPd8YyJYHI3u5T/HAShZNQxsXZfR3pCtwRW066VEeOuIUVUf77+9jTw2pycTOJml7Je1t9EgiI5X2jkgyze1fCSSdtjhBiJCkpKyuI+5oTdAtkTCgVwrbKsl8ko6QjO40tZ67EpkpdIbRf20dkbPpPTjdwsSX6I5dJYy4hoQAaZQdDy4A1iEMI613T6LtBPXJpPakrjGqc1Y6CTFq62htJp5KRwPJKWSkU3WKiiPEEqO6xgM6oZmctJhDXYH7Z59xuCyKpK6R26ZE+ys3MWYoN1/Mc5uoqmbEQJ6fTc/ulJ3i/lUc+YIfzeKhKzjVHN31A3XRHddKSrf6/6DOV3VTcw1hVKfkxOhaPDAe1UwfwmNTqT1Drxw+nE9xNXetIjHG2vnoxoT+rNrN2Of58Rp6JZ+ldKes5kjX4G7dKuikpoERfaltYnQ/DOSS3hEAFk9lXQkLnmf7Ib65lPJT3HU1+46Tm8rYvgzKYVA2h+vQIMjvewHwdSN20MiOSmZczO4a1hSzYi77T7CiiPF5JMTZexjJ5OagkwNV9M+MnJ09nKU3smgyQ3PYWoEO4fUjii4QceJmevJuMeP6csUAln4atcbSGoqOUpjD30uZNwnpHNtN3lC+NZa1xeT34pGVTJ3PL9+Ohs6GQ8gVtHZs6VLVwZhBReGwoXvt3THM/hP0SWVnCR8f4PMjkffjB/DQS8waxpHFfFgaaeHZDRRtJn0yP5tF31ymFVJ2nN27GD66KBzca2/XEWdkUpD3Fmd4tYj0FMS54Q9UnuaDUv6yE/24ewWP/DU6N/d1fvousYEs28DyLVEvGDOAt/egmSkXv2VYn3NBfpXbua6J8hMFFvy2RHsL+57gmX+w/AN651PfEDWQzLRI+afqIqOxFDJT6Rbn9Bmad3PnTH5wIxOXkJTWGiz57hCDsyqDWVldRNzeyOh+paaPfpFKnvqQX88iZwDVx0lLJqUHbe3EkZ1Odm+yUqK2GHYKmhvIG8fyeTz9IY5x67jnFPapdPDkl6jzwEF9IDjZJlgwfbG+o2u8+g4rd7D/UYI41TXnevV5K4j2q6uESckUP8rvNrH6fUH/sRXB9AlPONMSDZ8uazwoi56JjEyvdftV88jinhf4uIzmJRQOoOYgja0RKAiIBZxpjvZH5tP0c97axcLlyBXOuWZemJTYFFbUCU+1dl3j8PGSyFhnJ7EkYcWh7/njqpep5xfzWTyZZ7dEg73xOJKiGqf3YenNLBjLTz7i539COg/OvSOYO2GFo/VRG0Zwe0YX4Ns3R7NXSCxBeM8IthXfZvGf3xCWc/kkXvg2vVP4YB/rDzC1gGlDo+50/xvs2khKPrNnzAzmTH5HbzR0fkkKro93Ab5vx9kfaGgT3lLA5EyWbRpoTdHbSreOppGJV/PwlRTksK+aZz5l6z+RLBgxaau5k2cJelTKzmRQMq0d51J8UxL+23d1TDTcj7WQllZu4YwxDo+eZc22X9mwd6gN65GIFmQzampxcMOoR1xeuMbpVoqromsXdG3+wmCiekNtfSSmiUNWu2zgap+WjlZW8X11TeNkpWwICvNfCm8u3Cmxg4PN0VdmEJw7/7+0/g32RaqCbhRecAAAAABJRU5ErkJggg==" title="本站已通过萌备备案：萌ICP备20240052号"></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="go-down" type="button" title="刷新页面" onclick="window.location.reload()"><i class="fa-solid fa-arrows-rotate"></i></button><button id="readmode" type="button" title="阅读模式"><i class="fa-solid fa-book-open-reader"></i></button><button id="translateLink" type="button" title="繁简切换">繁</button><button id="darkmode" type="button" title="昼夜切换"><i class="fa-solid fa-moon"></i></button><button id="hide-aside-btn" type="button" title="全屏模式" onclick="rmf.fullScreen()"><i class="fas fa-expand"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fa fa-comments"></i></a><button id="go-down" type="button" title="分享本页" onclick="rmf.copyWordsLink()"><i class="fa-solid fa-share-from-square"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" title="后退一步" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" title="前进一步" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" title="刷新页面" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" title="直达顶部" href="javascript:btf.scrollToDest(0, 500)"><i class="fa fa-arrow-up"></i></a><a class="rightMenu-item" title="直达底部" href="javascript:btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" href="/archives/"><i class="fa-solid fa-calendar-days"></i><span>文章归档</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fas fa-tags"></i><span>文章标签</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fas fa-folder-open"></i><span>文章分类</span></a><a class="rightMenu-item" href="javascript:toRandomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.bing.com/search?q=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa-brands fa-edge"></i><span>用Bing搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fa fa-comments"></i><span>直达评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item menu-link" href="/copyright/"><i class="fa-solid fa-copyright"></i><span>本站协议</span></a><a class="rightMenu-item menu-link" href="/about/#reward-me"><i class="fa-sharp fa-solid fa-heart-circle-bolt"></i><span>赞助本站</span></a><a class="rightMenu-item menu-link" href="/about/"><i class="fa-regular fa-address-card"></i><span>关于本站</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>function loadWaline(){function e(){Waline.init(Object.assign({el:"#waline-wrap",reaction:!0,serverURL:"https://waline.uf4te.cn",avatarCDN:"https://cn.cravatar.com/avatar/",pageview:!0,dark:'html[data-theme="dark"]',path:window.location.pathname,comment:!0,reaction:["https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_wink.png","https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_blush.png","https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_think.png","https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_awkward.png"]},{locale:{nick:"昵称 (选填)",mail:"邮箱 (建议填写)",link:"你的主页 (选填)",placeholder:"请文明发言，牢记社会主义核心价值观！（不填写昵称和邮箱可以匿名评论，但建议填写邮箱可在被回复时收到邮件提醒，邮箱信息不会被公开）",requiredMeta:[],sofa:"有什么想说的？快来发表评论抢沙发吧！",login:"登录 (可选)",anonymous:"某不知名网友",level0:"潜水",level1:"冒泡",level2:"吐槽",level3:"活跃",level4:"话痨",level5:"传说",reactionTitle:"感觉怎么样，评价一下？",reaction0:"感觉很赞",reaction1:"支持一下",reaction2:"感觉一般",reaction3:"勉勉强强"}}))}const n=document.getElementById("waline-css");"object"==typeof Waline?n?e():getCSS("/css/waline.css","waline-css").then(e):getCSS("/css/waline.css","waline-css").then((()=>{getScript("/js/waline.js").then(e)}))}{function loadOtherComment(){loadWaline()}setTimeout(loadWaline,0)}</script></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("waline-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{Waline.RecentComments({serverURL:"https://waline.uf4te.cn",count:13}).then((({comments:t})=>{let n=t.filter((e=>"uf4te"!==e.nick));n.length<3&&(n=n.concat(t.filter((e=>"uf4te"===e.nick)).slice(0,3-n.length)));const a=n.slice(0,3).map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.objectId,date:e.insertedAt};var t}));saveToLocal.set("waline-newest-comments",JSON.stringify(a),10/1440),e(a)})).catch((e=>{document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof Waline?t():getScript("/js/waline.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)}))</script><script src="/js/jquery.min.js"></script><script src="/js/sakura.js"></script><script data-pjax="" src="/js/footer_beautification.js"></script><canvas id="universe"></canvas><script src="/js/universe.js"></script><script src="/js/title.js"></script><script async data-pjax="" src="/js/fps.js"></script><script async data-pjax="" src="/js/txmap.js"></script><script src="/js/console.js"></script><script src="/js/hotsearch.js"></script><div class="aplayer no-destroy" data-id="8252365535" data-server="netease" data-type="playlist" data-order="random" data-fixed="true" data-autoplay="false" data-theme="#00C4B6" data-volume="0.8" data-mutex="true" data-listmaxheight="330px"></div><script src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script async data-pjax="" src="/js/timing.js"></script><script data-pjax="" src="/js/rightmenu.js"></script><script src="/js/random.js"></script><script src="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/jinrishici.js"></script><script data-pjax="" src="/js/poem.js"></script><script src="/js/chuckle-post-ai.js"></script><script data-pjax="" defer>new ChucklePostAI({el:"#post>#article-container",key:"e3524467cea76d785e9a",title_el:".post-title",interface:{name:"uf4te 的 AI 小助手",introduce:"Hey，你好！很高兴见到你！我是 uf4te 的文章辅助 AI，点击下方的按钮，我可以为你生成本文摘要、推荐相关文章（首次生成可能会比较慢，请您耐心等待一小会，谢谢理解哦~）",version:"GPT-3.5",button:["介绍自己","推荐相关文章","生成本文摘要","矩阵穿梭"]},hide_shuttle:!0,pjax:!0,summary_toggle:!1,summary_speech:!0})</script><script data-pjax="" src="/js/random-friends-post.js"></script><script data-pjax="" src="/js/pagination.js"></script><script async data-pjax="" src="/js/commentsum.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="♡富强♡,♡民主♡,♡文明♡,♡和谐♡,♡自由♡,♡平等♡,♡公正♡,♡法治♡,♡爱国♡,♡敬业♡,♡诚信♡,♡友善♡" data-fontsize="16px" data-random="false" async></script><link rel="stylesheet" href="/js/APlayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="/js/APlayer/APlayer.min.js"></script><script src="/js/APlayer/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax], .pjax-reload script").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><div class="pjax-reload"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInLeft"),arr[i].setAttribute("data-wow-duration","600ms"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInRightBig"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer src="/js/wow_init.js"></script></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInLeft"),arr[i].setAttribute("data-wow-duration","600ms"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInRightBig"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html><script>var flinks=["https://hexo.io/zh-cn/","https://nodejs.org/en/","https://butterfly.js.org/","https://cnhuazhu.top/","https://www.fomal.cc/","https://guole.fun/","https://akilar.top/","https://zykj.js.org/","https://blog.eurkon.com/","https://fe32.top/","https://blog.anheyu.com/","https://meuicat.com/","https://blog.zhheo.com/","https://blog.justlovesmile.top/","https://uuanqin.top/","https://blog.leonus.cn/","https://aeneag.xyz/","https://www.52pojie.cn/","https://www.kanxue.com/","https://www.anquanke.com/","https://www.freebuf.com/","https://blog.xmcve.com/","https://ctf-wiki.org/","https://bestwing.me/","https://houjingyi233.com/","https://paper.seebug.org/","https://security.tencent.com/index.php/blog/","https://xlab.tencent.com/cn/","https://www.ctfiot.com/blog/","https://www.iotsec-zone.com/article/original","https://www.yuque.com/cyberangel/rg9gdm/","https://www.yuque.com/u239977/","https://www.yuque.com/hxfqg9/","https://blog.aabyss.cn/","https://wiki.wgpsec.org/","https://www.cnblogs.com/trunk","https://lazzzaro.github.io/","https://zikh26.github.io/","https://bbs.kanxue.com/homepage-949925.htm","https://www.henry-blog.life/henry-blog","https://www.yuque.com/cyber1c3","https://blog.imzjw.cn/","https://zfe.space/","https://blog.hclonely.com/","https://whb1990.github.io/","https://nickxu.me/","https://benpaodewoniu.github.io/","https://www.antmoe.com/","https://immmmm.com/","https://blog.jyhao.cn/"];function toRandomFlink(){window.open(flinks[Math.floor(Math.random()*flinks.length)])}</script>