<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>IOT环境搭建与固件分析 | 坠入星野的月🌙</title><meta name="author" content="uf4te"><meta name="copyright" content="uf4te"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="主要涉及搭建和分析 IOT 固件的环境，这是分析和挖掘 IOT 漏洞的前置基础，同时举例说明了加密固件的几种场景及其处理方法，也包含了很多坑点的说明和解决"><meta property="og:type" content="article"><meta property="og:title" content="IOT环境搭建与固件分析"><meta property="og:url" content="https://www.uf4te.cn/posts/3fd254db.html"><meta property="og:site_name" content="坠入星野的月🌙"><meta property="og:description" content="主要涉及搭建和分析 IOT 固件的环境，这是分析和挖掘 IOT 漏洞的前置基础，同时举例说明了加密固件的几种场景及其处理方法，也包含了很多坑点的说明和解决"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.uf4te.cn/img/cover/cover-130.jpg"><meta property="article:published_time" content="2024-06-07T03:47:53.000Z"><meta property="article:modified_time" content="2024-08-14T10:14:33.000Z"><meta property="article:author" content="uf4te"><meta property="article:tag" content="IOT"><meta property="article:tag" content="QEMU"><meta property="article:tag" content="GNS3"><meta property="article:tag" content="固件解密"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.uf4te.cn/img/cover/cover-130.jpg"><link rel="shortcut icon" href="/img/blog/avatar.jpg"><link rel="canonical" href="https://www.uf4te.cn/posts/3fd254db.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//sdk.51.la"><meta name="baidu-site-verification" content="codeva-b3iLZWQECM"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload='this.media="all"'><script>!function(t){"use strict";!function(e){var r=window,s=document,n=t,c="".concat("https:"===s.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),i=s.createElement("script"),o=s.getElementsByTagName("script")[0];i.type="text/javascript",i.setAttribute("charset","UTF-8"),i.async=!0,i.src=c,i.id="LA_COLLECT",n.d=i;var a=function(){r.LA.ids.push(n)};r.LA?r.LA.ids&&a():(r.LA=t,r.LA.ids=[],a()),o.parentNode.insertBefore(i,o)}()}({id:"3GoBenqrrrBby5er",ck:"3GoBenqrrrBby5er",hashMode:!0})</script><script>!function(e,t,n,r){var i=t.createElement("script"),o=t.getElementsByTagName("script")[0];i.type="text/javascript",i.crossorigin=!0,i.onload=function(){(new e.LingQue.Monitor).init({id:"3GoBenqrrrBby5er"})},o.parentNode.insertBefore(i,o),i.src="https://sdk.51.la/perf/js-sdk-perf.min.js"}(window,document)</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"XY1UOYTY6S",apiKey:"4f03dfbbbff745c98fa4728e2ca61a96",indexName:"uf4te",hits:{per_page:10},languages:{input_placeholder:"搜索文章",hits_empty:"找不到您查询的内容：${query}",hits_stats:"找到 ${hits} 条结果，用时 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"简"},noticeOutdate:void 0,highlight:{plugin:"prismjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#323232",bgDark:"#696969",position:"bottom-center"},source:{justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js",css:"https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1,percent:{toc:!1,rightside:!0}}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"IOT环境搭建与固件分析",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-08-14 18:14:33"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,n)=>{const a=document.createElement("link");a.rel="stylesheet",a.href=e,t&&(a.id=t),a.onerror=n,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,o())},document.head.appendChild(a)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/custom.css"></head><body><span id="fps"></span><script src="/js/reward.js"></script><script src="https://cdn1.tianli0.top/npm/sweetalert2@11.6.16/dist/sweetalert2.all.min.js"></script><script>var fdataUser={apiurl:"https://friends.uf4te.cn/",defaultFish:500,hungryFish:500}</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="坠入星野的月🌙" type="application/atom+xml"><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg" onerror='onerror=null,src="/img/404/loading_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-book-open"></i> <span>文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i> <span>文章归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>文章标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>文章分类</span></a></li><li><a class="site-page child" href="javascript:toRandomPost()"><i class="fa-fw fa-solid fa-car-side"></i> <span>随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-gift"></i> <span>休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa-solid fa-headphones"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa-brands fa-youtube"></i> <span>视频</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fa-regular fa-images"></i> <span>图片</span></a></li><li><a class="site-page child" href="/play/"><i class="fa-fw fa-solid fa-gamepad"></i> <span>游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-circle-nodes"></i> <span>互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/comments/"><i class="fa-fw fa-sharp fa-solid fa-paper-plane"></i> <span>留言板</span></a></li><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa-solid fa-pen-nib"></i> <span>我的说说</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fa-solid fa-user-group"></i> <span>友链朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-thumbs-up"></i> <span>推荐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/"><i class="fa-fw fa-solid fa-wrench"></i> <span>实用工具</span></a></li><li><a class="site-page child" href="/collect/"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>时空之海</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-user-astronaut"></i> <span>我的装备</span></a></li><li><a class="site-page child" href="/commentwall/"><i class="fa-fw fa-brands fa-skyatlas"></i> <span>言语星空</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-regular fa-address-card"></i> <span>关于本站</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image:url('/img/blog/default_top_img.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="坠入星野的月🌙"><img class="site-icon" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg"></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>主页</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-sharp fa-solid fa-book-open"></i> <span>文库</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fa-solid fa-calendar-days"></i> <span>文章归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>文章标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>文章分类</span></a></li><li><a class="site-page child" href="javascript:toRandomPost()"><i class="fa-fw fa-solid fa-car-side"></i> <span>随便逛逛</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-gift"></i> <span>休闲</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa-solid fa-headphones"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/video/"><i class="fa-fw fa-brands fa-youtube"></i> <span>视频</span></a></li><li><a class="site-page child" href="/photo/"><i class="fa-fw fa-regular fa-images"></i> <span>图片</span></a></li><li><a class="site-page child" href="/play/"><i class="fa-fw fa-solid fa-gamepad"></i> <span>游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-circle-nodes"></i> <span>互动</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/comments/"><i class="fa-fw fa-sharp fa-solid fa-paper-plane"></i> <span>留言板</span></a></li><li><a class="site-page child" href="/artitalk/"><i class="fa-fw fa-solid fa-pen-nib"></i> <span>我的说说</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友情链接</span></a></li><li><a class="site-page child" href="/friends/"><i class="fa-fw fa-solid fa-user-group"></i> <span>友链朋友圈</span></a></li></ul></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fa-solid fa-thumbs-up"></i> <span>推荐</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/tools/"><i class="fa-fw fa-solid fa-wrench"></i> <span>实用工具</span></a></li><li><a class="site-page child" href="/collect/"><i class="fa-fw fa-solid fa-mug-saucer"></i> <span>时空之海</span></a></li><li><a class="site-page child" href="/equipment/"><i class="fa-fw fa-solid fa-user-astronaut"></i> <span>我的装备</span></a></li><li><a class="site-page child" href="/commentwall/"><i class="fa-fw fa-brands fa-skyatlas"></i> <span>言语星空</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa-regular fa-address-card"></i> <span>关于本站</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">IOT环境搭建与固件分析</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-sharp fa-regular fa-pen-to-square fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-07T03:47:53.000Z 2024-06-07 11:47:53">2024-06-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-14T10:14:33.000Z 2024-08-14 18:14:33">2024-08-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-folder-open fa-fw post-meta-icon"></i> <a class="post-meta-categories" href="/categories/IOT%E5%9B%BA%E4%BB%B6%E5%88%86%E6%9E%90/">IOT固件分析</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span> <span class="word-count">5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span> <span>18分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title="IOT环境搭建与固件分析"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span class="waline-pageview-count" data-path="/posts/3fd254db.html"><i class="fa-solid fa-spinner fa-spin"></i></span></span> <span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/posts/3fd254db.html#post-comment"><span class="waline-comment-count" data-path="/posts/3fd254db.html"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18v44h-352Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="IOT-环境搭建"><a href="#IOT-环境搭建" class="headerlink" title="IOT 环境搭建"></a>IOT 环境搭建</h1><h2 id="binwalk"><a href="#binwalk" class="headerlink" title="binwalk"></a>binwalk</h2><blockquote><p><code>binwalk</code> 是 IOT 固件分析中用来解压设备固件的常用工具，在 CTF 杂项中也常会用到 <code>binwalk</code> 进行文件提取，但是现在将要对 <code>binwalk</code> 进行更加深入的了解</p></blockquote><p><code>binwalk</code> 可以通过 <code>apt</code> 安装，也可以自己编译安装</p><p>建议尽量通过源码安装 <code>binwalk</code>，因为 <code>apt</code> 安装的 <code>binwalk</code> 可能不完整，后续遇到各种报错问题需要单独去解决，将缺少的东西安装回来</p><hr><h3 id="安装-binwalk"><a href="#安装-binwalk" class="headerlink" title="安装 binwalk"></a>安装 binwalk</h3><ul><li><code>apt</code> 安装 <code>binwalk</code>：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> binwalk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在 Kali Linux 2024.1 中使用 <code>apt</code> 安装的是 <code>binwalk v2.3.3</code>，目前最新版为 <code>binwalk v2.3.4</code></p><ul><li>编译安装 <code>binwalk</code></li></ul><p>如果系统自带 <code>apt</code> 安装的 <code>binwalk</code>，且版本比较老旧，可以先卸载：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 查看是否安装 binwalk</span>
binwalk
<span class="token comment"># 如果已经安装 binwalk，首先卸载 binwalk</span>
<span class="token function">sudo</span> <span class="token function">apt</span> remove binwalk
<span class="token comment"># 更新软件列表</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>编译安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/devttys0/binwalk.git /opt/binwalk
<span class="token builtin class-name">cd</span> /opt/binwalk
<span class="token function">sudo</span> python3 setup.py <span class="token function">install</span>

<span class="token comment"># 测试安装</span>
binwalk<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>安装 <code>binwalk</code> 运行过程中需要调用的命令行工具：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># binwalk 运行时，它依赖许多命令行工具来提取固件</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mtd-utils <span class="token function">gzip</span> <span class="token function">bzip2</span> <span class="token function">tar</span> arj lhasa p7zip p7zip-full cabextract cramfsswap squashfs-tools sleuthkit default-jdk lzop srecord

<span class="token comment"># 安装 C/C++ 编译器、liblzma、liblzo 和 zlib 依赖项</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> build-essential liblzma-dev liblzo2-dev zlib1g-dev<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><h3 id="安装-sasquatch"><a href="#安装-sasquatch" class="headerlink" title="安装 sasquatch"></a>安装 sasquatch</h3><blockquote><p>用于分离 <code>squashfs</code> 固件系统，解开非标准的 <code>squashfs</code> 文件系统</p></blockquote><p>如果没有安装 <code>sasquatch</code>，使用 <code>binwalk -Me</code> 提取固件的过程中会报如下警告：</p><blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: Extractor.execute failed to run external extractor <span class="token string">'sasquatch -p 1 -le -d '</span>squashfs-root<span class="token string">' '</span>%e<span class="token string">''</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>Errno <span class="token number">2</span><span class="token punctuation">]</span> No such <span class="token function">file</span> or directory: <span class="token string">'sasquatch'</span>, <span class="token string">'sasquatch -p 1 -le -d '</span>squashfs-root<span class="token string">' '</span>%e<span class="token string">''</span> might not be installed correctly<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><p>安装 <code>sasquatch</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mtd-utils <span class="token function">gzip</span> <span class="token function">bzip2</span> <span class="token function">tar</span> arj lhasa p7zip p7zip-full cabextract cramfsprogs cramfsswap squashfs-tools 
<span class="token function">sudo</span> <span class="token function">git</span> clone https://github.com/devttys0/sasquatch.git /opt/sasquatch
<span class="token builtin class-name">cd</span> /opt/sasquatch
<span class="token function">sudo</span> <span class="token function">chmod</span> +x build.sh
<span class="token function">sudo</span> ./build.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>通过 <code>sudo ./build.sh</code> 编译时可能会出现报错：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unsquashfs.c: In <span class="token keyword">function</span> ‘read_super’:
unsquashfs.c:1835:5: error: this ‘if’ clause does not guard<span class="token punctuation">..</span>. <span class="token punctuation">[</span>-Werror<span class="token operator">=</span>misleading-indentation<span class="token punctuation">]</span>
 <span class="token number">1835</span> <span class="token operator">|</span>     if<span class="token punctuation">(</span>swap<span class="token punctuation">)</span>
      <span class="token operator">|</span>     ^~
unsquashfs.c:1841:9: note: <span class="token punctuation">..</span>.this statement, but the latter is misleadingly indented as <span class="token keyword">if</span> it were guarded by the ‘if’
 <span class="token number">1841</span> <span class="token operator">|</span>         read_fs_bytes<span class="token punctuation">(</span>fd, SQUASHFS_START, sizeof<span class="token punctuation">(</span>struct squashfs_super_block<span class="token punctuation">)</span>,
      <span class="token operator">|</span>         ^~~~~~~~~~~~~
cc1: all warnings being treated as errors
make: *** <span class="token punctuation">[</span><span class="token operator">&lt;</span>builtin<span class="token operator">&gt;</span>: unsquashfs.o<span class="token punctuation">]</span> Error <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>错误原因是代码中的 <code>if</code> 出现了问题，报错提示在第 <code>1835</code> 行出现了错误</p><p>该错误是因为 <code>if</code> 条件语句缺少必要的左右花括号 <code>{</code> 和 <code>}</code>，导致后面的 <code>'ERROR'</code> 语句无法被包含在条件语句块中执行</p></blockquote><p>解决方法参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46047387/article/details/130016236">关于Kali编译sasquatch时出现 ‘if’ clause does not guard… -Werror=misleading-indentation 的解决方案-CSDN博客</a></p><p>使用 <a target="_blank" rel="noopener" href="https://github.com/devttys0/sasquatch/pull/47">Fixed gcc build errors by threadexio · Pull Request #47 · devttys0/sasquatch</a> 该 pull 中的一个 <code>patch</code> 文件来进行补丁：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /opt/sasquatch  
<span class="token function">sudo</span> <span class="token function">wget</span> https://github.com/devttys0/sasquatch/pull/47.patch  
<span class="token function">sudo</span> patch <span class="token parameter variable">-p1</span> <span class="token operator">&lt;</span> <span class="token number">47</span>.patch  
<span class="token function">sudo</span> ./build.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>再次编译后不会再报错，可以正常分离 <code>squashfs</code> 固件系统</p><hr><h3 id="安装-ubi-reader"><a href="#安装-ubi-reader" class="headerlink" title="安装 ubi_reader"></a>安装 ubi_reader</h3><blockquote><p>用于分离 <code>ubifs</code> 固件系统，即：<code>binwalk</code> 分离后的后缀为 <code>ubi</code> 的 <code>xxx.ubi</code> 文件</p></blockquote><p>如果 <code>binwalk</code> 解压后只有 <code>xxx.ubi</code> 文件而没有文件系统，或者 <code>binwalk</code> 执行 <code>ubireader_extract_files</code> 程序失败：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">MARNING: Extractor.execute failed to run external extractor <span class="token string">'ubireader_extract_files -o '</span>ubifs-root' <span class="token string">"%e"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>Errno <span class="token number">2</span><span class="token punctuation">]</span> No such <span class="token function">file</span> or directory<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这是因为 <code>binwalk</code> 缺少必要的组件：<code>ubi_reader</code></p><blockquote><p>注意：</p><p><code>ubi_reader</code> 这个工具很重要，如果路由器固件是 <code>ubi</code> 格式，需要用 <code>ubireader_extract_files</code> 来提取，否则会无法解压出文件系统</p></blockquote><p>参考文档：<a target="_blank" rel="noopener" href="https://blog.csdn.net/gybwq/article/details/113850747">https://blog.csdn.net/gybwq/article/details/113850747</a></p><p>安装 <code>ubi_reader</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> liblzo2-dev  
<span class="token function">sudo</span> pip <span class="token function">install</span> python-lzo  
<span class="token function">sudo</span> pip <span class="token function">install</span> ubi_reader<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><code>ubi_reader</code> 工具提供了四个脚本：</p><ul><li>获取 UBI 信息、布局块等：<code>ubireader_display_info</code></li><li>提取镜像：<code>ubireader_extract_images</code></li><li>提取文件内容：<code>ubireader_extract_files</code></li><li>分析 UBI 镜像并创建 shell 脚本和 UBI 配置文件：<code>bireader_utils_info</code></li></ul><p><code>ubi_reader</code> 工具的使用也很简单，可以不需要参数：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 提取镜像里面的文件，输出保存到 ./ubifs-root/ 目录  </span>
ubireader_extract_files rootfs.ubi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><h2 id="QEMU"><a href="#QEMU" class="headerlink" title="QEMU"></a>QEMU</h2><blockquote><p>VMware 和 Virtualbox 之类通常只能在 x86 计算机上虚拟出一个 x86 虚拟机，而 QEMU 支持在 x86 上虚拟出一个 ARM 虚拟机</p><p>QEMU 源码下载地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9kb3dubG9hZC5xZW11Lm9yZy8=">Index of / qemu</a><br>虚拟机磁盘镜像下载地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9wZW9wbGUuZGViaWFuLm9yZy9+YXVyZWwzMi9xZW11Lw==">Index of /~aurel32/qemu</a></p></blockquote><h3 id="安装-QEMU"><a href="#安装-QEMU" class="headerlink" title="安装 QEMU"></a>安装 QEMU</h3><ul><li>通过 <code>apt</code> 安装 QEMU：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> qemu qemu-kvm virt-manager bridge-utils binfmt-support
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span>  qemu-system qemu-user-static   <span class="token comment"># 安装系统态、用户态</span>

<span class="token comment"># 安装依赖库</span>
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc-arm-linux-gnueabi
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> qemu libncurses5-dev gcc-arm-linux-gnueabi build-essential gdb-arm-none-eabi synaptic gcc-aarch64-linux-gnu eclipse-cdt <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>注意：</p><p>Ubuntu 24.04 这种新版本系统中貌似去除了 <code>sudo apt install qemu</code>，但仍可以通过 <code>sudo apt install qemu-system qemu-user-static</code> 安装，只不过版本是 <code>qemu-8.2.2</code>，不是最新版</p><p><strong>QEMU 有 user mode 和 system mode 两种配置方式</strong></p><p>其中 QEMU 在 system mode 配置下模拟出整个计算机，可以在 QEMU 之上运行一个操作系统；而 user mode 仅可用来运行对应架构的二进制文件，例如：交叉编译</p></blockquote><ul><li>通过源码编译安装 QEMU</li></ul><p>如果通过 <code>apt</code> 安装过 QEMU，首先卸载：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 删除包和相关依赖</span>
<span class="token function">sudo</span> <span class="token function">apt</span> remove --auto-remove qemu*
<span class="token comment"># 删除配置文件和相关的数据文件</span>
<span class="token function">sudo</span> <span class="token function">apt</span> purge --auto-remove qemu*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>采用源码编译安装 <code>qemu-9.0.0</code>：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> https://download.qemu.org/qemu-9.0.0.tar.xz
<span class="token function">tar</span> xvJf qemu-9.0.0.tar.xz
<span class="token builtin class-name">cd</span> qemu-9.0.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>安装依赖：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ninja-build zlib1g zlib1g-dev libglib2.0-dev libpixman-1-dev libfdt-dev python3-venv libgtk-3-dev build-essential pkg-config binutils-dev 
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> flex bison<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>编译安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> build <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> build
<span class="token comment"># 以编译 x86_64 架构的 QEMU 为例，-softmmu 表示 system mode</span>
<span class="token function">sudo</span> <span class="token punctuation">..</span>/configure --enable-kvm --target-list<span class="token operator">=</span>x86_64-softmmu --enable-debug
<span class="token comment"># 启动多核心编译加快速度</span>
<span class="token function">sudo</span> <span class="token function">make</span> -j<span class="token variable"><span class="token variable">$(</span>nproc<span class="token variable">)</span></span>
<span class="token comment"># 将其安装到 /bin 目录下，即可通过终端启动</span>
<span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>编译命令中一些参数的说明：</p><table><thead><tr><th align="left">参数</th><th align="left">含义</th></tr></thead><tbody><tr><td align="left"><code>--enable-kvm</code></td><td align="left">表示开启 kvm 支持</td></tr><tr><td align="left"><code>--target-list</code></td><td align="left">指定要编译的 CPU 架构（<strong>如果不指定，就是全部架构都编译</strong>），其中 <code>-softmmu</code> 表示 system mode，<code>-linux-user</code> 表示 user mode</td></tr><tr><td align="left"><code>--enable-debug</code></td><td align="left">能够对 QEMU 进行调试</td></tr></tbody></table><blockquote><p>目前在 Ubuntu 24.04 中编译 AARCH64 架构的时候会报错</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span><span class="token number">2181</span>/9361<span class="token punctuation">]</span> Compiling C object libqemu-aarch64-linux-user.fa.p/target_arm_helper.c.o
ninja: build stopped: subcommand failed.  
make: *** <span class="token punctuation">[</span>Makefile:167：run-ninja<span class="token punctuation">]</span> 错误 <span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>解决方法：将报错文件 <code>../target/arm/cpu.c</code> 的第 1020 行的 <code>CS_ARCH_ARM64</code> 改为 <code>CS_ARCH_ARM</code>，重新编译即可</p></blockquote><p>编译完成后，会在 <code>build</code> 目录下生成 <code>x86_64</code> 架构下的 QEMU 本体：<code>qemu-system_x86-64</code></p><p>在终端验证安装：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">qemu-system_x86-64 <span class="token parameter variable">--version</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA8.png" alt="IOT环境搭建8.png"></p><p>查看 QEMU 安装路径：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">which</span> qemu-system-x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA9.png" alt="IOT环境搭建9.png"></p><hr><h3 id="配置网络脚本"><a href="#配置网络脚本" class="headerlink" title="配置网络脚本"></a>配置网络脚本</h3><p>另外，QEMU 默认没有网络脚本文件，需要自己进行创建</p><p>在 <code>/usr/local/etc</code> 目录下（也有可能是 <code>/etc</code> 目录下，可以到时候根据报错路径来确定具体位置），新建 <code>qemu-ifup</code> 文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token builtin class-name">set</span> <span class="token parameter variable">-x</span>

<span class="token assign-left variable">switch</span><span class="token operator">=</span>br0

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$1</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>
    <span class="token function">ip</span> tuntap <span class="token function">add</span> <span class="token variable">$1</span> mode tap user <span class="token variable"><span class="token variable">`</span><span class="token function">whoami</span><span class="token variable">`</span></span>
    <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> <span class="token variable">$1</span> up
    <span class="token function">sleep</span> <span class="token number">0</span>.5s
    <span class="token function">ip</span> <span class="token function">link</span> <span class="token builtin class-name">set</span> <span class="token variable">$1</span> master <span class="token variable">$switch</span>
    <span class="token builtin class-name">exit</span> <span class="token number">0</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Error: no interface specified"</span>
    <span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>增加权限：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">chmod</span> <span class="token number">755</span> /usr/local/etc/qemu-ifup<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><hr><h2 id="GNS3"><a href="#GNS3" class="headerlink" title="GNS3"></a>GNS3</h2><blockquote><p>GNS3 是一种可以仿真复杂网络的图形化网络模拟器，GNS3 允许在计算机中运行 Cisco 的 IOS</p><p>GNS3 其实是 Dynagen 的图形化前端环境工具软件，而 Dynamips 是仿真 IOS 的核心程序，Dynagen 运行在 Dynamips 之上，目的是提供更友好的、基于文本的用户界面</p><p><strong>注意：GNS3 仅支持 Cisco 设备的仿真</strong></p></blockquote><h3 id="Windows-安装-GNS3"><a href="#Windows-安装-GNS3" class="headerlink" title="Windows 安装 GNS3"></a>Windows 安装 GNS3</h3><p>首先下载安装 GNS3：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuZ25zMy5jb20vc29mdHdhcmUvZG93bmxvYWQ=">Software | GNS3</a>（这是官网的最新版，当然也可以去第三方下载特定版本）</p><p>安装过程参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/carefree2005/article/details/116880491">网络工具之GNS3安装及使用_gns3的安装步骤及导入路由器镜像的过程-CSDN博客</a></p><p>安装成功后界面如下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA45.png" alt="IOT环境搭建45.png"></p><p>另外 GNS3 也有 VM 版本，同样在 <a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly93d3cuZ25zMy5jb20vc29mdHdhcmUvZG93bmxvYWQ=">Software | GNS3</a> 处下载（这是官网的最新版，当然也可以去第三方下载特定版本）</p><p>下载解压后名为 <code>GNS3 VM.ova</code>，直接导入 VMware Workstation 即可：（<strong>注意 GNS3 的版本需要与 GNS3 VM 的版本一致</strong>）</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA47.png" alt="IOT环境搭建47.png"></p><p>在物理机上测试一下是否能正常访问 Web-UI：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA62.png" alt="IOT环境搭建62.png"></p><p>同时在 GNS3 中配置 GNS3 VM：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA61.png" alt="IOT环境搭建61.png"></p><p>配置成功后在 Servers Summary 处会显示 GNS3 VM 并且为绿色：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA63.png" alt="IOT环境搭建63.png"></p><p>GNS3 自带的终端为 Putty，不过 GNS3 支持与 SecureCRT 之类的终端仿真软件进行绑定</p><p>下载安装 SecureCRT（一款 SSH 终端仿真软件），网上教程很多，请自行下载 SecureCRT 并破解（<strong>仅用于学习交流，请支持正版</strong>）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA48.png" alt="IOT环境搭建48.png"></p><p>在 GNS3 中将终端改为 SecureCRT，如果你的 SecureCRT 安装没有问题，会自动识别到其所在路径：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA46.png" alt="IOT环境搭建46.png"></p><p>自行检查 GNS3 识别到的 SecureCRT 安装路径是否正确：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA49.png" alt="IOT环境搭建49.png"></p><p>选择 <code>Run appliances on my local coputer</code>：（如果安装了 GNS3 VM 也可以选 <code>Run appliances in a virtual machine</code> 将固件运行在 GNS3 VM 中）</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA60.png" alt="IOT环境搭建60.png"></p><p>初始化 GNS3 Server，保持默认即可（这里 <code>Host binding</code> 默认为 <code>localhost</code>，但建议设置为 <code>127.0.0.1</code>，这样当网络环境发生变化时，仍然能够连接到 GNS3 VM）</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA51.png" alt="IOT环境搭建51.png"></p><hr><h3 id="Linux-安装-GNS3"><a href="#Linux-安装-GNS3" class="headerlink" title="Linux 安装 GNS3"></a>Linux 安装 GNS3</h3><p>参考官方文档：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9kb2NzLmduczMuY29tL2RvY3MvZ2V0dGluZy1zdGFydGVkL2luc3RhbGxhdGlvbi9saW51eC8=">GNS3 Linux Install | GNS3 Documentation</a></p><p>以 Kali Linux 为例：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python3 python3-pip pipx python3-pyqt5 python3-pyqt5.qtwebsockets python3-pyqt5.qtsvg qemu-kvm qemu-utils libvirt-clients libvirt-daemon-system virtinst dynamips software-properties-common ca-certificates <span class="token function">curl</span> gnupg2 
pipx <span class="token function">install</span> gns3-server
pipx <span class="token function">install</span> gns3-gui
pipx inject gns3-gui gns3-server PyQt5

gns3   <span class="token comment"># 启动 GNS3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA50.png" alt="IOT环境搭建50.png"></p><hr><h1 id="固件分析"><a href="#固件分析" class="headerlink" title="固件分析"></a>固件分析</h1><blockquote><p>路由器固件分为加密固件和未加密固件，对于未加密的固件使用 <code>binwalk</code> 可以直接提取，而对于加密的固件则需要先想办法解密</p></blockquote><h2 id="未加密固件的分析"><a href="#未加密固件的分析" class="headerlink" title="未加密固件的分析"></a>未加密固件的分析</h2><blockquote><p>以下分析都是以 Cisco 的 <code>RV34X-v1.0.03.29-2022-10-17-13-45-34-PM.img</code> 固件为例</p><p>下载地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9zb2Z0d2FyZS5jaXNjby5jb20vZG93bmxvYWQvaG9tZS8yODYyODc3OTEvdHlwZS8yODI0NjU3ODkvcmVsZWFzZS8xLjAuMDMuMjk=">Software Download - Cisco Systems</a></p></blockquote><p><strong>如果以下所有流程全部正常走完，那就说明我们的环境是没有问题的</strong></p><hr><h3 id="固件扫描"><a href="#固件扫描" class="headerlink" title="固件扫描"></a>固件扫描</h3><p>使用 <code>binwalk</code> 扫描固件，可以查看固件信息：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">binwalk 路由器固件（一般以 .bin 或 .img 为后缀）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA1.png" alt="IOT环境搭建1.png"></p><hr><h3 id="固件提取"><a href="#固件提取" class="headerlink" title="固件提取"></a>固件提取</h3><p>使用 <code>binwalk</code> 提取路由器固件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">binwlak <span class="token parameter variable">-Me</span> 路由器固件（一般以 .bin 或 .img 为后缀）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>binwalk</code> 提取后，会在固件所在目录得到一个 <code>_XXXXX.extracted</code> 文件夹，其中通常有一个 <code>_fw.gz.extracted</code> 文件夹</p><p>在形如 <code>_openwrt-comcerto2000-hgw-rootfs-ubi_nand.img.extracted</code> 的文件夹中有一个 <code>ubifs-root</code> 文件夹</p><blockquote><p>**如果通过 <code>binwalk -Me</code> 解压后没有 <code>ubifs-root</code> 文件夹，只有一个 <code>0.ubi</code> 文件，说明没有安装 <code>ubi_reader</code>**，请参照上面的环境搭建一节自行安装</p></blockquote><p>其中存放着路由器文件系统的根目录 <code>rootfs</code>，其结构如下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA3.png" alt="IOT环境搭建3.png"></p><p><mark>注意：如果上图中出现 <code>var -&gt; /dev/null</code>，说明是有问题的</mark></p><p>仔细看 <code>binwalk</code> 的提取信息，会发现很多如下警告：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">WARNING: Symlink points outside of the extraction directory: /home/wyy/IOT/Cisco/RV34X-v1.0.03.29-2022-10-17-13-45-34-PM/_RV34X-v1.0.03.29-2022-10-17-13-45-34-PM.img.extracted/_40.extracted/_fw.gz.extracted/_0.extracted/_openwrt-comcerto2000-hgw-rootfs-ubi_nand.img.extracted/ubifs-root/790534924/rootfs/www/index.html -<span class="token operator">&gt;</span> /tmp/www/index.html<span class="token punctuation">;</span> changing <span class="token function">link</span> target to /dev/null <span class="token keyword">for</span> security purposes.<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>意思是：原本文件中存在的软链接指向了提取目录之外</p><p>就比如当前的&nbsp;<code>var</code>&nbsp;目录，它指向的是 Kali Linux 本机的&nbsp;<code>/tmp</code>&nbsp;目录（实际上应该指向路由器的&nbsp;<code>/tmp</code>&nbsp;目录，而不是本机的&nbsp;<code>/tmp</code>&nbsp;目录），为了安全考虑，<code>binwalk</code>&nbsp;将这种软链接都置成了&nbsp;<code>/dev/null</code></p><blockquote><p>这里如果放任不管，后面进行路由器的仿真会失败，比如路由器的某个服务需要去访问&nbsp;<code>var</code>&nbsp;目录下的文件，但它如果被置成&nbsp;<code>/dev/null</code>&nbsp;的话，目录自然是缺失的</p></blockquote><p>解决方法是找到 <code>binwalk</code> 安装路径下的 <code>/modules</code> 文件夹，修改其中的 <code>extractor.py</code> 文件</p><p>如果是通过 <code>apt</code> 安装的 <code>binwalk</code>，不知道安装路径在哪里，使用如下命令搜索：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">find</span> / <span class="token parameter variable">-name</span> binwalk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>找到 <code>extractor.py</code> 文件后，搜索：<code>"os.devnull"</code>，大概在文件的最末尾，1008 行，将 <code>if not ...</code> 改为 <code>if 0 and not ...</code></p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA4.png" alt="IOT环境搭建4.png"></p><p>然后使用 <code>binwalk</code> 重新解压固件，即可得到 <code>var -&gt; /tmp</code> 的文件系统（如果是自行编译安装的 <code>binwalk</code>，可能需要首先在 <code>binwalk</code> 安装根目录下使用 <code>sudo python3 setup.py install</code> 重新安装一下再解压）：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA2.png" alt="IOT环境搭建2.png"></p><p>到这里就提取完毕了</p><blockquote><p>补充另一种方法，安装 <code>ubi_reader</code> 后通过 <code>ubireader_extract_files</code> 工具单独对 <code>0.ubi</code> 进行提取也可以避免上述软链接的问题：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ubireader_extract_files <span class="token number">0</span>.ubi<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><hr><h3 id="查看路由器属性"><a href="#查看路由器属性" class="headerlink" title="查看路由器属性"></a>查看路由器属性</h3><p>查看路由器属性（为后续配置搜集信息）</p><p>在路由器文件系统的 <code>/bin</code> 目录下，有一个 <code>busybox</code> 的二进制可执行文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /bin
<span class="token function">file</span> busybox<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA5.png" alt="IOT环境搭建5.png"></p><p>可见该路由器是 32 位 ARM 架构，小端序，动态链接</p><p>那么进行路由器仿真时就需要使用 32 位 ARM 架构的 QEMU</p><hr><h3 id="QEMU-运行异架构程序"><a href="#QEMU-运行异架构程序" class="headerlink" title="QEMU 运行异架构程序"></a>QEMU 运行异架构程序</h3><p>在 x86 架构的 Kali Linux 下模拟运行 ARM 结构下的 <code>busybox</code>，测试一下 QEMU 是否正常</p><p>由于我们是在 x86 架构上运行 ARM 架构的 32 位二进制可执行程序，因此使用 <code>qemu-arm-static</code> 来运行</p><blockquote><p>因为我们是运行二进制程序，因此使用 QEMU 用户态进行模拟，也就是带 <code>static</code> 的版本</p><p>还有一种带 <code>system</code> 的版本，是用于模拟系统级的 QEMU，其包括 CPU、内存、外设、操作系统等，能模拟出一个完整的操作系统环境</p></blockquote><p>查看是否安装了所需的 QEMU 版本：（如果是自己编译安装的 QEMU，可能在 <code>/usr/local/bin</code> 路径下）</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span> /usr/bin/qemu-arm*<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA6.png" alt="IOT环境搭建6.png"></p><blockquote><p>注意：</p><p>必须根据文件的架构，使用相应架构的 QEMU 模块运行，不然会报 <code>Invalid ELF image for this architecture</code> 这个错误</p></blockquote><p>首先将 <code>qemu-arm-static</code> 移动到固件目录，然后给予 <code>busybox</code> 执行权限，使用 QEMU 运行该 ARM 架构的二进制程序</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> /usr/bin/qemu-arm-static ./
<span class="token function">chmod</span> +x ./bin/busybox
<span class="token function">sudo</span> <span class="token function">chroot</span> <span class="token builtin class-name">.</span> ./qemu-arm-static ./bin/busybox<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>输出以下信息则说明运行成功：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA7.png" alt="IOT环境搭建7.png"></p><hr><h2 id="加密固件的分析"><a href="#加密固件的分析" class="headerlink" title="加密固件的分析"></a>加密固件的分析</h2><blockquote><p>厂商为了保护自己的产品，增加逆向分析的成本，通常会将路由器的固件进行加密，经过加密的固件使用一般的解包方法不能提取。要想分析这种固件，首先就要找到其对应的加密方法</p><p>实际上固件加密并不是随随便便拿来一种算法就可以的，由于家用路由器机能有限，所以 RSA 等效率较低的加密体系用的比较少，AES 或者 RC4 这些效率高的算法通常是首选的固件加密手段</p></blockquote><h3 id="加密场景"><a href="#加密场景" class="headerlink" title="加密场景"></a>加密场景</h3><blockquote><p>参考文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/biyusr/article/details/126022176">路由器固件解密思路_固件加密解密-CSDN博客</a></p></blockquote><p>一般常见的路由器加密场景有：</p><ol><li>固件的初始版本未加密，后续某个版本加密了，在加密版本与初始版本中间的某个版本附带了解密程序</li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA16.png" alt="IOT环境搭建16.png"></p><p>我们可以通过获取附带了解密程序的中间版本，分析其解密程序，然后用于固件解密</p><ol start="2"><li>固件的老版本有加密，但是后续更换了加密方式，中间版本发布了未加密的过渡版本固件</li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA17.png" alt="IOT环境搭建17.png"></p><p>我们可以通过获取带有解密程序的过渡版本固件分析，提取解密程序，然后用于固件解密</p><ol start="3"><li>固件的老版本有加密，但是后续更换了加密方式，中间版本更换了新的未加密的解密程序</li></ol><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA18.png" alt="IOT环境搭建18.png"></p><p>如果清楚早期加密方式，或者拥有早期解密程序，可以去分析更换解密程序的中间版本，来获取解密程序</p><p>如果没有早期相关解密信息，则更多是购买设备，从硬件直接提取未加密的固件</p><p>理论上也可以使用二进制对比分析工具，来分析尝试提取复原解密程序</p><hr><h3 id="判断方法"><a href="#判断方法" class="headerlink" title="判断方法"></a>判断方法</h3><blockquote><p>参考文章：</p><ol><li><a target="_blank" rel="noopener" href="https://blog.csdn.net/biyusr/article/details/126022176">路由器固件解密思路_固件加密解密-CSDN博客</a></li><li><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/198311#h2-0">如何处理加密路由器固件-安全客 - 安全资讯平台</a></li></ol></blockquote><h4 id="通过信息熵分析"><a href="#通过信息熵分析" class="headerlink" title="通过信息熵分析"></a>通过信息熵分析</h4><blockquote><p>熵泛指某些物质系统状态的一种量度，某些物质系统状态可能出现的程度</p><p>熵值越小，说明重复内容越多，系统越不稳定；熵值越大，说明信息中重复的内容越少，系统越稳定</p></blockquote><ul><li><p>对于没有加密的二进制文件来说，一些指令出现的频率通常很高，并且数据结构几乎没有随机性，所以熵值一般比较低</p></li><li><p>对于经过加密的二进制文件来说，都会想尽办法隐藏自己的信息，而导致很少有重复的内容，所以熵值一般都会比较高</p></li></ul><p>提前安装 <code>Matplotlib</code> 库：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip <span class="token function">install</span> Matplotlib<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>查看固件的信息熵：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">binwalk <span class="token parameter variable">-E</span> 路由器固件（一般以 .bin 或 .img 为后缀）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>以 D-Link 的 <code>DIR_878_FW1.30B08.bin</code> 固件为例，该固件是被加密过的：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA10.png" alt="IOT环境搭建10.png"></p><p>可以看到其熵值几乎稳定在 1.0，符合加密的特点</p><blockquote><p>经过我对多个固件的多次测试，发现<em>通过熵值来判断固件是否加密不是特别可靠，仅仅只能作为一个参考</em></p><p>比如，以下是未加密的固件 <code>RV34X-v1.0.03.29-2022-10-17-13-45-34-PM.img</code> 熵值：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA12.png" alt="IOT环境搭建12.png"></p><p>但我发现，<strong>未加密的固件熵值都是稳定的一条线，反而加密的固件最开始会有一段小波动，也许可以作为判断依据？</strong></p></blockquote><hr><h4 id="通过十六进制数据分析"><a href="#通过十六进制数据分析" class="headerlink" title="通过十六进制数据分析"></a>通过十六进制数据分析</h4><p>使用 010 Editor 等十六进制查看工具打开固件，判断其中是否包含 <code>0xFF</code> 或 <code>0x00</code> 字节、是否为随机的数据</p><p>以 D-Link 的 <code>DIR_878_FW1.30B08.bin</code> 固件为例，该固件是被加密过的：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA11.png" alt="IOT环境搭建11.png"></p><p>其中间版本固件 <code>DIR878A1_FW104B05_Middle_FW_Unencrypt.bin</code> 是未加密的：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA13.png" alt="IOT环境搭建13.png"></p><p>可以看到加密的固件中间出现了大面积的 <code>0x00</code> 断层，并且几乎不存在有意义的字符</p><p>而<strong>未加密的固件开头是存在固件的设备型号和系统等信息的</strong></p><hr><h4 id="通过-binwalk-分析"><a href="#通过-binwalk-分析" class="headerlink" title="通过 binwalk 分析"></a>通过 binwalk 分析</h4><p>通过 <code>binwalk</code> 直接分析固件也是可以判断固件是否被加密的：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">binwalk 路由器固件（一般以 .bin 或 .img 为后缀）<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>未加密的固件：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA14.png" alt="IOT环境搭建14.png"></p><p>加密的固件：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA15.png" alt="IOT环境搭建15.png"></p><p>可见被加密的固件无法被 <code>binwalk</code> 分析出任何信息</p><hr><h3 id="固件解密"><a href="#固件解密" class="headerlink" title="固件解密"></a>固件解密</h3><blockquote><p>以 D-Link 的 <code>DIR_878_FW1.30B08.bin</code> 固件为例</p><p>下载地址：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9zdXBwb3J0LmRsaW5rLmNvbS9yZXNvdXJjZS9QUk9EVUNUUy9ESVItODc4L1JFVkEvRElSLTg3OF9SRVZBX0ZJUk1XQVJFX3YxLjMwQjA4LnppcA==">DIR_878_FW1.30B08.bin</a></p></blockquote><p>我们通过在 D-Link 官网找到该固件：<a target="_blank" rel="external nofollow noopener noreferrer" href="/go.html?target=aHR0cHM6Ly9zdXBwb3J0LmRsaW5rLmNvbS9Qcm9kdWN0SW5mby5hc3B4P209RElSLTg3OA==">D-Link Technical Support</a></p><p>发现该设备为 DIR-878，其存在很多历史版本：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA19.png" alt="IOT环境搭建19.png"></p><p>将固件所有的历史版本下载进行查看：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA20.png" alt="IOT环境搭建20.png"></p><p>在中间版本 <code>DIR-878_REVA_FIRMWARE_v1.10B05</code> 文件夹中，有一个名为 <code>DIR878A1_FW104B05_Middle_FW_Unencrypt.bin</code> 的固件，这就是我们前面提到的未加密的中间版本了</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA21.png" alt="IOT环境搭建21.png"></p><p>通过 <code>binwalk</code> 提取固件系统：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA22.png" alt="IOT环境搭建22.png"></p><p>在 <code>/bin</code> 目录下存在一个名为 <code>imgdecrypt</code> 的二进制程序：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA23.png" alt="IOT环境搭建23.png"></p><p>尝试通过 QEMU 运行它，由于该程序架构是 MIPS32 小端序，我们使用 <code>qemu-mipsel-static</code> 来模拟：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA24.png" alt="IOT环境搭建24.png"></p><p>根据输出信息，是需要传入一个参数 <code>&lt;sourceFile&gt;</code></p><p>尝试用这个程序为 <code>DIR_878_FW1.30B08.bin</code> 固件解密，将参数 <code>&lt;sourceFile&gt;</code> 设置为加密的固件：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA25.png" alt="IOT环境搭建25.png"></p><p>执行后程序输出了 <code>key:C05FBF1936C99429CE2A0781F08D6AD8</code></p><p>但是发现这样解密失败，仍然无法解压固件，<strong>貌似必须将加密固件放在文件系统内</strong></p><p>我这里放在 <code>/tmp</code> 目录下，然后再次运行 <code>imgdecrypt</code> 程序，直接使用 <code>binwalk</code> 分析 <code>/tmp</code> 目录下的固件会报权限错误，需要使用 <code>sudo binwalk</code></p><p>可以看到 <code>binwalk</code> 已经可以正常分析被加密的固件，说明我们解密成功：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA26.png" alt="IOT环境搭建26.png"></p><p>然后我们来看看 <code>imgdecrypt</code> 这个二进制程序，使用 IDA 7.7 打开：（IDA 7.0 以上版本自带 MIPS 架构反编译插件，如果没有，也可以自己安装 RetDec 插件：<a target="_blank" rel="noopener" href="https://github.com/avast/retdec-idaplugin">avast/retdec-idaplugin: RetDec plugin for IDA</a>）</p><p>主函数如下：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA27.png" alt="IOT环境搭建27.png"></p><p>主要解密逻辑主要涉及到 <code>AES</code>、<code>RSA</code> 和 <code>sha512</code>：</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog-markdown-1317553172.cos.ap-nanjing.myqcloud.com/IOT%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA28.png" alt="IOT环境搭建28.png"></p><hr></article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>IOT环境搭建与固件分析</h></span></div><div class="post-copyright__type"><span class="post-copyright-info">本文链接：<a href="https://www.uf4te.cn/posts/3fd254db.html">https://www.uf4te.cn/posts/3fd254db.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="padding-left:6px;display:inline-block;width:120px"><h>作者</h><div class="post-copyright-cc-info"><h>uf4te</h></div></div><div class="post-copyright-c" style="padding-left:6px;display:inline-block;width:120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2024-06-07</h></div></div><div class="post-copyright-u" style="padding-left:6px;display:inline-block;width:120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2024-08-14</h></div></div><div class="post-copyright-c" style="padding-left:6px;display:inline-block;width:120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/IOT/">IOT</a><a class="post-meta__tags" href="/tags/QEMU/">QEMU</a><a class="post-meta__tags" href="/tags/GNS3/">GNS3</a><a class="post-meta__tags" href="/tags/%E5%9B%BA%E4%BB%B6%E8%A7%A3%E5%AF%86/">固件解密</a></div><div class="post_share"><div class="social-share" data-image="/img/cover/cover-130.jpg" data-sites="facebook, twitter, wechat, weibo, qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 奖励一下站长</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/rewards/wechat.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/rewards/wechat.png" alt="微信支付"></a><div class="post-qr-code-desc">微信支付</div></li><li class="reward-item"><a href="/img/rewards/alipay.png" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/rewards/alipay.png" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/14f0dc5a.html" title="【plaidctf 2015】PlaidDB"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-128.jpg" onerror='onerror=null,src="/img/404/pic_404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【plaidctf 2015】PlaidDB</div></div></a></div><div class="next-post pull-right"><a href="/posts/c2233a9.html" title="CNVD-2013-11625复现"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-131.jpg" onerror='onerror=null,src="/img/404/pic_404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CNVD-2013-11625复现</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/f0cbf9ee.html" title="IOT固件仿真与gdbserver远程调试"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-132.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-07-08</div><div class="title">IOT固件仿真与gdbserver远程调试</div></div></a></div><div><a href="/posts/c2233a9.html" title="CNVD-2013-11625复现"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-131.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-06-22</div><div class="title">CNVD-2013-11625复现</div></div></a></div><div><a href="/posts/f5dbafd0.html" title="AFL++环境搭建与模糊测试"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-135.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-10-15</div><div class="title">AFL++环境搭建与模糊测试</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="author_top is-center"><div class="card-info-avatar"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog/avatar.jpg" onerror='this.onerror=null,this.src="/img/404/loading_404.gif"' alt="avatar"></div><div class="author-status-box"><div class="author-status"><g-emoji class="g-emoji" alias="palm_tree" fallback-src="https://lskypro.acozycotage.net/LightPicture/2022/12/fe1dc0402e623096.jpg">😒</g-emoji><span>疲惫心累</span></div></div></div><div class="author-info__name">uf4te</div><div class="author-info__description">天道酬勤</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a><a href="/commentwall/"><div class="headline">评论</div><div class="length-num comment-total">0</div></a><a href="/about/#reward-me"><div class="headline">赞助</div><div class="length-num reward-total">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/uf4te/uf4te.github.io"><i class="fab fa-github"></i><span>给我的网站一个star 🤗</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:916884674@qq.com" target="_blank" title="mail 我的邮箱"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/img/me/QRCode_QQ.png" target="_blank" title="加我 QQ"><i class="fa-brands fa-qq"></i></a><a class="social-icon" href="/img/me/QRCode_WeChat.png" target="_blank" title="加我微信"><i class="fa-brands fa-weixin"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS 订阅"><i class="fa-solid fa-square-rss"></i></a><a class="social-icon" href="/about/#reward-me" target="_blank" title="赞助本站"><i class="fa-sharp fa-solid fa-heart-circle-bolt"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fa-solid fa-medal"></i><span>欢迎来到我的小站</span></div><div class="announcement_content">我是一个喜欢学习 PWN 和逆向的二进制 CTFer，加油，互勉！</div><div style="margin-bottom:8px"></div><div class="item-headline"><i class="fa-solid fa-hourglass-half fa-shake"></i><span>计时小助手</span></div><div id="timing"></div><div style="margin-bottom:8px"></div><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>最新公告</span></div><div class="newest_announcement_content">可以在《互动 -&gt; 我的说说》下查看本站的更新及动态：<a href="https://www.uf4te.cn/artitalk/" target="_blank" title="点击直达">我的说说</a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#IOT-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-text">IOT 环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#binwalk"><span class="toc-text">binwalk</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-binwalk"><span class="toc-text">安装 binwalk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-sasquatch"><span class="toc-text">安装 sasquatch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-ubi-reader"><span class="toc-text">安装 ubi_reader</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QEMU"><span class="toc-text">QEMU</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-QEMU"><span class="toc-text">安装 QEMU</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%BD%91%E7%BB%9C%E8%84%9A%E6%9C%AC"><span class="toc-text">配置网络脚本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GNS3"><span class="toc-text">GNS3</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Windows-%E5%AE%89%E8%A3%85-GNS3"><span class="toc-text">Windows 安装 GNS3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux-%E5%AE%89%E8%A3%85-GNS3"><span class="toc-text">Linux 安装 GNS3</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%BA%E4%BB%B6%E5%88%86%E6%9E%90"><span class="toc-text">固件分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AA%E5%8A%A0%E5%AF%86%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-text">未加密固件的分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E4%BB%B6%E6%89%AB%E6%8F%8F"><span class="toc-text">固件扫描</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E4%BB%B6%E6%8F%90%E5%8F%96"><span class="toc-text">固件提取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B1%9E%E6%80%A7"><span class="toc-text">查看路由器属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#QEMU-%E8%BF%90%E8%A1%8C%E5%BC%82%E6%9E%B6%E6%9E%84%E7%A8%8B%E5%BA%8F"><span class="toc-text">QEMU 运行异架构程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E5%9B%BA%E4%BB%B6%E7%9A%84%E5%88%86%E6%9E%90"><span class="toc-text">加密固件的分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A0%E5%AF%86%E5%9C%BA%E6%99%AF"><span class="toc-text">加密场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%96%B9%E6%B3%95"><span class="toc-text">判断方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E4%BF%A1%E6%81%AF%E7%86%B5%E5%88%86%E6%9E%90"><span class="toc-text">通过信息熵分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90"><span class="toc-text">通过十六进制数据分析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-binwalk-%E5%88%86%E6%9E%90"><span class="toc-text">通过 binwalk 分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BA%E4%BB%B6%E8%A7%A3%E5%AF%86"><span class="toc-text">固件解密</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/f5dbafd0.html" title="AFL++环境搭建与模糊测试"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-135.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="AFL++环境搭建与模糊测试"></a><div class="content"><a class="title" href="/posts/f5dbafd0.html" title="AFL++环境搭建与模糊测试">AFL++环境搭建与模糊测试</a><time datetime="2024-10-14T15:06:13.000Z" title="发表于 2024-10-14 23:06:13">2024-10-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/194d06e.html" title="U盘重装系统以及Ubuntu与Windows双系统"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-134.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="U盘重装系统以及Ubuntu与Windows双系统"></a><div class="content"><a class="title" href="/posts/194d06e.html" title="U盘重装系统以及Ubuntu与Windows双系统">U盘重装系统以及Ubuntu与Windows双系统</a><time datetime="2024-09-28T04:30:04.000Z" title="发表于 2024-09-28 12:30:04">2024-09-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb411a4c.html" title="多架构与交叉编译"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-133.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="多架构与交叉编译"></a><div class="content"><a class="title" href="/posts/bb411a4c.html" title="多架构与交叉编译">多架构与交叉编译</a><time datetime="2024-06-16T14:48:33.000Z" title="发表于 2024-06-16 22:48:33">2024-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/f0cbf9ee.html" title="IOT固件仿真与gdbserver远程调试"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-132.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="IOT固件仿真与gdbserver远程调试"></a><div class="content"><a class="title" href="/posts/f0cbf9ee.html" title="IOT固件仿真与gdbserver远程调试">IOT固件仿真与gdbserver远程调试</a><time datetime="2024-06-16T14:16:49.000Z" title="发表于 2024-06-16 22:16:49">2024-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c2233a9.html" title="CNVD-2013-11625复现"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover/cover-131.jpg" onerror='this.onerror=null,this.src="/img/404/pic_404.png"' alt="CNVD-2013-11625复现"></a><div class="content"><a class="title" href="/posts/c2233a9.html" title="CNVD-2013-11625复现">CNVD-2013-11625复现</a><time datetime="2024-06-12T13:03:01.000Z" title="发表于 2024-06-12 21:03:01">2024-06-12</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2023 - 2025 By uf4te</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div id="running-time"></div><script id="LA-DATA-WIDGET" crossorigin="anonymous" charset="UTF-8" src="https://v6-widget.51.la/v6/3GoBenqrrrBby5er/quote.js?theme=#1690FF,#00C4B6,#CACACA,#00C4B6,#FFFFFF,#1690FF,14&amp;f=12"></script><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" title="博客框架 Hexo_v6.3.0"></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" title="主题版本 Butterfly_v4.7.0"></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Vercel-black?style=flat&amp;logo=Vercel" title="本站采用多线部署，主线路部署于 Vercel"></a><a class="github-badge" target="_blank" href="https://www.cloudflare.com/zh-cn/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Hosted-Cloudflare-F38020?style=flat&amp;logo=Cloudflare" title="本站采用多线部署，备用线路部署于 Cloudflare"></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" title="本站项目主要由 Github 托管与备份"></a><a class="github-badge" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-FF3030?style=flat&amp;logo=Claris" title="本站采用知识共享署名 - 非商业性使用 - 相同方式共享 4.0 国际许可协议进行许可"></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20240052" style="margin-inline:5px"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/%E8%90%8CICP%E5%A4%87-20240052%E5%8F%B7-fe1384?style-flat&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+nhxg7wAAByxJREFUSInl1nlwVeUZx/HPuTckkD0kQFiCEEIUlNUCAqKoSBV1AIt1ikpVLFbLONjWGUXbmWrbweJMy7hUxbbTjsUq6KCiWEvr0kE2WVK2QCKBJCxJgEASsienfxwqMob+3Zm+f93z3vM+32f5vc9z+H9bwVcfOp/YQ+1prhhEZS1VDQzqQ1MjiQmIC5Liwm3lBWpqFimrulb/7A/067vM2IsOBZ2h8MhJQW6KMDNVsKeaizKEyUlsKueqgWJ39AMJF3QpDCNYr1SaEig/lWNX2Z1h6dH5/lVyGdVIZFf7MHo9bEfh9rCg/+8NyHlN77QTsnpQ0i2y08VK+BosfhbW0cHxqmSfFd9qW+l9Pi+5WltFdGTsOBbO5dJcdh3lN5+xff0Y2zuelXjRsyYUrjOu4BVJaavlpbWIJRBLOM+J81O95AAnTtM9vNHGknut3zdT48FutJE3koWTuG4oSXH+VsInX3B9IdcVUNfCuv08t4GjO6NspOa3BNcOXx1eOugVHQnrTMkTuyWrC/BjRZO9uPYTpw7HhTWkXcLd45l9GblpHD7NWzt5ZTMXZ/OdkTy+lvR07rmcmWffq6pn9W5e/oymfcT6kJbXHiydMyVYkL/x66n+ZMcctQfjhgxl6UIGZ3Ooltd2RIZqjqKRS0ew9cFIA1cO5urlLHuPZWsZPJiZw7gqn0VT2HCIR9+jvCQhfHPrLGyE2Hng2roBxHnmJoZnc9drbD3I6QaaWkjpSVoeu4+x5XB05qMDqCenHz37UHmcFRv54ZuMeoYrB/L0DPRgZ0WfrsXVKzPX3nYykrn3dUZl8+Q0Qox/gc/L6ZlKzxQefo+UROpa6Z4VCedkPd8YyJYHI3u5T/HAShZNQxsXZfR3pCtwRW066VEeOuIUVUf77+9jTw2pycTOJml7Je1t9EgiI5X2jkgyze1fCSSdtjhBiJCkpKyuI+5oTdAtkTCgVwrbKsl8ko6QjO40tZ67EpkpdIbRf20dkbPpPTjdwsSX6I5dJYy4hoQAaZQdDy4A1iEMI613T6LtBPXJpPakrjGqc1Y6CTFq62htJp5KRwPJKWSkU3WKiiPEEqO6xgM6oZmctJhDXYH7Z59xuCyKpK6R26ZE+ys3MWYoN1/Mc5uoqmbEQJ6fTc/ulJ3i/lUc+YIfzeKhKzjVHN31A3XRHddKSrf6/6DOV3VTcw1hVKfkxOhaPDAe1UwfwmNTqT1Drxw+nE9xNXetIjHG2vnoxoT+rNrN2Of58Rp6JZ+ldKes5kjX4G7dKuikpoERfaltYnQ/DOSS3hEAFk9lXQkLnmf7Ib65lPJT3HU1+46Tm8rYvgzKYVA2h+vQIMjvewHwdSN20MiOSmZczO4a1hSzYi77T7CiiPF5JMTZexjJ5OagkwNV9M+MnJ09nKU3smgyQ3PYWoEO4fUjii4QceJmevJuMeP6csUAln4atcbSGoqOUpjD30uZNwnpHNtN3lC+NZa1xeT34pGVTJ3PL9+Ohs6GQ8gVtHZs6VLVwZhBReGwoXvt3THM/hP0SWVnCR8f4PMjkffjB/DQS8waxpHFfFgaaeHZDRRtJn0yP5tF31ymFVJ2nN27GD66KBzca2/XEWdkUpD3Fmd4tYj0FMS54Q9UnuaDUv6yE/24ewWP/DU6N/d1fvousYEs28DyLVEvGDOAt/egmSkXv2VYn3NBfpXbua6J8hMFFvy2RHsL+57gmX+w/AN651PfEDWQzLRI+afqIqOxFDJT6Rbn9Bmad3PnTH5wIxOXkJTWGiz57hCDsyqDWVldRNzeyOh+paaPfpFKnvqQX88iZwDVx0lLJqUHbe3EkZ1Odm+yUqK2GHYKmhvIG8fyeTz9IY5x67jnFPapdPDkl6jzwEF9IDjZJlgwfbG+o2u8+g4rd7D/UYI41TXnevV5K4j2q6uESckUP8rvNrH6fUH/sRXB9AlPONMSDZ8uazwoi56JjEyvdftV88jinhf4uIzmJRQOoOYgja0RKAiIBZxpjvZH5tP0c97axcLlyBXOuWZemJTYFFbUCU+1dl3j8PGSyFhnJ7EkYcWh7/njqpep5xfzWTyZZ7dEg73xOJKiGqf3YenNLBjLTz7i539COg/OvSOYO2GFo/VRG0Zwe0YX4Ns3R7NXSCxBeM8IthXfZvGf3xCWc/kkXvg2vVP4YB/rDzC1gGlDo+50/xvs2khKPrNnzAzmTH5HbzR0fkkKro93Ab5vx9kfaGgT3lLA5EyWbRpoTdHbSreOppGJV/PwlRTksK+aZz5l6z+RLBgxaau5k2cJelTKzmRQMq0d51J8UxL+23d1TDTcj7WQllZu4YwxDo+eZc22X9mwd6gN65GIFmQzampxcMOoR1xeuMbpVoqromsXdG3+wmCiekNtfSSmiUNWu2zgap+WjlZW8X11TeNkpWwICvNfCm8u3Cmxg4PN0VdmEJw7/7+0/g32RaqCbhRecAAAAABJRU5ErkJggg==" title="本站已通过萌备备案：萌ICP备20240052号"></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="go-down" type="button" title="刷新页面" onclick="window.location.reload()"><i class="fa-solid fa-arrows-rotate"></i></button><button id="readmode" type="button" title="阅读模式"><i class="fa-solid fa-book-open-reader"></i></button><button id="translateLink" type="button" title="繁简切换">繁</button><button id="darkmode" type="button" title="昼夜切换"><i class="fa-solid fa-moon"></i></button><button id="hide-aside-btn" type="button" title="全屏模式" onclick="rmf.fullScreen()"><i class="fas fa-expand"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fa fa-comments"></i></a><button id="go-down" type="button" title="分享本页" onclick="rmf.copyWordsLink()"><i class="fa-solid fa-share-from-square"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button><button id="go-down" type="button" title="直达底部" onclick="btf.scrollToDest(document.body.scrollHeight,500)"><i class="fas fa-arrow-down"></i></button></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" title="后退一步" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" title="前进一步" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" title="刷新页面" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" title="直达顶部" href="javascript:btf.scrollToDest(0, 500)"><i class="fa fa-arrow-up"></i></a><a class="rightMenu-item" title="直达底部" href="javascript:btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" href="/archives/"><i class="fa-solid fa-calendar-days"></i><span>文章归档</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="fas fa-tags"></i><span>文章标签</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="fas fa-folder-open"></i><span>文章分类</span></a><a class="rightMenu-item" href="javascript:toRandomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.bing.com/search?q=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa-brands fa-edge"></i><span>用Bing搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fa fa-comments"></i><span>直达评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item menu-link" href="/copyright/"><i class="fa-solid fa-copyright"></i><span>本站协议</span></a><a class="rightMenu-item menu-link" href="/about/#reward-me"><i class="fa-sharp fa-solid fa-heart-circle-bolt"></i><span>赞助本站</span></a><a class="rightMenu-item menu-link" href="/about/"><i class="fa-regular fa-address-card"></i><span>关于本站</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>function loadWaline(){function e(){Waline.init(Object.assign({el:"#waline-wrap",reaction:!0,serverURL:"https://waline.uf4te.cn",avatarCDN:"https://cn.cravatar.com/avatar/",pageview:!0,dark:'html[data-theme="dark"]',path:window.location.pathname,comment:!0,reaction:["https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_wink.png","https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_blush.png","https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_think.png","https://unpkg.com/@waline/emojis@1.1.0/weibo/weibo_awkward.png"]},{locale:{nick:"昵称 (选填)",mail:"邮箱 (建议填写)",link:"你的主页 (选填)",placeholder:"请文明发言，牢记社会主义核心价值观！（不填写昵称和邮箱可以匿名评论，但建议填写邮箱可在被回复时收到邮件提醒，邮箱信息不会被公开）",requiredMeta:[],sofa:"有什么想说的？快来发表评论抢沙发吧！",login:"登录 (可选)",anonymous:"某不知名网友",level0:"潜水",level1:"冒泡",level2:"吐槽",level3:"活跃",level4:"话痨",level5:"传说",reactionTitle:"感觉怎么样，评价一下？",reaction0:"感觉很赞",reaction1:"支持一下",reaction2:"感觉一般",reaction3:"勉勉强强"}}))}const n=document.getElementById("waline-css");"object"==typeof Waline?n?e():getCSS("/css/waline.css","waline-css").then(e):getCSS("/css/waline.css","waline-css").then((()=>{getScript("/js/waline.js").then(e)}))}{function loadOtherComment(){loadWaline()}setTimeout(loadWaline,0)}</script></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let n=0;n<e.length;n++){t+="<div class='aside-list-item'>";{const a="data-lazy-src";t+=`<a href='${e[n].url}' class='thumbnail'><img ${a}='${e[n].avatar}' alt='${e[n].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[n].url}' title='${e[n].content}'>${e[n].content}</a>\n        <div class='name'><span>${e[n].nick} / </span><time datetime="${e[n].date}">${btf.diffDate(e[n].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let n=document.querySelector("#card-newest-comments .aside-list");n.innerHTML=t,window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(n)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("waline-newest-comments");t?e(JSON.parse(t)):(()=>{const t=()=>{Waline.RecentComments({serverURL:"https://waline.uf4te.cn",count:13}).then((({comments:t})=>{let n=t.filter((e=>"uf4te"!==e.nick));n.length<3&&(n=n.concat(t.filter((e=>"uf4te"===e.nick)).slice(0,3-n.length)));const a=n.slice(0,3).map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.objectId,date:e.insertedAt};var t}));saveToLocal.set("waline-newest-comments",JSON.stringify(a),10/1440),e(a)})).catch((e=>{document.querySelector("#card-newest-comments .aside-list").innerHTML="无法获取评论，请确认相关配置是否正确"}))};"object"==typeof Waline?t():getScript("/js/waline.js").then(t)})()}};t(),document.addEventListener("pjax:complete",t)}))</script><script src="/js/jquery.min.js"></script><script src="/js/sakura.js"></script><script data-pjax="" src="/js/footer_beautification.js"></script><canvas id="universe"></canvas><script src="/js/universe.js"></script><script src="/js/title.js"></script><script async data-pjax="" src="/js/fps.js"></script><script async data-pjax="" src="/js/txmap.js"></script><script src="/js/console.js"></script><script src="/js/hotsearch.js"></script><div class="aplayer no-destroy" data-id="8252365535" data-server="netease" data-type="playlist" data-order="random" data-fixed="true" data-autoplay="false" data-theme="#00C4B6" data-volume="0.8" data-mutex="true" data-listmaxheight="330px"></div><script src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script async data-pjax="" src="/js/timing.js"></script><script data-pjax="" src="/js/rightmenu.js"></script><script src="/js/random.js"></script><script src="https://cdn.jsdelivr.net/npm/js-heo@1.0.11/poem/jinrishici.js"></script><script data-pjax="" src="/js/poem.js"></script><script src="/js/chuckle-post-ai.js"></script><script data-pjax="" defer>new ChucklePostAI({el:"#post>#article-container",key:"e3524467cea76d785e9a",title_el:".post-title",interface:{name:"uf4te 的 AI 小助手",introduce:"Hey，你好！很高兴见到你！我是 uf4te 的文章辅助 AI，点击下方的按钮，我可以为你生成本文摘要、推荐相关文章（首次生成可能会比较慢，请您耐心等待一小会，谢谢理解哦~）",version:"GPT-3.5",button:["介绍自己","推荐相关文章","生成本文摘要","矩阵穿梭"]},hide_shuttle:!0,pjax:!0,summary_toggle:!1,summary_speech:!0})</script><script data-pjax="" src="/js/random-friends-post.js"></script><script data-pjax="" src="/js/pagination.js"></script><script async data-pjax="" src="/js/commentsum.js"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="♡富强♡,♡民主♡,♡文明♡,♡和谐♡,♡自由♡,♡平等♡,♡公正♡,♡法治♡,♡爱国♡,♡敬业♡,♡诚信♡,♡友善♡" data-fontsize="16px" data-random="false" async></script><link rel="stylesheet" href="/js/APlayer/APlayer.min.css" media="print" onload='this.media="all"'><script src="/js/APlayer/APlayer.min.js"></script><script src="/js/APlayer/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax], .pjax-reload script").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><div class="pjax-reload"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInLeft"),arr[i].setAttribute("data-wow-duration","600ms"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInRightBig"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.jsdelivr.net/gh/graingert/wow@1.3.0/dist/wow.min.js"></script><script defer src="/js/wow_init.js"></script></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInLeft"),arr[i].setAttribute("data-wow-duration","600ms"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__fadeInRightBig"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html><script>var flinks=["https://hexo.io/zh-cn/","https://nodejs.org/en/","https://butterfly.js.org/","https://cnhuazhu.top/","https://www.fomal.cc/","https://guole.fun/","https://akilar.top/","https://zykj.js.org/","https://blog.eurkon.com/","https://fe32.top/","https://blog.anheyu.com/","https://meuicat.com/","https://blog.zhheo.com/","https://blog.justlovesmile.top/","https://uuanqin.top/","https://blog.leonus.cn/","https://aeneag.xyz/","https://www.52pojie.cn/","https://www.kanxue.com/","https://www.anquanke.com/","https://www.freebuf.com/","https://blog.xmcve.com/","https://ctf-wiki.org/","https://bestwing.me/","https://houjingyi233.com/","https://paper.seebug.org/","https://security.tencent.com/index.php/blog/","https://xlab.tencent.com/cn/","https://www.ctfiot.com/blog/","https://www.iotsec-zone.com/article/original","https://www.yuque.com/cyberangel/rg9gdm/","https://www.yuque.com/u239977/","https://www.yuque.com/hxfqg9/","https://blog.aabyss.cn/","https://wiki.wgpsec.org/","https://www.cnblogs.com/trunk","https://lazzzaro.github.io/","https://zikh26.github.io/","https://bbs.kanxue.com/homepage-949925.htm","https://www.henry-blog.life/henry-blog","https://www.yuque.com/cyber1c3","https://blog.imzjw.cn/","https://zfe.space/","https://blog.hclonely.com/","https://whb1990.github.io/","https://nickxu.me/","https://benpaodewoniu.github.io/","https://www.antmoe.com/","https://immmmm.com/","https://blog.jyhao.cn/"];function toRandomFlink(){window.open(flinks[Math.floor(Math.random()*flinks.length)])}</script>